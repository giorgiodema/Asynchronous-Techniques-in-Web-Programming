Started GET "/" for 192.168.1.73 at 2018-06-12 07:45:52 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
  [1m[35m (69.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (36.1ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (53.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (290.2ms)
  Rendered home/welcome.html.erb within layouts/application (369.4ms)
Completed 200 OK in 4527ms (Views: 4227.2ms | ActiveRecord: 200.0ms)


Started GET "/cable" for 192.168.1.73 at 2018-06-12 07:46:01 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:46:02 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 192.168.1.73 at 2018-06-12 07:46:07 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (125.6ms)
Completed 200 OK in 209ms (Views: 203.7ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:46:08 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 192.168.1.73 at 2018-06-12 07:46:08 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:46:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 192.168.1.73 at 2018-06-12 07:46:21 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"9MxCzyXQeBG4j3+2ZUMiXPdcyLeSoNGfTkAZ4MX7uOVWkTxouEHFvfC/X4T3354zfEuvRO/CZTJ+lUdr+YYtwQ==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (13.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (17.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "current_sign_in_ip" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-12 05:46:21.510925"], ["current_sign_in_ip", "192.168.1.73/32"], ["sign_in_count", 2], ["updated_at", "2018-06-12 05:46:21.512793"], ["id", 2]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://192.168.1.85:3000/users/profile/2
Completed 302 Found in 238ms (ActiveRecord: 32.4ms)


Started GET "/users/profile/2" for 192.168.1.73 at 2018-06-12 07:46:21 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (25.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (18.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (115.2ms)
  Rendered home/_chats_index.html.erb (1.3ms)
  Rendered home/profile.html.erb within layouts/application (125.4ms)
Completed 200 OK in 175ms (Views: 105.4ms | ActiveRecord: 57.2ms)


Finished "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:46:21 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 192.168.1.73 at 2018-06-12 07:46:22 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:46:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/users/profile/2" for 192.168.1.73 at 2018-06-12 07:46:52 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.8ms)
  Rendered home/_chats_index.html.erb (1.8ms)
  Rendered home/profile.html.erb within layouts/application (20.0ms)
Completed 200 OK in 67ms (Views: 57.4ms | ActiveRecord: 3.5ms)


Finished "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:46:53 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.73 at 2018-06-12 07:46:53 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:46:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/profile/wish_list?id=2&list_type=0" for 192.168.1.73 at 2018-06-12 07:46:58 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"2", "list_type"=>"0"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (2.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 2], ["list_type", 0]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (7.8ms)
  Rendered ads/wish.html.erb within layouts/application (10.4ms)
Completed 200 OK in 60ms (Views: 50.1ms | ActiveRecord: 3.5ms)


Started GET "/users/profile/2" for 192.168.1.73 at 2018-06-12 07:47:00 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.2ms)
  Rendered home/_chats_index.html.erb (1.5ms)
  Rendered home/profile.html.erb within layouts/application (19.0ms)
Completed 200 OK in 64ms (Views: 54.1ms | ActiveRecord: 3.7ms)


Finished "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:47:00 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.73 at 2018-06-12 07:47:00 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:47:00 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/profile/gift_list?id=2&list_type=1" for 192.168.1.73 at 2018-06-12 07:47:01 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#gift as HTML
  Parameters: {"id"=>"2", "list_type"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering ads/gift.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 2], ["list_type", 1]]
  Rendered _ads_list.html.erb (2.3ms)
  Rendered ads/gift.html.erb within layouts/application (4.9ms)
Completed 200 OK in 60ms (Views: 44.6ms | ActiveRecord: 1.3ms)


Started GET "/" for 192.168.1.249 at 2018-06-12 07:49:10 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (6.2ms)
  Rendered home/welcome.html.erb within layouts/application (9.0ms)
Completed 200 OK in 54ms (Views: 49.2ms | ActiveRecord: 0.9ms)


Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:49:11 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:49:11 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started DELETE "/users/sign_out" for 192.168.1.73 at 2018-06-12 07:49:17 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"qBRSuAZrzM/3Wxg6CCtmFM+2pq0mrTheODCkSecqN63BFbQvFCEr6rGieMaQZyb29Cwhmzuf1aL8Tp46r7OsVg=="}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://192.168.1.85:3000/
Completed 302 Found in 20ms (ActiveRecord: 1.2ms)


Started GET "/" for 192.168.1.73 at 2018-06-12 07:49:17 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (6.3ms)
  Rendered home/welcome.html.erb within layouts/application (9.1ms)
Completed 200 OK in 46ms (Views: 41.4ms | ActiveRecord: 0.9ms)


Finished "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:49:17 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.73 at 2018-06-12 07:49:17 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:49:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 192.168.1.249 at 2018-06-12 07:49:27 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (2.9ms)
Completed 200 OK in 55ms (Views: 52.9ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:49:27 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:49:27 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:49:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:49:28 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 192.168.1.73 at 2018-06-12 07:49:29 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:49:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 192.168.1.249 at 2018-06-12 07:49:43 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"C18Bv7rVr9dwQGhBUFcj5mkjUzBIFu52N0ozHd9cyU33fRnYerxB4Z0lTjNVVgoW9gd2z5eg7OeA6+fSZHGLCw==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-12 05:49:43.288950"], ["last_sign_in_at", "2018-06-12 05:46:21.510925"], ["current_sign_in_ip", "192.168.1.249/32"], ["last_sign_in_ip", "192.168.1.73/32"], ["sign_in_count", 3], ["updated_at", "2018-06-12 05:49:43.290067"], ["id", 2]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://192.168.1.85:3000/users/profile/2
Completed 302 Found in 190ms (ActiveRecord: 10.0ms)


Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:49:43 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.7ms)
  Rendered home/_chats_index.html.erb (1.2ms)
  Rendered home/profile.html.erb within layouts/application (19.0ms)
Completed 200 OK in 59ms (Views: 49.5ms | ActiveRecord: 3.7ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:49:43 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:49:43 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:49:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/profile/wish_list?id=2&list_type=0" for 192.168.1.249 at 2018-06-12 07:49:48 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"2", "list_type"=>"0"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 2], ["list_type", 0]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.0ms)
  Rendered ads/wish.html.erb within layouts/application (6.6ms)
Completed 200 OK in 47ms (Views: 40.0ms | ActiveRecord: 1.5ms)


Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:49:50 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.2ms)
  Rendered home/_chats_index.html.erb (1.3ms)
  Rendered home/profile.html.erb within layouts/application (18.4ms)
Completed 200 OK in 72ms (Views: 61.9ms | ActiveRecord: 3.7ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:49:50 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:49:50 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:49:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/" for 192.168.1.249 at 2018-06-12 07:50:32 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 2]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.8ms)
  Rendered home/welcome.html.erb within layouts/application (7.9ms)
Completed 200 OK in 1141ms (Views: 51.1ms | ActiveRecord: 2.2ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:50:34 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:50:34 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:50:34 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=dante&commit=Search" for 192.168.1.249 at 2018-06-12 07:50:39 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["dante"], "commit"=>"Search"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (15.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%dante%')[0m
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%dante%')[0m
  Rendered home/users_list.html.erb within layouts/application (2.5ms)
Completed 200 OK in 60ms (Views: 36.3ms | ActiveRecord: 16.5ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:50:39 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:50:39 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:50:39 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:50:52 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.8ms)
  Rendered home/_chats_index.html.erb (1.3ms)
  Rendered home/profile.html.erb within layouts/application (19.1ms)
Completed 200 OK in 65ms (Views: 54.8ms | ActiveRecord: 3.8ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:50:52 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:50:52 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:50:52 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started POST "/delete_chat" for 192.168.1.249 at 2018-06-12 07:50:55 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (2.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox_2: {:type=>"delete_chat", :chat_id=>1}
[ActionCable] Broadcasting to mailbox_3: {:type=>"delete_chat", :chat_id=>1}
MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>1} (via streamed from mailbox_2)
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[35mSQL (2.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (3.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 11.2ms)


Started POST "/delete_chat" for 192.168.1.249 at 2018-06-12 07:50:56 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox_2: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] Broadcasting to mailbox_4: {:type=>"delete_chat", :chat_id=>2}
MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox_2)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 2]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 12.8ms)


Started GET "/" for 192.168.1.249 at 2018-06-12 07:50:59 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 2]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.5ms)
  Rendered home/welcome.html.erb within layouts/application (7.3ms)
Completed 200 OK in 672ms (Views: 55.1ms | ActiveRecord: 2.3ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:51:02 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:51:02 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:51:02 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=vincenzo&commit=Search" for 192.168.1.249 at 2018-06-12 07:51:07 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["vincenzo"], "commit"=>"Search"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%vincenzo%')[0m
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%vincenzo%')[0m
  Rendered home/users_list.html.erb within layouts/application (2.6ms)
Completed 200 OK in 42ms (Views: 33.7ms | ActiveRecord: 1.9ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:51:07 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:51:07 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:51:07 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/users/profile/3" for 192.168.1.249 at 2018-06-12 07:51:18 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  Rendered home/profile.html.erb within layouts/application (2.2ms)
Completed 200 OK in 52ms (Views: 44.7ms | ActiveRecord: 1.1ms)


Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:51:37 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  Rendered home/_chat.html.erb (1.5ms)
  Rendered home/_chats_index.html.erb (0.6ms)
  Rendered home/profile.html.erb within layouts/application (8.3ms)
Completed 200 OK in 61ms (Views: 53.0ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:51:37 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:51:40 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:51:40 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Finished "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:51:41 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 192.168.1.73 at 2018-06-12 07:51:41 +0200
Cannot render console from 192.168.1.73! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.73 at 2018-06-12 07:51:41 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 192.168.1.89 at 2018-06-12 07:52:18 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (6.2ms)
  Rendered home/welcome.html.erb within layouts/application (8.9ms)
Completed 200 OK in 45ms (Views: 40.4ms | ActiveRecord: 0.9ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:52:20 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:52:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 192.168.1.89 at 2018-06-12 07:52:22 +0200
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:52:22 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
MailboxChannel stopped streaming from mailbox_
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (2.3ms)
Completed 200 OK in 51ms (Views: 49.5ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:52:23 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:52:23 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:52:42 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/users/sign_in" for 192.168.1.89 at 2018-06-12 07:52:42 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"bwFLK346941L8PI2pit9ij4PSyLb/iN0mhP/M6q/svqaK7Q1KUJ3HW/fuKUBz2+e1qregNckPis2k3kxuK7t7w==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "current_sign_in_ip" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-12 05:52:43.016903"], ["current_sign_in_ip", "192.168.1.89/32"], ["sign_in_count", 2], ["updated_at", "2018-06-12 05:52:43.018047"], ["id", 3]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://192.168.1.85:3000/users/profile/3
Completed 302 Found in 203ms (ActiveRecord: 10.1ms)


Started GET "/users/profile/3" for 192.168.1.89 at 2018-06-12 07:52:43 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  Rendered home/_chat.html.erb (1.9ms)
  Rendered home/_chats_index.html.erb (0.7ms)
  Rendered home/profile.html.erb within layouts/application (10.5ms)
Completed 200 OK in 51ms (Views: 43.0ms | ActiveRecord: 1.6ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:52:44 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:52:44 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:52:47 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/" for 192.168.1.89 at 2018-06-12 07:52:47 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.1ms)
  Rendered home/welcome.html.erb within layouts/application (6.2ms)
Completed 200 OK in 508ms (Views: 41.5ms | ActiveRecord: 2.4ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:52:48 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:52:48 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:52:54 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=giorgio&commit=Search" for 192.168.1.89 at 2018-06-12 07:52:54 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["giorgio"], "commit"=>"Search"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%giorgio%')[0m
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%giorgio%')[0m
  Rendered home/users_list.html.erb within layouts/application (2.5ms)
Completed 200 OK in 52ms (Views: 44.3ms | ActiveRecord: 1.7ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:52:55 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:52:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/" for 192.168.1.249 at 2018-06-12 07:54:12 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 2]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (5.1ms)
  Rendered home/welcome.html.erb within layouts/application (8.2ms)
Completed 200 OK in 344ms (Views: 52.3ms | ActiveRecord: 2.4ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:54:12 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:54:12 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:54:12 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 192.168.1.249 at 2018-06-12 07:54:20 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.6ms)
  Rendered home/welcome.html.erb within layouts/application (7.9ms)
Completed 200 OK in 328ms (Views: 45.1ms | ActiveRecord: 2.2ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:54:20 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:54:20 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:54:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:54:21 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  Rendered home/_chat.html.erb (1.5ms)
  Rendered home/_chats_index.html.erb (0.6ms)
  Rendered home/profile.html.erb within layouts/application (8.1ms)
Completed 200 OK in 66ms (Views: 58.2ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:54:21 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:54:21 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:54:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=neanche+gli+dei&commit=Search" for 192.168.1.249 at 2018-06-12 07:54:27 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["neanche gli dei"], "commit"=>"Search"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (37.9ms)
Completed 200 OK in 1322ms (Views: 79.0ms | ActiveRecord: 0.7ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:54:28 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:54:29 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:54:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=NONE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=NO_PAGES&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3DJ2X7HAAACAAJ%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=IgDKT069634&book%5Bid%5D%5Bid%5D=J2X7HAAACAAJ&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=false&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=NOT_FOR_SALE&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2FJ2X7HAAACAAJ&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=Isaac+Asimov&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=3.0&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fbooks.google.com%2Fbooks%2Fabout%2FNeanche_gli_dei.html%3Fhl%3D%26id%3DJ2X7HAAACAAJ&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=preview-1.0.0&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3DJ2X7HAAACAAJ%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3DJ2X7HAAACAAJ%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=8804406836&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9788804406839&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3DJ2X7HAAACAAJ%26dq%3Dneanche%2Bgli%2Bdei%26hl%3D%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=336&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3DJ2X7HAAACAAJ%26dq%3Dneanche%2Bgli%2Bdei%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=1995&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=3&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Neanche+gli+dei&book%5Blist_type%5D=1" for 192.168.1.249 at 2018-06-12 07:54:34 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"EA0/ek9Dh6J8PGZ2lOzjG8rRqjD3xzHs2XxozZT/Lb3FxlWWs0p2h0yN5t7l7ax5oOOJwljoIwCL88yxdIpFQg==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"NONE", "country"=>"IT", "embeddable"=>"false", "epub"=>{"isAvailable"=>"false"}, "pdf"=>{"isAvailable"=>"false"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"NO_PAGES", "webReaderLink"=>"http://play.google.com/books/reader?id=J2X7HAAACAAJ&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"IgDKT069634", "id"=>"J2X7HAAACAAJ", "kind"=>"books#volume", "saleInfo"=>{"country"=>"IT", "isEbook"=>"false", "saleability"=>"NOT_FOR_SALE"}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/J2X7HAAACAAJ", "volumeInfo"=>{"allowAnonLogging"=>"false", "authors"=>["Isaac Asimov"], "averageRating"=>"3.0", "canonicalVolumeLink"=>"https://books.google.com/books/about/Neanche_gli_dei.html?hl=&id=J2X7HAAACAAJ", "categories"=>["Fiction"], "contentVersion"=>"preview-1.0.0", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=J2X7HAAACAAJ&printsec=frontcover&img=1&zoom=5&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=J2X7HAAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"8804406836", "type"=>"ISBN_10"}, {"identifier"=>"9788804406839", "type"=>"ISBN_13"}], "infoLink"=>"http://books.google.it/books?id=J2X7HAAACAAJ&dq=neanche+gli+dei&hl=&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"336", "previewLink"=>"http://books.google.it/books?id=J2X7HAAACAAJ&dq=neanche+gli+dei&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"1995", "ratingsCount"=>"3", "readingModes"=>{"image"=>"false", "text"=>"false"}, "title"=>"Neanche gli dei"}}, "list_type"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 2], ["google_id", "J2X7HAAACAAJ"], ["list_type", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (27.5ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 1], ["book_title", "Neanche gli dei"], ["book_authors", "[\"Isaac Asimov\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=J2X7HAAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"], ["publisher", "not specified"], ["identifier", "[\"ISBN_10\", \"8804406836\"]"], ["user_id", 2], ["created_at", "2018-06-12 05:54:34.157582"], ["updated_at", "2018-06-12 05:54:34.157582"], ["google_id", "J2X7HAAACAAJ"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://192.168.1.85:3000/users/profile/2
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: 94c41bfb-0e32-48fb-9c69-88f2db133105) to Async(default) with arguments: #<GlobalID:0x00007ff9368dbf80 @uri=#<URI::GID gid://flealibrary/Ad/5>>
Completed 302 Found in 124ms (ActiveRecord: 32.2ms)


Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:54:34 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mAd Load (2.6ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [94c41bfb-0e32-48fb-9c69-88f2db133105] Performing CreateNotificationsJob (Job ID: 94c41bfb-0e32-48fb-9c69-88f2db133105) from Async(default) with arguments: #<GlobalID:0x00007ff93650f3c0 @uri=#<URI::GID gid://flealibrary/Ad/5>>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [94c41bfb-0e32-48fb-9c69-88f2db133105]   [1m[36mAd Load (1.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'neanche gli dei' AND id != 5)[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [94c41bfb-0e32-48fb-9c69-88f2db133105] Performed CreateNotificationsJob (Job ID: 94c41bfb-0e32-48fb-9c69-88f2db133105) from Async(default) in 2.86ms
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  Rendered home/_chat.html.erb (1.6ms)
  Rendered home/_chats_index.html.erb (0.5ms)
  Rendered home/profile.html.erb within layouts/application (9.1ms)
Completed 200 OK in 50ms (Views: 40.9ms | ActiveRecord: 1.8ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:54:34 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:54:34 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:54:34 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/profile/gift_list?id=2&list_type=1" for 192.168.1.249 at 2018-06-12 07:54:36 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#gift as HTML
  Parameters: {"id"=>"2", "list_type"=>"1"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering ads/gift.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 2], ["list_type", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.3ms)
  Rendered ads/gift.html.erb within layouts/application (6.6ms)
Completed 200 OK in 49ms (Views: 40.6ms | ActiveRecord: 2.7ms)


Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:54:39 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  Rendered home/_chat.html.erb (1.5ms)
  Rendered home/_chats_index.html.erb (0.6ms)
  Rendered home/profile.html.erb within layouts/application (8.8ms)
Completed 200 OK in 57ms (Views: 49.3ms | ActiveRecord: 1.3ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:54:39 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:54:39 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:54:39 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:55:50 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=giorgio&commit=Search" for 192.168.1.89 at 2018-06-12 07:55:51 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["giorgio"], "commit"=>"Search"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%giorgio%')[0m
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%giorgio%')[0m
  Rendered home/users_list.html.erb within layouts/application (2.4ms)
Completed 200 OK in 43ms (Views: 35.0ms | ActiveRecord: 1.9ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:55:51 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:55:51 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:55:54 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  Rendered home/_chat.html.erb (1.6ms)
  Rendered home/_chats_index.html.erb (0.6ms)
  Rendered home/profile.html.erb within layouts/application (8.6ms)
Completed 200 OK in 63ms (Views: 55.6ms | ActiveRecord: 1.6ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:55:54 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:55:55 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:55:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started POST "/create_chat" for 192.168.1.89 at 2018-06-12 07:56:00 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (10.3ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 05:56:00.213617"], ["updated_at", "2018-06-12 05:56:00.213617"], ["owner_id", 3], ["guest_id", 2]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_2: {:type=>"create_chat"}
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 12.5ms)


MailboxChannel transmitting {"type"=>"create_chat"} (via streamed from mailbox_2)
Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:56:00 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.5ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (3.1ms)
  Rendered home/profile.html.erb within layouts/application (12.4ms)
Completed 200 OK in 61ms (Views: 52.5ms | ActiveRecord: 2.4ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:56:00 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:56:00 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:56:00 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:56:48 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=giorgio&commit=Search" for 192.168.1.89 at 2018-06-12 07:56:48 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["giorgio"], "commit"=>"Search"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%giorgio%')[0m
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%giorgio%')[0m
  Rendered home/users_list.html.erb within layouts/application (2.7ms)
Completed 200 OK in 50ms (Views: 42.2ms | ActiveRecord: 1.7ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:56:49 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:56:49 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:56:53 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/" for 192.168.1.89 at 2018-06-12 07:56:53 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.9ms)
  Rendered home/welcome.html.erb within layouts/application (6.6ms)
Completed 200 OK in 645ms (Views: 53.5ms | ActiveRecord: 2.2ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:56:54 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:56:54 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:56:55 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/users/profile/3" for 192.168.1.89 at 2018-06-12 07:56:55 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.6ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.7ms)
  Rendered home/profile.html.erb within layouts/application (14.9ms)
Completed 200 OK in 58ms (Views: 49.2ms | ActiveRecord: 3.1ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:56:56 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:56:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/profile/wish_list?id=3&list_type=0" for 192.168.1.89 at 2018-06-12 07:57:02 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"3", "list_type"=>"0"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 0]]
  Rendered _ads_list.html.erb (8.8ms)
  Rendered ads/wish.html.erb within layouts/application (11.0ms)
Completed 200 OK in 55ms (Views: 48.4ms | ActiveRecord: 1.2ms)


Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:57:05 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/users/profile/3" for 192.168.1.89 at 2018-06-12 07:57:05 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.1ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.4ms)
  Rendered home/profile.html.erb within layouts/application (13.8ms)
Completed 200 OK in 55ms (Views: 44.9ms | ActiveRecord: 2.8ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:57:06 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:57:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:57:12 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=neanche+gli+dei&commit=Search" for 192.168.1.89 at 2018-06-12 07:57:12 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["neanche gli dei"], "commit"=>"Search"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (52.5ms)
Completed 200 OK in 711ms (Views: 94.8ms | ActiveRecord: 0.6ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:57:14 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:57:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/profile/wish_list?id=2&list_type=0" for 192.168.1.249 at 2018-06-12 07:57:23 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"2", "list_type"=>"0"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 2], ["list_type", 0]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (5.5ms)
  Rendered ads/wish.html.erb within layouts/application (7.8ms)
Completed 200 OK in 98ms (Views: 90.3ms | ActiveRecord: 1.8ms)


Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:57:25 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (4.6ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.5ms)
  Rendered home/profile.html.erb within layouts/application (17.2ms)
Completed 200 OK in 100ms (Views: 90.4ms | ActiveRecord: 2.4ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:57:25 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:57:25 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:57:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:57:28 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=NONE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=NO_PAGES&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3DJ2X7HAAACAAJ%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=IgDKT069634&book%5Bid%5D%5Bid%5D=J2X7HAAACAAJ&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=false&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=NOT_FOR_SALE&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2FJ2X7HAAACAAJ&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=Isaac+Asimov&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=3.0&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fbooks.google.com%2Fbooks%2Fabout%2FNeanche_gli_dei.html%3Fhl%3D%26id%3DJ2X7HAAACAAJ&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=preview-1.0.0&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3DJ2X7HAAACAAJ%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3DJ2X7HAAACAAJ%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=8804406836&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9788804406839&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3DJ2X7HAAACAAJ%26dq%3Dneanche%2Bgli%2Bdei%26hl%3D%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=336&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3DJ2X7HAAACAAJ%26dq%3Dneanche%2Bgli%2Bdei%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=1995&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=3&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Neanche+gli+dei&book%5Blist_type%5D=1" for 192.168.1.89 at 2018-06-12 07:57:28 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"TUzIL/QnuiR0Z6WVZaPQi6+z7IOGcffIhGLXgP+jxtgVd5efigceGqLX9hF4YwG/gJfmWHThGburNFqQsqCwbA==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"NONE", "country"=>"IT", "embeddable"=>"false", "epub"=>{"isAvailable"=>"false"}, "pdf"=>{"isAvailable"=>"false"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"NO_PAGES", "webReaderLink"=>"http://play.google.com/books/reader?id=J2X7HAAACAAJ&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"IgDKT069634", "id"=>"J2X7HAAACAAJ", "kind"=>"books#volume", "saleInfo"=>{"country"=>"IT", "isEbook"=>"false", "saleability"=>"NOT_FOR_SALE"}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/J2X7HAAACAAJ", "volumeInfo"=>{"allowAnonLogging"=>"false", "authors"=>["Isaac Asimov"], "averageRating"=>"3.0", "canonicalVolumeLink"=>"https://books.google.com/books/about/Neanche_gli_dei.html?hl=&id=J2X7HAAACAAJ", "categories"=>["Fiction"], "contentVersion"=>"preview-1.0.0", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=J2X7HAAACAAJ&printsec=frontcover&img=1&zoom=5&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=J2X7HAAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"8804406836", "type"=>"ISBN_10"}, {"identifier"=>"9788804406839", "type"=>"ISBN_13"}], "infoLink"=>"http://books.google.it/books?id=J2X7HAAACAAJ&dq=neanche+gli+dei&hl=&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"336", "previewLink"=>"http://books.google.it/books?id=J2X7HAAACAAJ&dq=neanche+gli+dei&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"1995", "ratingsCount"=>"3", "readingModes"=>{"image"=>"false", "text"=>"false"}, "title"=>"Neanche gli dei"}}, "list_type"=>"1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 3], ["google_id", "J2X7HAAACAAJ"], ["list_type", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 1], ["book_title", "Neanche gli dei"], ["book_authors", "[\"Isaac Asimov\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=J2X7HAAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"], ["publisher", "not specified"], ["identifier", "[\"ISBN_10\", \"8804406836\"]"], ["user_id", 3], ["created_at", "2018-06-12 05:57:28.239683"], ["updated_at", "2018-06-12 05:57:28.239683"], ["google_id", "J2X7HAAACAAJ"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://192.168.1.85:3000/users/profile/3
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: 1c6254d7-2a04-43ca-9e9b-35bd91d590d6) to Async(default) with arguments: #<GlobalID:0x00007ff930cf0540 @uri=#<URI::GID gid://flealibrary/Ad/6>>
Completed 302 Found in 30ms (ActiveRecord: 11.9ms)


  [1m[36mAd Load (1.1ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [1c6254d7-2a04-43ca-9e9b-35bd91d590d6] Performing CreateNotificationsJob (Job ID: 1c6254d7-2a04-43ca-9e9b-35bd91d590d6) from Async(default) with arguments: #<GlobalID:0x00007ff934ea37a8 @uri=#<URI::GID gid://flealibrary/Ad/6>>
[ActiveJob] [CreateNotificationsJob] [1c6254d7-2a04-43ca-9e9b-35bd91d590d6]   [1m[36mAd Load (0.9ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'neanche gli dei' AND id != 6)[0m
[ActiveJob] [CreateNotificationsJob] [1c6254d7-2a04-43ca-9e9b-35bd91d590d6] Performed CreateNotificationsJob (Job ID: 1c6254d7-2a04-43ca-9e9b-35bd91d590d6) from Async(default) in 2.49ms
Started GET "/users/profile/3" for 192.168.1.89 at 2018-06-12 07:57:28 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.2ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.7ms)
  Rendered home/profile.html.erb within layouts/application (13.9ms)
Completed 200 OK in 61ms (Views: 52.5ms | ActiveRecord: 2.8ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:57:29 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:57:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/profile/gift_list?id=3&list_type=1" for 192.168.1.89 at 2018-06-12 07:57:40 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#gift as HTML
  Parameters: {"id"=>"3", "list_type"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/gift.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.0ms)
  Rendered ads/gift.html.erb within layouts/application (6.2ms)
Completed 200 OK in 56ms (Views: 48.2ms | ActiveRecord: 1.6ms)


Started GET "/profile/gift_list?id=2&list_type=1" for 192.168.1.249 at 2018-06-12 07:57:50 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#gift as HTML
  Parameters: {"id"=>"2", "list_type"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering ads/gift.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 2], ["list_type", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.6ms)
  Rendered ads/gift.html.erb within layouts/application (5.9ms)
Completed 200 OK in 53ms (Views: 46.9ms | ActiveRecord: 1.3ms)


Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:57:51 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.4ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (3.6ms)
  Rendered home/profile.html.erb within layouts/application (13.9ms)
Completed 200 OK in 66ms (Views: 58.4ms | ActiveRecord: 2.1ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:57:51 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:57:51 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:57:51 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/profile/wish_list?id=2&list_type=0" for 192.168.1.249 at 2018-06-12 07:57:52 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"2", "list_type"=>"0"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 2], ["list_type", 0]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.6ms)
  Rendered ads/wish.html.erb within layouts/application (5.7ms)
Completed 200 OK in 63ms (Views: 56.3ms | ActiveRecord: 1.4ms)


Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:57:55 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.4ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (3.2ms)
  Rendered home/profile.html.erb within layouts/application (12.7ms)
Completed 200 OK in 62ms (Views: 53.7ms | ActiveRecord: 2.4ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:57:55 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:57:55 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:57:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:58:00 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/users/profile/3" for 192.168.1.89 at 2018-06-12 07:58:00 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.5ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.8ms)
  Rendered home/profile.html.erb within layouts/application (14.6ms)
Completed 200 OK in 60ms (Views: 51.9ms | ActiveRecord: 2.7ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:58:00 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:58:00 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/profile/wish_list?id=3&list_type=0" for 192.168.1.89 at 2018-06-12 07:58:04 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"3", "list_type"=>"0"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 0]]
  Rendered _ads_list.html.erb (2.1ms)
  Rendered ads/wish.html.erb within layouts/application (4.4ms)
Completed 200 OK in 51ms (Views: 43.7ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:58:06 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/users/profile/3" for 192.168.1.89 at 2018-06-12 07:58:06 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.2ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (5.1ms)
  Rendered home/profile.html.erb within layouts/application (14.7ms)
Completed 200 OK in 67ms (Views: 57.3ms | ActiveRecord: 2.9ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:58:07 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:58:07 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/profile/gift_list?id=3&list_type=1" for 192.168.1.89 at 2018-06-12 07:58:10 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#gift as HTML
  Parameters: {"id"=>"3", "list_type"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/gift.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.7ms)
  Rendered ads/gift.html.erb within layouts/application (6.0ms)
Completed 200 OK in 53ms (Views: 46.0ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:58:13 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/users/profile/3" for 192.168.1.89 at 2018-06-12 07:58:13 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.3ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (5.0ms)
  Rendered home/profile.html.erb within layouts/application (14.2ms)
Completed 200 OK in 58ms (Views: 48.7ms | ActiveRecord: 3.0ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:58:14 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:58:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:58:27 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=la+fine+dell%27eternit%C3%A0&commit=Search" for 192.168.1.89 at 2018-06-12 07:58:27 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["la fine dell'eternitÃ "], "commit"=>"Search"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (35.0ms)
Completed 200 OK in 797ms (Views: 82.7ms | ActiveRecord: 0.7ms)


Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:58:29 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:58:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/profile/wish_list?id=2&list_type=0" for 192.168.1.249 at 2018-06-12 07:58:36 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"2", "list_type"=>"0"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 2], ["list_type", 0]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.5ms)
  Rendered ads/wish.html.erb within layouts/application (5.6ms)
Completed 200 OK in 44ms (Views: 37.5ms | ActiveRecord: 1.4ms)


Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:58:38 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.6ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (2.8ms)
  Rendered home/profile.html.erb within layouts/application (12.4ms)
Completed 200 OK in 68ms (Views: 59.5ms | ActiveRecord: 2.3ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:58:38 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:58:38 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:58:38 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:58:42 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=NONE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=NO_PAGES&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3DGL2pAAAACAAJ%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=sSqNp%2Fa%2F078&book%5Bid%5D%5Bid%5D=GL2pAAAACAAJ&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=false&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=NOT_FOR_SALE&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2FGL2pAAAACAAJ&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=Isaac+Asimov&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.5&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fbooks.google.com%2Fbooks%2Fabout%2FLa_fine_dell_eternit%25C3%25A0.html%3Fhl%3D%26id%3DGL2pAAAACAAJ&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=preview-1.0.0&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3DGL2pAAAACAAJ%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3DGL2pAAAACAAJ%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=8804414510&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9788804414513&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3DGL2pAAAACAAJ%26dq%3Dla%2Bfine%2Bdell%2527eternit%25C3%25A0%26hl%3D%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=238&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsEpubBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsImageBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3DGL2pAAAACAAJ%26dq%3Dla%2Bfine%2Bdell%2527eternit%25C3%25A0%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=1996&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Oscar+bestsellers&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=4&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=La+fine+dell%27eternit%C3%A0&book%5Blist_type%5D=1" for 192.168.1.89 at 2018-06-12 07:58:42 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"eWPrjSivo2ZkuWlwA5LoWczll+/ktf5lgygQl7VSKAUhWLQ9Vo8HWLIJOvQeUjlt48GdNBYlEBasfp2H+FFesQ==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"NONE", "country"=>"IT", "embeddable"=>"false", "epub"=>{"isAvailable"=>"false"}, "pdf"=>{"isAvailable"=>"false"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"NO_PAGES", "webReaderLink"=>"http://play.google.com/books/reader?id=GL2pAAAACAAJ&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"sSqNp/a/078", "id"=>"GL2pAAAACAAJ", "kind"=>"books#volume", "saleInfo"=>{"country"=>"IT", "isEbook"=>"false", "saleability"=>"NOT_FOR_SALE"}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/GL2pAAAACAAJ", "volumeInfo"=>{"allowAnonLogging"=>"false", "authors"=>["Isaac Asimov"], "averageRating"=>"4.5", "canonicalVolumeLink"=>"https://books.google.com/books/about/La_fine_dell_eternit%C3%A0.html?hl=&id=GL2pAAAACAAJ", "categories"=>["Fiction"], "contentVersion"=>"preview-1.0.0", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=GL2pAAAACAAJ&printsec=frontcover&img=1&zoom=5&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=GL2pAAAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"8804414510", "type"=>"ISBN_10"}, {"identifier"=>"9788804414513", "type"=>"ISBN_13"}], "infoLink"=>"http://books.google.it/books?id=GL2pAAAACAAJ&dq=la+fine+dell%27eternit%C3%A0&hl=&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"238", "panelizationSummary"=>{"containsEpubBubbles"=>"false", "containsImageBubbles"=>"false"}, "previewLink"=>"http://books.google.it/books?id=GL2pAAAACAAJ&dq=la+fine+dell%27eternit%C3%A0&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"1996", "publisher"=>"Oscar bestsellers", "ratingsCount"=>"4", "readingModes"=>{"image"=>"false", "text"=>"false"}, "title"=>"La fine dell'eternitÃ "}}, "list_type"=>"1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 3], ["google_id", "GL2pAAAACAAJ"], ["list_type", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (9.3ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 1], ["book_title", "La fine dell'eternitÃ "], ["book_authors", "[\"Isaac Asimov\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=GL2pAAAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"], ["publisher", "Oscar bestsellers"], ["identifier", "[\"ISBN_10\", \"8804414510\"]"], ["user_id", 3], ["created_at", "2018-06-12 05:58:42.461308"], ["updated_at", "2018-06-12 05:58:42.461308"], ["google_id", "GL2pAAAACAAJ"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://192.168.1.85:3000/users/profile/3
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: 363dcdd7-b19f-405c-80ec-4f7c9238e6d0) to Async(default) with arguments: #<GlobalID:0x00007ff930356ca0 @uri=#<URI::GID gid://flealibrary/Ad/7>>
Completed 302 Found in 30ms (ActiveRecord: 12.0ms)


  [1m[36mAd Load (1.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0] Performing CreateNotificationsJob (Job ID: 363dcdd7-b19f-405c-80ec-4f7c9238e6d0) from Async(default) with arguments: #<GlobalID:0x00007ff9301d6268 @uri=#<URI::GID gid://flealibrary/Ad/7>>
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'la fine dell''eternitÃ ' AND id != 7)[0m
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Started GET "/users/profile/3" for 192.168.1.89 at 2018-06-12 07:58:42 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[35mSQL (5.1ms)[0m  [1m[32mINSERT INTO "notifications" ("created_at", "updated_at", "user_id", "ad_id", "displayed") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 05:58:42.510086"], ["updated_at", "2018-06-12 05:58:42.510086"], ["user_id", 3], ["ad_id", 4], ["displayed", 0]]
  Rendering home/profile.html.erb within layouts/application
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (1.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (5.5ms)
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[35mSQL (3.7ms)[0m  [1m[32mINSERT INTO "notifications" ("created_at", "updated_at", "user_id", "ad_id", "displayed") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 05:58:42.531190"], ["updated_at", "2018-06-12 05:58:42.531190"], ["user_id", 2], ["ad_id", 7], ["displayed", 0]]
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (7.6ms)
  Rendered home/profile.html.erb within layouts/application (22.6ms)
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[36mUser Exists (11.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[35mSQL (1.5ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 1], ["updated_at", "2018-06-12 05:58:42.561034"], ["id", 3]]
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[35m (9.3ms)[0m  [1m[35mBEGIN[0m
Completed 200 OK in 78ms (Views: 65.6ms | ActiveRecord: 5.2ms)


[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 1], ["updated_at", "2018-06-12 05:58:42.596684"], ["id", 2]]
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0]   [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0] [ActionCable] Broadcasting to mailbox_3: {:type=>"new_notification"}
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0] [ActionCable] Broadcasting to mailbox_2: {:type=>"new_notification"}
[ActiveJob] [CreateNotificationsJob] [363dcdd7-b19f-405c-80ec-4f7c9238e6d0] Performed CreateNotificationsJob (Job ID: 363dcdd7-b19f-405c-80ec-4f7c9238e6d0) from Async(default) in 120.97ms
MailboxChannel transmitting {"type"=>"new_notification"} (via streamed from mailbox_2)
Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 07:58:42 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.6ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (3.1ms)
  Rendered home/profile.html.erb within layouts/application (13.0ms)
Completed 200 OK in 66ms (Views: 56.0ms | ActiveRecord: 2.4ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:58:42 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 07:58:42 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 07:58:42 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/cable" for 192.168.1.89 at 2018-06-12 07:58:43 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 07:58:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started POST "/send_message" for 192.168.1.89 at 2018-06-12 07:59:07 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"ciao giorgione"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 05:59:07.778592"], ["updated_at", "2018-06-12 05:59:07.778592"], ["text", "ciao giorgione"], ["chat_id", 3]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_2: {:type=>"message", :chat_id=>3, :text=>"ciao giorgione"}
Completed 200 OK in 30ms (Views: 0.2ms | ActiveRecord: 14.4ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"ciao giorgione"} (via streamed from mailbox_2)
Started POST "/send_message" for 192.168.1.249 at 2018-06-12 07:59:19 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"ciao vincenzone"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 05:59:19.455689"], ["updated_at", "2018-06-12 05:59:19.455689"], ["text", "ciao vincenzone"], ["from", 1], ["chat_id", 3]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"ciao vincenzone"}
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 12.5ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"ciao vincenzone"} (via streamed from mailbox_3)
Started POST "/send_message" for 192.168.1.249 at 2018-06-12 07:59:23 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"come va?"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 05:59:23.742291"], ["updated_at", "2018-06-12 05:59:23.742291"], ["text", "come va?"], ["from", 1], ["chat_id", 3]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"come va?"}
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 12.2ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"come va?"} (via streamed from mailbox_3)
Started POST "/send_message" for 192.168.1.249 at 2018-06-12 07:59:30 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"ti piace questa app?"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 05:59:30.190169"], ["updated_at", "2018-06-12 05:59:30.190169"], ["text", "ti piace questa app?"], ["from", 1], ["chat_id", 3]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"ti piace questa app?"}
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 12.3ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"ti piace questa app?"} (via streamed from mailbox_3)
Started POST "/send_message" for 192.168.1.89 at 2018-06-12 07:59:38 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"si sembra fatta bene"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 05:59:38.180633"], ["updated_at", "2018-06-12 05:59:38.180633"], ["text", "si sembra fatta bene"], ["chat_id", 3]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_2: {:type=>"message", :chat_id=>3, :text=>"si sembra fatta bene"}
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 12.4ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"si sembra fatta bene"} (via streamed from mailbox_2)
Started POST "/send_message" for 192.168.1.89 at 2018-06-12 07:59:44 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"la chat Ã¨ fantastica"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 05:59:44.625146"], ["updated_at", "2018-06-12 05:59:44.625146"], ["text", "la chat Ã¨ fantastica"], ["chat_id", 3]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_2: {:type=>"message", :chat_id=>3, :text=>"la chat Ã¨ fantastica"}
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 12.1ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"la chat Ã¨ fantastica"} (via streamed from mailbox_2)
Started POST "/send_message" for 192.168.1.89 at 2018-06-12 07:59:51 +0200
Cannot render console from 192.168.1.89! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"nooo scorre anche da sola"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 05:59:51.433283"], ["updated_at", "2018-06-12 05:59:51.433283"], ["text", "nooo scorre anche da sola"], ["chat_id", 3]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_2: {:type=>"message", :chat_id=>3, :text=>"nooo scorre anche da sola"}
MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"nooo scorre anche da sola"} (via streamed from mailbox_2)
Completed 200 OK in 27ms (Views: 0.5ms | ActiveRecord: 12.1ms)


Started POST "/send_message" for 192.168.1.249 at 2018-06-12 07:59:56 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"eh gia"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 05:59:56.608258"], ["updated_at", "2018-06-12 05:59:56.608258"], ["text", "eh gia"], ["from", 1], ["chat_id", 3]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"eh gia"}
Completed 200 OK in 25ms (Views: 0.3ms | ActiveRecord: 11.8ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"eh gia"} (via streamed from mailbox_3)
Started GET "/notifications" for 192.168.1.249 at 2018-06-12 08:00:05 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by NotificationsController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mNotification Load (0.4ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."user_id" = $1[0m  [["user_id", 2]]
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "notifications" SET "displayed" = $1, "updated_at" = $2 WHERE "notifications"."id" = $3[0m  [["displayed", 1], ["updated_at", "2018-06-12 06:00:05.526417"], ["id", 4]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 0], ["updated_at", "2018-06-12 06:00:05.545313"], ["id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  Rendering notifications/index.html.erb within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.1ms)
  Rendered _ads_list.html.erb (0.0ms)
  Rendered notifications/index.html.erb within layouts/application (7.2ms)
Completed 200 OK in 83ms (Views: 45.8ms | ActiveRecord: 11.0ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 08:00:05 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 08:00:05 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 08:00:05 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/notifications" for 192.168.1.249 at 2018-06-12 08:00:09 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by NotificationsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mNotification Load (0.9ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."user_id" = $1[0m  [["user_id", 2]]
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  Rendering notifications/index.html.erb within layouts/application
  Rendered _ads_list.html.erb (0.9ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.9ms)
  Rendered notifications/index.html.erb within layouts/application (6.4ms)
Completed 200 OK in 73ms (Views: 54.1ms | ActiveRecord: 3.3ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 08:00:09 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 192.168.1.249 at 2018-06-12 08:00:09 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 08:00:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/2" for 192.168.1.249 at 2018-06-12 08:00:10 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.4ms)
  Rendered home/_chats_index.html.erb (1.2ms)
  Rendered home/profile.html.erb within layouts/application (15.2ms)
Completed 200 OK in 64ms (Views: 55.2ms | ActiveRecord: 2.8ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 08:00:10 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 192.168.1.249 at 2018-06-12 08:00:10 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 08:00:10 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/admin_panel" for 192.168.1.249 at 2018-06-12 08:00:16 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/admin_panel.html.erb within layouts/application (11.7ms)
Completed 200 OK in 72ms (Views: 56.9ms | ActiveRecord: 1.5ms)


Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 08:00:16 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 192.168.1.249 at 2018-06-12 08:00:17 +0200
Cannot render console from 192.168.1.249! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255
Started GET "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 08:00:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 192.168.1.249 at 2018-06-12 08:00:41 +0200
MailboxChannel stopped streaming from mailbox_
Finished "/cable/" [WebSocket] for 192.168.1.89 at 2018-06-12 08:00:51 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/" for 127.0.0.1 at 2018-06-12 09:49:25 +0200
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (3.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (66.4ms)
  Rendered home/welcome.html.erb within layouts/application (75.5ms)
Completed 200 OK in 1189ms (Views: 1141.5ms | ActiveRecord: 24.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 09:49:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 09:49:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 09:49:29 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (19.6ms)
Completed 200 OK in 69ms (Views: 66.1ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 09:49:29 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 09:49:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 09:49:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 09:49:33 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"/RSDmutvUF6pqdyevb38w3RVkTuqvXzKJbNEfr2kzRkik/H6cqjsdr9UQhK5SvAP9Ncn0BSNaXtTmWzpu0rI2w==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-12 07:49:33.615137"], ["last_sign_in_at", "2018-06-11 16:20:53.491187"], ["sign_in_count", 4], ["updated_at", "2018-06-12 07:49:33.616614"], ["id", 4]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/4
Completed 302 Found in 171ms (ActiveRecord: 4.9ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 09:49:33 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (2.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (1.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (55.1ms)
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (63.7ms)
Completed 200 OK in 109ms (Views: 83.5ms | ActiveRecord: 16.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 09:49:33 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 09:49:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 09:49:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 09:49:35 +0200
Processing by HomeController#admin_panel as HTML
Started GET "/" for 127.0.0.1 at 2018-06-12 09:49:35 +0200
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Processing by HomeController#welcome as HTML
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/admin_panel.html.erb within layouts/application (6.3ms)
  [1m[36mUser Load (11.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (1.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (5.2ms)
  Rendered home/welcome.html.erb within layouts/application (8.9ms)
Completed 200 OK in 105ms (Views: 95.2ms | ActiveRecord: 2.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 09:49:36 +0200
MailboxChannel stopped streaming from mailbox_4
Completed 200 OK in 132ms (Views: 82.0ms | ActiveRecord: 29.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 09:49:36 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 09:49:36 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 09:49:55 +0200
Processing by HomeController#admin_panel as HTML
Started GET "/" for 127.0.0.1 at 2018-06-12 09:49:55 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (5.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (7.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendering home/welcome.html.erb within layouts/application
  Rendered home/admin_panel.html.erb within layouts/application (10.7ms)
  [1m[36mAd Load (0.8ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.9ms)
  Rendered home/welcome.html.erb within layouts/application (9.3ms)
Completed 200 OK in 93ms (Views: 78.3ms | ActiveRecord: 9.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 09:49:56 +0200
Completed 200 OK in 99ms (Views: 78.2ms | ActiveRecord: 11.2ms)


MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 09:49:56 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 09:49:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 11:43:54 +0200
  [1m[35m (23.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (34.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (113.2ms)
  Rendered home/welcome.html.erb within layouts/application (122.0ms)
Completed 200 OK in 782ms (Views: 708.9ms | ActiveRecord: 46.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 11:43:56 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 11:43:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 11:44:13 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 11:44:13 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  Rendered home/welcome.html.erb within layouts/application (186.8ms)
Completed 500 Internal Server Error in 191ms (ActiveRecord: 0.5ms)


  
ActionView::Template::Error (undefined method `assert' for #<#<Class:0x00000006fce5f8>:0x00000003b00fd8>
Did you mean?  asset_url
               asset_path
               assets_prefix
               assets_prefix?
               assets_prefix=
               alert):
    1: <div class="home-container center" id="homepage">
    2: 
    3: 	<div class="col-md-6">
    4: 		<%= assert(false)%>
    5: 		<%= form_tag(ads_list_path, :method => "get", id: "search-form", class: "form-group") do %>
    6: 		<%= text_field :search, params[:search], placeholder: "Search Ads" %>
    7: 		<%= submit_tag "Search" %>
  
app/views/home/welcome.html.erb:4:in `_app_views_home_welcome_html_erb__4192305151522257466_30871980'
Started GET "/" for 127.0.0.1 at 2018-06-12 11:45:16 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  Rendered home/welcome.html.erb within layouts/application (201.1ms)
Completed 500 Internal Server Error in 216ms (ActiveRecord: 6.4ms)


  
ActionView::Template::Error (undefined method `assert' for #<#<Class:0x007f06307c5730>:0x007f06320d76b0>
Did you mean?  asset_url
               asset_path
               assets_prefix
               assets_prefix?
               assets_prefix=
               alert):
    1: <div class="home-container center" id="homepage">
    2: 
    3: 	<div class="col-md-6">
    4: 		<%= assert(false)%>
    5: 		<%= form_tag(ads_list_path, :method => "get", id: "search-form", class: "form-group") do %>
    6: 		<%= text_field :search, params[:search], placeholder: "Search Ads" %>
    7: 		<%= submit_tag "Search" %>
  
app/views/home/welcome.html.erb:4:in `_app_views_home_welcome_html_erb__4192305151522257466_69832279994620'
Started GET "/" for 127.0.0.1 at 2018-06-12 11:45:39 +0200
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (1.9ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  Rendered home/welcome.html.erb within layouts/application (203.4ms)
Completed 500 Internal Server Error in 234ms (ActiveRecord: 9.3ms)


  
ActionView::Template::Error (undefined method `assert' for #<#<Class:0x007f1b3472ab18>:0x00000005e31b88>
Did you mean?  asset_url
               asset_path
               assets_prefix
               assets_prefix?
               assets_prefix=
               alert):
    1: <div class="home-container center" id="homepage">
    2: 
    3: 	<div class="col-md-6">
    4: 		<%= assert(false)%>
    5: 		<%= form_tag(ads_list_path, :method => "get", id: "search-form", class: "form-group") do %>
    6: 		<%= text_field :search, params[:search], placeholder: "Search Ads" %>
    7: 		<%= submit_tag "Search" %>
  
app/views/home/welcome.html.erb:4:in `_app_views_home_welcome_html_erb__4403708542217903386_69877410389140'
Started GET "/" for 127.0.0.1 at 2018-06-12 11:45:44 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (1.1ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  Rendered home/welcome.html.erb within layouts/application (174.0ms)
Completed 500 Internal Server Error in 180ms (ActiveRecord: 1.2ms)


  
ActionView::Template::Error (undefined method `assert' for #<#<Class:0x007f1b3472ab18>:0x0000000412ebf8>
Did you mean?  asset_url
               asset_path
               assets_prefix
               assets_prefix?
               assets_prefix=
               alert):
    1: <div class="home-container center" id="homepage">
    2: 
    3: 	<div class="col-md-6">
    4: 		<%= assert(false)%>
    5: 		<%= form_tag(ads_list_path, :method => "get", id: "search-form", class: "form-group") do %>
    6: 		<%= text_field :search, params[:search], placeholder: "Search Ads" %>
    7: 		<%= submit_tag "Search" %>
  
app/views/home/welcome.html.erb:4:in `_app_views_home_welcome_html_erb__4403708542217903386_34217020'
Started GET "/" for 127.0.0.1 at 2018-06-12 11:45:46 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  Rendered home/welcome.html.erb within layouts/application (157.4ms)
Completed 500 Internal Server Error in 162ms (ActiveRecord: 0.7ms)


  
ActionView::Template::Error (undefined method `assert' for #<#<Class:0x007f1b3472ab18>:0x00000003015c18>
Did you mean?  asset_url
               asset_path
               assets_prefix
               assets_prefix?
               assets_prefix=
               alert):
    1: <div class="home-container center" id="homepage">
    2: 
    3: 	<div class="col-md-6">
    4: 		<%= assert(false)%>
    5: 		<%= form_tag(ads_list_path, :method => "get", id: "search-form", class: "form-group") do %>
    6: 		<%= text_field :search, params[:search], placeholder: "Search Ads" %>
    7: 		<%= submit_tag "Search" %>
  
app/views/home/welcome.html.erb:4:in `_app_views_home_welcome_html_erb__4403708542217903386_25213020'
Started GET "/" for 127.0.0.1 at 2018-06-12 11:47:55 +0200
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.9ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  Rendered home/welcome.html.erb within layouts/application (214.5ms)
Completed 500 Internal Server Error in 247ms (ActiveRecord: 11.2ms)


  
ActionView::Template::Error (undefined method `assert' for #<#<Class:0x007fcf84725550>:0x00000006ac03e0>
Did you mean?  asset_url
               asset_path
               assets_prefix
               assets_prefix?
               assets_prefix=
               alert):
    1: <div class="home-container center" id="homepage">
    2: 
    3: 	<div class="col-md-6">
    4: 		<%= assert(false)%>
    5: 		<%= form_tag(ads_list_path, :method => "get", id: "search-form", class: "form-group") do %>
    6: 		<%= text_field :search, params[:search], placeholder: "Search Ads" %>
    7: 		<%= submit_tag "Search" %>
  
app/views/home/welcome.html.erb:4:in `_app_views_home_welcome_html_erb___2434339395257439197_70264628523440'
Started GET "/" for 127.0.0.1 at 2018-06-12 11:49:51 +0200
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.9ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  Rendered home/welcome.html.erb within layouts/application (226.2ms)
Completed 500 Internal Server Error in 257ms (ActiveRecord: 7.5ms)


  
ActionView::Template::Error (undefined method `assert' for #<#<Class:0x007f1b008f88c0>:0x007f1b0090fae8>
Did you mean?  asset_url
               asset_path
               assets_prefix
               assets_prefix?
               assets_prefix=
               alert):
    1: <div class="home-container center" id="homepage">
    2: 
    3: 	<div class="col-md-6">
    4: 		<%= assert(false)%>
    5: 		<%= form_tag(ads_list_path, :method => "get", id: "search-form", class: "form-group") do %>
    6: 		<%= text_field :search, params[:search], placeholder: "Search Ads" %>
    7: 		<%= submit_tag "Search" %>
  
app/views/home/welcome.html.erb:4:in `_app_views_home_welcome_html_erb___162184739082674511_69876975127400'
Started GET "/" for 127.0.0.1 at 2018-06-12 13:06:16 +0200
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (1.1ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (98.1ms)
  Rendered home/welcome.html.erb within layouts/application (106.7ms)
Completed 200 OK in 476ms (Views: 430.6ms | ActiveRecord: 14.7ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:06:17 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:06:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:06:20 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:06:20 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (37.0ms)
Completed 200 OK in 147ms (Views: 144.5ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:06:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:06:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:06:26 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:06:26 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"JgdIfTTWBM9AGtQWm53/DChPS7mRfRzb54WtV6IlRZKOxt/67TncPba10Djl6ghp6kz6mc+CuCtt4v8+991I8g==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (63.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (35.0ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-12 11:06:26.646370"], ["last_sign_in_at", "2018-06-10 08:17:24.288391"], ["sign_in_count", 7], ["updated_at", "2018-06-12 11:06:26.649425"], ["id", 3]]
  [1m[35m (15.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
Completed 302 Found in 354ms (ActiveRecord: 114.3ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 13:06:26 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (35.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (29.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (188.1ms)
  Rendered home/_chats_index.html.erb (2.2ms)
  Rendered home/profile.html.erb within layouts/application (202.1ms)
Completed 200 OK in 300ms (Views: 210.7ms | ActiveRecord: 74.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:06:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:06:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:06:57 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=Dubliners&commit=Search" for 127.0.0.1 at 2018-06-12 13:06:57 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["Dubliners"], "commit"=>"Search"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (161.1ms)
Completed 200 OK in 905ms (Views: 215.5ms | ActiveRecord: 0.8ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:06:59 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:06:59 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mAd Load (39.2ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-06-12 17:13:04 +0200
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (34.4ms)
  Rendered home/welcome.html.erb within layouts/application (46.0ms)
Completed 200 OK in 529ms (Views: 445.9ms | ActiveRecord: 13.6ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 17:13:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 17:13:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-12 17:13:08 +0200
MailboxChannel is streaming from mailbox_
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 17:13:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 17:13:19 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/ads_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 17:13:19 +0200
Processing by HomeController#ads_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
  [1m[35m (110.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "ads" WHERE (book_title iLIKE'%%')[0m
  Rendering home/ads_list.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (book_title iLIKE'%%')[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (13.2ms)
  Rendered home/ads_list.html.erb within layouts/application (15.1ms)
Completed 200 OK in 206ms (Views: 90.2ms | ActiveRecord: 111.7ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 17:13:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 17:13:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 18:40:29 +0200
MailboxChannel stopped streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 18:40:30 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 18:45:13 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (39.6ms)
  Rendered home/welcome.html.erb within layouts/application (79.8ms)
Completed 200 OK in 572ms (Views: 434.3ms | ActiveRecord: 59.3ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 18:45:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 18:45:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 18:45:25 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 18:45:25 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (370.1ms)
  Rendered home/_chats_index.html.erb (2.1ms)
  Rendered home/profile.html.erb within layouts/application (398.9ms)
Completed 200 OK in 600ms (Views: 445.7ms | ActiveRecord: 13.7ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 18:45:26 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 18:45:26 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/profile/wish_list?id=3&list_type=0" for 127.0.0.1 at 2018-06-12 18:45:34 +0200
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"3", "list_type"=>"0"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (26.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 0]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (38.7ms)
  Rendered ads/wish.html.erb within layouts/application (40.9ms)
Completed 200 OK in 114ms (Views: 80.7ms | ActiveRecord: 28.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 18:46:19 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/profile/wish_list?id=3&list_type=0" for 127.0.0.1 at 2018-06-12 18:46:19 +0200
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"3", "list_type"=>"0"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (4.0ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 0]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (12.8ms)
  Rendered ads/wish.html.erb within layouts/application (14.7ms)
Completed 200 OK in 94ms (Views: 84.0ms | ActiveRecord: 5.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 18:46:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 18:46:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 19:06:53 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (8.3ms)
  Rendered home/_chats_index.html.erb (1.0ms)
  Rendered home/profile.html.erb within layouts/application (14.0ms)
Completed 200 OK in 60ms (Views: 52.5ms | ActiveRecord: 3.0ms)


Started GET "/profile/wish_list?id=3&list_type=0" for 127.0.0.1 at 2018-06-12 19:07:00 +0200
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"3", "list_type"=>"0"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 0]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (8.1ms)
  Rendered ads/wish.html.erb within layouts/application (10.2ms)
Completed 200 OK in 77ms (Views: 71.0ms | ActiveRecord: 1.6ms)


<<<<<<< HEAD
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 11]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 11]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 11]]
=======
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-11 18:35:27 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-11 18:35:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-11 18:35:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-11 18:58:06 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 10:25:45 +0200
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (17.6ms)
  Rendered home/welcome.html.erb within layouts/application (25.5ms)
Completed 200 OK in 310ms (Views: 254.4ms | ActiveRecord: 16.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 10:25:46 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 10:25:46 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 10:57:38 +0200
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (3.9ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (16.0ms)
  Rendered home/welcome.html.erb within layouts/application (26.5ms)
Completed 200 OK in 334ms (Views: 270.1ms | ActiveRecord: 19.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 10:57:39 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 10:57:39 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 10:57:41 +0200
Started GET "/" for 127.0.0.1 at 2018-06-12 10:57:41 +0200
Processing by HomeController#admin_panel as HTML
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.2ms)
  Rendered home/welcome.html.erb within layouts/application (8.2ms)
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
Completed 200 OK in 111ms (Views: 96.6ms | ActiveRecord: 5.8ms)


  Rendered home/admin_panel.html.erb within layouts/application (54.2ms)
Completed 200 OK in 150ms (Views: 93.6ms | ActiveRecord: 24.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 10:57:41 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 10:57:42 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 10:57:42 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:38:09 +0200
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:38:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:38:10 +0200
Processing by HomeController#admin_panel as HTML
Started GET "/" for 127.0.0.1 at 2018-06-12 13:38:10 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAd Load (0.9ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/admin_panel.html.erb within layouts/application (880.6ms)
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (1.1ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (9.1ms)
  Rendered home/welcome.html.erb within layouts/application (30.0ms)
Completed 200 OK in 2230ms (Views: 934.7ms | ActiveRecord: 27.4ms)


Completed 200 OK in 2259ms (Views: 2171.7ms | ActiveRecord: 47.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:38:12 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:38:12 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:38:12 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users_list/admin/2" for 127.0.0.1 at 2018-06-12 13:38:14 +0200
Processing by Users::RegistrationsController#admin_user as HTML
  Parameters: {"authenticity_token"=>"FctQo8OQ3xkS5Op91jcqJKPaH2jI2hYDfR/rwfcuLW4piOMF/FWGI7qRZXUlU2qcT+VxewSwAUulxGW6Md+Yrg==", "id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 16ms (ActiveRecord: 1.7ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:38:14 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (4.8ms)
Completed 200 OK in 48ms (Views: 42.4ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:38:14 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:38:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:38:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users_list/booklover/2" for 127.0.0.1 at 2018-06-12 13:38:16 +0200
Processing by Users::RegistrationsController#booklover_user as HTML
  Parameters: {"authenticity_token"=>"g3VP25FgeqrxcwAo0bwIMuKt6UACfPYUSqdDyV1bDV6/Nvx9rqUjkFkGjyAi2EiKDpKHU84W4VySfM2ym6q4ng==", "id"=>"2"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "role" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["role", "booklover"], ["updated_at", "2018-06-12 11:38:16.894501"], ["id", 2]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 15ms (ActiveRecord: 3.7ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:38:16 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (6.4ms)
Completed 200 OK in 49ms (Views: 43.6ms | ActiveRecord: 1.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:38:16 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:38:17 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:38:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users_list/banned/2" for 127.0.0.1 at 2018-06-12 13:38:17 +0200
Processing by Users::RegistrationsController#banned_user as HTML
  Parameters: {"authenticity_token"=>"v7i93AxZq8BDGH9SK8CphuPf0gGYPJOHIGuAiWMkHc+D+w56M5zy+utt8FrYpOk+D+C8ElRWhM/4sA7ypdWoDw==", "id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "role" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["role", "banned"], ["updated_at", "2018-06-12 11:38:17.872345"], ["id", 2]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 16ms (ActiveRecord: 3.0ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:38:17 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (5.3ms)
Completed 200 OK in 56ms (Views: 50.7ms | ActiveRecord: 1.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:38:17 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:38:17 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:38:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started DELETE "/users/2" for 127.0.0.1 at 2018-06-12 13:38:18 +0200
Processing by Users::RegistrationsController#admin_destroy_user as HTML
  Parameters: {"authenticity_token"=>"oFsuxguHeyAVAnqYLXmvqK2VfyYRvc5nJbLuljdgVHWcGJ1gNEIiGr139ZDeHe8QQaoRNd3X2S/9aWDt8ZHhtQ==", "id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (1.1ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1[0m  [["user_id", 2]]
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."user_id" = $1[0m  [["user_id", 2]]
  [1m[36mFavourite Load (0.5ms)[0m  [1m[34mSELECT "favourites".* FROM "favourites" WHERE "favourites"."user_id" = $1[0m  [["user_id", 2]]
  [1m[35mSQL (1.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 93ms (ActiveRecord: 27.1ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:38:19 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (3.7ms)
Completed 200 OK in 40ms (Views: 34.8ms | ActiveRecord: 1.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:38:19 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:38:19 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:38:19 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:38:22 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:43:31 +0200
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:43:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:43:34 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (5.7ms)
Completed 200 OK in 1064ms (Views: 1013.0ms | ActiveRecord: 10.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:43:35 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:43:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:43:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:45:54 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (4.3ms)
Completed 200 OK in 77ms (Views: 40.4ms | ActiveRecord: 7.6ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:45:54 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:45:54 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:48:35 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (5.0ms)
Completed 200 OK in 70ms (Views: 35.4ms | ActiveRecord: 8.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:48:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:48:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-12 13:48:36 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"J2ZBpabgQm5v9h8pCPEcLHAJti539R9twIF/E4UUX5kbJfIDmSUbVMeDkCH7lVyUnDbYPbufCCUYWvFoQ+XqWQ=="}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 18ms (ActiveRecord: 1.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 13:48:37 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (23.8ms)
  Rendered home/welcome.html.erb within layouts/application (31.6ms)
Completed 200 OK in 88ms (Views: 67.8ms | ActiveRecord: 7.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:48:37 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:48:37 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:48:37 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:48:46 +0200
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:48:46 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_up" for 127.0.0.1 at 2018-06-12 13:48:47 +0200
Started GET "/" for 127.0.0.1 at 2018-06-12 13:48:47 +0200
Processing by HomeController#welcome as HTML
Processing by Users::RegistrationsController#new as HTML
  Rendering users/registrations/new.html.erb within layouts/application
  Rendering home/welcome.html.erb within layouts/application
  Rendered users/registrations/new.html.erb within layouts/application (33.4ms)
  [1m[36mAd Load (1.0ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (292.3ms)
  Rendered home/welcome.html.erb within layouts/application (305.2ms)
Completed 200 OK in 484ms (Views: 437.9ms | ActiveRecord: 23.6ms)


Completed 200 OK in 531ms (Views: 252.7ms | ActiveRecord: 250.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:48:48 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:48:48 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:48:48 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:48:48 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (5.1ms)
Completed 200 OK in 61ms (Views: 57.7ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:48:49 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:48:49 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:48:49 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:48:53 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"niFAoO0YJR/d+eo2uhXUvN0dqceITaE+4gDvDKUBLn8olox9qzkKf5go2rg5Inmd2yDAHhAwZarN4yB/C5MIig==", "user"=>{"email"=>"dante@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-12 11:48:53.773656"], ["last_sign_in_at", "2018-06-12 11:35:30.956838"], ["sign_in_count", 3], ["updated_at", "2018-06-12 11:48:53.774888"], ["id", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/1
Completed 302 Found in 172ms (ActiveRecord: 4.8ms)


Started GET "/users/profile/1" for 127.0.0.1 at 2018-06-12 13:48:53 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 1 OR guest_id = 1)[0m
  Rendered home/_chat.html.erb (5.0ms)
  Rendered home/_chats_index.html.erb (0.5ms)
  Rendered home/profile.html.erb within layouts/application (13.5ms)
Completed 200 OK in 56ms (Views: 42.5ms | ActiveRecord: 4.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:48:53 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:48:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:48:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_1
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:48:56 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (4.1ms)
Completed 200 OK in 44ms (Views: 36.8ms | ActiveRecord: 1.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:48:56 +0200
MailboxChannel stopped streaming from mailbox_1
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:48:56 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:48:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:50:37 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (4.0ms)
Completed 200 OK in 41ms (Views: 34.9ms | ActiveRecord: 1.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:50:37 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:50:37 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:50:37 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-12 13:50:43 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"O61agljrIccxfCtsUrhS2jSpTbSQn7LUyViqyo3V+Q3oPSMiABK5zOUFho6Y3MPFbtNKEt51OiGkLFeEcsYaVw=="}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 10ms (ActiveRecord: 1.1ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 13:50:43 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (7.0ms)
  Rendered home/welcome.html.erb within layouts/application (9.8ms)
Completed 200 OK in 52ms (Views: 47.3ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:50:43 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:50:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:50:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:50:45 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 47ms (Views: 46.1ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:50:45 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:50:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:50:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:50:50 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"l6Yfq0BpKUfUZt+s2raklqESmW8lvCuGjLOQq0fh1FnS9FZpe5ccwiiLSap/mbC3ZQmAnVeAEsKPS9ORnCV1+Q==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2018-06-12 11:50:50.277942"], ["sign_in_count", 2], ["updated_at", "2018-06-12 11:50:50.278752"], ["id", 3]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
Completed 302 Found in 151ms (ActiveRecord: 2.7ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 13:50:50 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (39.1ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (8.4ms)
  Rendered home/profile.html.erb within layouts/application (55.7ms)
Completed 200 OK in 96ms (Views: 82.9ms | ActiveRecord: 8.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:50:50 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:50:50 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:50:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:50:51 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (3.2ms)
Completed 200 OK in 48ms (Views: 41.4ms | ActiveRecord: 1.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:50:51 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:50:51 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:50:51 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:54:02 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (6.1ms)
Completed 200 OK in 78ms (Views: 49.6ms | ActiveRecord: 1.2ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:54:02 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:02 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-12 13:54:03 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"MZIfwKosLk0Cb0jawWR/ZdUEr10gUzqoR/YCErU64A9DqK2rv1BVj2OnVK14qijNDdD2bfbL0uHzfrZM0UjDXg=="}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 10ms (ActiveRecord: 1.1ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 13:54:04 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (30.9ms)
  Rendered home/welcome.html.erb within layouts/application (38.6ms)
Completed 200 OK in 95ms (Views: 78.0ms | ActiveRecord: 7.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:04 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:54:04 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:04 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:54:05 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (2.7ms)
Completed 200 OK in 49ms (Views: 47.6ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:05 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:54:05 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:05 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:54:10 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"7jGSci3vRM1qNeU3z2GykL5KCZErMfqEbH2DUeXd6T3BsiiXZW4RZ4Z8kty09WF328w+qnYU4t0hOIcQAQrMcw==", "user"=>{"email"=>"dante@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-12 11:54:11.092094"], ["last_sign_in_at", "2018-06-12 11:48:53.773656"], ["sign_in_count", 4], ["updated_at", "2018-06-12 11:54:11.093056"], ["id", 1]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/1
Completed 302 Found in 152ms (ActiveRecord: 3.6ms)


Started GET "/users/profile/1" for 127.0.0.1 at 2018-06-12 13:54:11 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 1 OR guest_id = 1)[0m
  Rendered home/_chat.html.erb (5.3ms)
  Rendered home/_chats_index.html.erb (0.6ms)
  Rendered home/profile.html.erb within layouts/application (12.1ms)
Completed 200 OK in 55ms (Views: 42.6ms | ActiveRecord: 4.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:11 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:54:11 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:11 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_1
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:54:12 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (3.4ms)
Completed 200 OK in 51ms (Views: 45.5ms | ActiveRecord: 1.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:13 +0200
MailboxChannel stopped streaming from mailbox_1
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:54:13 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:13 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-12 13:54:14 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"lcrtsjj5J/94vjswR0mC1bc8BW7LHaJd57sv3IzlYQsxuEc7i497S5Bo250I44kbPkxc4KmFtOymmau0WUJSlw=="}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 6ms (ActiveRecord: 1.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 13:54:14 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (6.8ms)
  Rendered home/welcome.html.erb within layouts/application (10.4ms)
Completed 200 OK in 57ms (Views: 53.0ms | ActiveRecord: 1.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:14 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:54:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:54:16 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.4ms)
Completed 200 OK in 49ms (Views: 48.0ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:16 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:54:16 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:16 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:54:21 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"DHIKD8HtvjzGW7PJ2GCdfZwofKyxE6+OzCukp20g7zCdHs/NKNjqSrQ9mZia3zIpwm1pX6jUBie4qZSz8y9rdg==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-12 11:54:21.829112"], ["last_sign_in_at", "2018-06-12 11:50:50.277942"], ["sign_in_count", 3], ["updated_at", "2018-06-12 11:54:21.829915"], ["id", 3]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
Completed 302 Found in 152ms (ActiveRecord: 2.6ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 13:54:21 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (16.4ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (5.8ms)
  Rendered home/profile.html.erb within layouts/application (28.3ms)
Completed 200 OK in 66ms (Views: 53.9ms | ActiveRecord: 8.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:21 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:54:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:54:23 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (2.9ms)
Completed 200 OK in 54ms (Views: 49.6ms | ActiveRecord: 1.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:23 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:54:23 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:54:23 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:55:07 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (4.4ms)
Completed 200 OK in 64ms (Views: 37.4ms | ActiveRecord: 1.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:55:07 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:07 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:55:10 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (4.2ms)
Completed 200 OK in 53ms (Views: 47.9ms | ActiveRecord: 1.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:10 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:55:10 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:10 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users_list/admin/4" for 127.0.0.1 at 2018-06-12 13:55:14 +0200
Processing by Users::RegistrationsController#admin_user as HTML
  Parameters: {"authenticity_token"=>"hcMLcpYjO1GWKwok1ml7jzaduKdqLmm2wIPPyxuiNfz5/Guzit8z8BATyDIBMQ/IkB0/Fp2NImuK31GcphZTQw==", "id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "role" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["role", "admin"], ["updated_at", "2018-06-12 11:55:14.614651"], ["id", 4]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 18ms (ActiveRecord: 2.1ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:55:14 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (4.4ms)
Completed 200 OK in 68ms (Views: 62.3ms | ActiveRecord: 1.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:14 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:55:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users_list/banned/4" for 127.0.0.1 at 2018-06-12 13:55:20 +0200
Processing by Users::RegistrationsController#banned_user as HTML
  Parameters: {"authenticity_token"=>"+eKMe4eJmsD+9lGAkmKiV6omigzdDOz4ipMxzgTqQxGF3ey6m3WSYXjOk5ZFOtYQDKYNvSqvpyXAz6+ZuV4lrg==", "id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "role" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["role", "banned"], ["updated_at", "2018-06-12 11:55:20.048616"], ["id", 4]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 20ms (ActiveRecord: 3.2ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:55:20 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (4.2ms)
Completed 200 OK in 64ms (Views: 57.3ms | ActiveRecord: 1.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:20 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:55:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users_list/booklover/4" for 127.0.0.1 at 2018-06-12 13:55:21 +0200
Processing by Users::RegistrationsController#booklover_user as HTML
  Parameters: {"authenticity_token"=>"v3WHmII7EqcGKp5EWLNfCS4IEdbdwZxWZDMz/l5kf6XDSudZnscaBoASXFKP6ytOiIiWZypi14sub62p49AZGg==", "id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "role" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["role", "booklover"], ["updated_at", "2018-06-12 11:55:21.149687"], ["id", 4]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 14ms (ActiveRecord: 2.4ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:55:21 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (3.3ms)
Completed 200 OK in 44ms (Views: 38.7ms | ActiveRecord: 1.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:21 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:55:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users_list/banned/4" for 127.0.0.1 at 2018-06-12 13:55:21 +0200
Processing by Users::RegistrationsController#banned_user as HTML
  Parameters: {"authenticity_token"=>"3gmzl4CSpGYviuSmaJ2+d0pT0F1stN48EXolEFz4k/uiNtNWnG6sx6myJrC/xcow7NNX7JsXleFbJrtH4Uz1RA==", "id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "role" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["role", "banned"], ["updated_at", "2018-06-12 11:55:22.009571"], ["id", 4]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 13ms (ActiveRecord: 2.7ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:55:22 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (3.3ms)
Completed 200 OK in 42ms (Views: 37.1ms | ActiveRecord: 1.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:22 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:55:22 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users_list/admin/4" for 127.0.0.1 at 2018-06-12 13:55:22 +0200
Processing by Users::RegistrationsController#admin_user as HTML
  Parameters: {"authenticity_token"=>"3IKpe45ZhL32iPIEMWZzU3dIxlrGcBXoolq+IHq1Xtagvcm6kqWMHHCwMBLmPgcU0chB6zHTXjXoBiB3xwE4aQ==", "id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "role" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["role", "admin"], ["updated_at", "2018-06-12 11:55:22.906263"], ["id", 4]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 15ms (ActiveRecord: 3.1ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:55:22 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (3.2ms)
Completed 200 OK in 49ms (Views: 42.4ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:22 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:55:23 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:23 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-12 13:55:26 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"enrXM3aidyG7QWgAlUdAlTAfQbW7RFg00YVv+pStcaAGRbfyal5/gD15qhZCHzTSlp/GBEznE+mb2fGtKRkXHw=="}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 13:55:26 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (22.8ms)
  Rendered home/welcome.html.erb within layouts/application (27.6ms)
Completed 200 OK in 66ms (Views: 51.4ms | ActiveRecord: 7.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:26 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:55:26 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:26 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:55:27 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.4ms)
Completed 200 OK in 47ms (Views: 46.2ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:27 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:55:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:55:31 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"yhDkMoAPl+z554FwqY5LeTWMTmA/XnXlWBOm7Pm/ws+hgR4Mdw3VovGjjZb8PJVQP7FscyHJU2RMD0xxBhGg3A==", "user"=>{"email"=>"dante@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-12 11:55:31.642044"], ["last_sign_in_at", "2018-06-12 11:54:11.092094"], ["sign_in_count", 5], ["updated_at", "2018-06-12 11:55:31.643041"], ["id", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/1
Completed 302 Found in 151ms (ActiveRecord: 2.6ms)


Started GET "/users/profile/1" for 127.0.0.1 at 2018-06-12 13:55:31 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 1 OR guest_id = 1)[0m
  Rendered home/_chat.html.erb (4.1ms)
  Rendered home/_chats_index.html.erb (0.4ms)
  Rendered home/profile.html.erb within layouts/application (10.6ms)
Completed 200 OK in 58ms (Views: 41.5ms | ActiveRecord: 3.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:31 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:55:31 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_1
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:55:33 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (5.1ms)
Completed 200 OK in 45ms (Views: 37.4ms | ActiveRecord: 1.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:33 +0200
MailboxChannel stopped streaming from mailbox_1
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:55:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:55:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:56:08 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (4.6ms)
Completed 200 OK in 82ms (Views: 48.3ms | ActiveRecord: 1.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:56:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users_list/banned/4" for 127.0.0.1 at 2018-06-12 13:56:10 +0200
Processing by Users::RegistrationsController#banned_user as HTML
  Parameters: {"authenticity_token"=>"OlF1tyn4VNaaFKhJThLsb5x5+DpaqR3dI4DewUVNFVYxz/mXwedWusoorD7ejOE1s3fzzdjEYvupqVsOK6jUDQ==", "id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "role" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["role", "banned"], ["updated_at", "2018-06-12 11:56:10.499196"], ["id", 4]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 20ms (ActiveRecord: 2.0ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:56:10 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (6.0ms)
Completed 200 OK in 68ms (Views: 61.6ms | ActiveRecord: 1.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:10 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:56:10 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:10 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users_list/admin/4" for 127.0.0.1 at 2018-06-12 13:56:11 +0200
Processing by Users::RegistrationsController#admin_user as HTML
  Parameters: {"authenticity_token"=>"305fb1wTZWRDgGNtx6I4YoCImgaE4J99ggFQj2P3CbvU0NNPtAxnCBO8ZxpXPDU4r4aR8QaN4FsIKNVADRLI4A==", "id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "role" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["role", "admin"], ["updated_at", "2018-06-12 11:56:11.813294"], ["id", 4]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 18ms (ActiveRecord: 2.6ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:56:11 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (5.7ms)
Completed 200 OK in 56ms (Views: 48.9ms | ActiveRecord: 1.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:11 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:56:11 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:11 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-12 13:56:13 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"5UWu4Fv5NSHzRJ0x0kZFqHqb87tIo9cGJAruibsQ/9Xu2yLAs+Y3TaN4mUZC2EjyVZX4TMrOqCCuI2tG1fU+jg=="}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 13:56:13 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (17.9ms)
  Rendered home/welcome.html.erb within layouts/application (21.5ms)
Completed 200 OK in 62ms (Views: 52.3ms | ActiveRecord: 1.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:13 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:56:13 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:13 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:56:14 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (2.8ms)
Completed 200 OK in 56ms (Views: 54.4ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:14 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:56:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:56:19 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"bwbp49q1lrod4LGHqyalSF6wFY3AVGoJ0epwSuRDM2SXkHkkueSTsqrQ+c+X8FOOoqCIM5E/mbOiv7B8SHSxLA==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-12 11:56:19.602528"], ["last_sign_in_at", "2018-06-12 11:54:21.829112"], ["sign_in_count", 4], ["updated_at", "2018-06-12 11:56:19.603583"], ["id", 3]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
Completed 302 Found in 151ms (ActiveRecord: 2.8ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 13:56:19 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (18.4ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (5.3ms)
  Rendered home/profile.html.erb within layouts/application (31.0ms)
Completed 200 OK in 71ms (Views: 55.8ms | ActiveRecord: 7.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:19 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:56:19 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:19 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:56:22 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (2.8ms)
Completed 200 OK in 44ms (Views: 38.3ms | ActiveRecord: 1.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:22 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:56:22 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users_list/banned/4" for 127.0.0.1 at 2018-06-12 13:56:26 +0200
Processing by Users::RegistrationsController#banned_user as HTML
  Parameters: {"authenticity_token"=>"6uJ2f1TqVruyr31cY8HjJj3Tuimq81eJfYA6Hdp6VtGByX23AmI7uWBUVwYhr42aGDw+qxh0hKwPTUHokC/uyw==", "id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "role" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["role", "banned"], ["updated_at", "2018-06-12 11:56:26.809431"], ["id", 4]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 15ms (ActiveRecord: 2.8ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:56:26 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (2.9ms)
Completed 200 OK in 50ms (Views: 44.2ms | ActiveRecord: 1.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:26 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:56:26 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:26 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users_list/booklover/4" for 127.0.0.1 at 2018-06-12 13:56:27 +0200
Processing by Users::RegistrationsController#booklover_user as HTML
  Parameters: {"authenticity_token"=>"s9kYidnFYrEr69q8/2L8oMjX40uVOrn5xoMAMon1HmrY8hNBj00Ps/kQ8Oa9DJIc7ThnySe9aty0TnvHw6CmcA==", "id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "role" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["role", "booklover"], ["updated_at", "2018-06-12 11:56:27.731103"], ["id", 4]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 13ms (ActiveRecord: 2.8ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:56:27 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (3.0ms)
Completed 200 OK in 41ms (Views: 35.9ms | ActiveRecord: 1.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:27 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:56:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started DELETE "/users/4" for 127.0.0.1 at 2018-06-12 13:56:29 +0200
Processing by Users::RegistrationsController#admin_destroy_user as HTML
  Parameters: {"authenticity_token"=>"KHhyyLmBFI4IwAvgDrEFl1PeKjFcCoXU1WjXPB4yOp5DU3kA7wl5jNo7IbpM32srdjGus+6NVvGnpazJVGeChA==", "id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[35mSQL (1.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 3]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAd Load (1.2ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1[0m  [["user_id", 4]]
  [1m[36mFavourite Load (0.6ms)[0m  [1m[34mSELECT "favourites".* FROM "favourites" WHERE "favourites"."ad_id" = $1[0m  [["ad_id", 1]]
  [1m[36mNotification Load (0.5ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."ad_id" = $1[0m  [["ad_id", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "ads" WHERE "ads"."id" = $1[0m  [["id", 1]]
  [1m[36mFavourite Load (0.3ms)[0m  [1m[34mSELECT "favourites".* FROM "favourites" WHERE "favourites"."ad_id" = $1[0m  [["ad_id", 2]]
  [1m[36mNotification Load (0.3ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."ad_id" = $1[0m  [["ad_id", 2]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "ads" WHERE "ads"."id" = $1[0m  [["id", 2]]
  [1m[36mNotification Load (0.3ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."user_id" = $1[0m  [["user_id", 4]]
  [1m[36mFavourite Load (0.4ms)[0m  [1m[34mSELECT "favourites".* FROM "favourites" WHERE "favourites"."user_id" = $1[0m  [["user_id", 4]]
  [1m[35mSQL (2.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin_panel
Completed 302 Found in 56ms (ActiveRecord: 18.3ms)


Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:56:29 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (1.9ms)
Completed 200 OK in 38ms (Views: 32.1ms | ActiveRecord: 1.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:29 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:56:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 13:56:30 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.7ms)
  Rendered home/welcome.html.erb within layouts/application (7.7ms)
Completed 200 OK in 54ms (Views: 47.6ms | ActiveRecord: 2.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:30 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:56:31 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:56:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (165.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (162.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (11.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "notifications_counter" integer DEFAULT 0)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.9ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (4.6ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAds (5)
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "ads" ("id" bigserial primary key, "list_type" integer, "book_title" character varying, "book_authors" character varying, "link_to_coverbook" character varying, "publisher" character varying, "identifier" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_ads_on_user_id" ON "ads"  ("user_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "ads" ADD CONSTRAINT "fk_rails_400d8fa7ce"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "5"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGoogleIdToAds (8)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ads" ADD "google_id" character varying[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "8"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLocateOptionToUsers (9)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "cap" character varying NOT NULL[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ADD "radius" character varying NOT NULL[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "9"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFavourites (20180605112913)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "favourites" ("id" bigserial primary key, "user_id" bigint, "ad_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_user_id" ON "favourites"  ("user_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_ad_id" ON "favourites"  ("ad_id")[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180605112913"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNotifications (20180607150535)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "user_id" bigint, "ad_id" bigint, "displayed" integer)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_user_id" ON "notifications"  ("user_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_ad_id" ON "notifications"  ("ad_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_b080fb4855"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_5b4eb0e1e4"
FOREIGN KEY ("ad_id")
  REFERENCES "ads" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180607150535"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-12 11:57:07.769703"], ["updated_at", "2018-06-12 11:57:07.769703"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$Fha8bvZj1bobGCe.pZz2neF5Dr4AXV2vqOMAA6vNRpP50swO/xcdy"], ["created_at", "2018-06-12 11:57:10.963166"], ["updated_at", "2018-06-12 11:57:10.963166"], ["role", "superadmin"], ["cap", "00184"], ["radius", "10"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$21WgXzWJPpEcoxGlKMsiLujc92azLDKejtOp8U3eohyBjFYBrMWSK"], ["created_at", "2018-06-12 11:57:11.096311"], ["updated_at", "2018-06-12 11:57:11.096311"], ["role", "admin"], ["cap", "00123"], ["radius", "10"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$k.1VZnsBBOg4K9WxfhhBWOFE.qsT5mhw6HehhbXZdXulnFI5p54Ni"], ["created_at", "2018-06-12 11:57:11.229538"], ["updated_at", "2018-06-12 11:57:11.229538"], ["role", "admin"], ["cap", "00015"], ["radius", "10"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$eyRjqxDtMUh6jsVnMe0Z8.AHgQva07B8h.OI3ehBn2hbiP3UKreVG"], ["created_at", "2018-06-12 11:57:11.370188"], ["updated_at", "2018-06-12 11:57:11.370188"], ["role", "admin"], ["cap", "00015"], ["radius", "10"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 11:57:11.398517"], ["updated_at", "2018-06-12 11:57:11.398517"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 11:57:11.415886"], ["updated_at", "2018-06-12 11:57:11.415886"], ["text", "Ciao vincenzone porcone"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-12 11:57:11.419266"], ["updated_at", "2018-06-12 11:57:11.419266"], ["text", "Ciao giorgio, sei bellissimo"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 11:57:11.421843"], ["updated_at", "2018-06-12 11:57:11.421843"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 11:57:11.424449"], ["updated_at", "2018-06-12 11:57:11.424449"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-12 11:57:11.426894"], ["updated_at", "2018-06-12 11:57:11.426894"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (145.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (137.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "notifications_counter" integer DEFAULT 0)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.3ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAds (5)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "ads" ("id" bigserial primary key, "list_type" integer, "book_title" character varying, "book_authors" character varying, "link_to_coverbook" character varying, "publisher" character varying, "identifier" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_ads_on_user_id" ON "ads"  ("user_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "ads" ADD CONSTRAINT "fk_rails_400d8fa7ce"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "5"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGoogleIdToAds (8)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ads" ADD "google_id" character varying[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "8"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLocateOptionToUsers (9)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "cap" character varying NOT NULL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "radius" character varying NOT NULL[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "9"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFavourites (10)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "favourites" ("id" bigserial primary key, "user_id" bigint, "ad_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_user_id" ON "favourites"  ("user_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_ad_id" ON "favourites"  ("ad_id")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "10"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNotifications (11)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "user_id" bigint, "ad_id" bigint, "displayed" integer)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_user_id" ON "notifications"  ("user_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_ad_id" ON "notifications"  ("ad_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_b080fb4855"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.1ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_5b4eb0e1e4"
FOREIGN KEY ("ad_id")
  REFERENCES "ads" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "11"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-12 11:58:30.131128"], ["updated_at", "2018-06-12 11:58:30.131128"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$QRC9Q.nalP8cnnCvwC3wbeLJ6l/KAT7UViDtZftlg98ypfMvCUuf2"], ["created_at", "2018-06-12 11:58:33.377337"], ["updated_at", "2018-06-12 11:58:33.377337"], ["role", "superadmin"], ["cap", "00184"], ["radius", "10"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$TBg48TCYQR3fAksHiuGPZ.fDOx3Bs8nZS4F490wLDfxTxdGS43tSu"], ["created_at", "2018-06-12 11:58:33.511977"], ["updated_at", "2018-06-12 11:58:33.511977"], ["role", "admin"], ["cap", "00123"], ["radius", "10"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$qbBOin3CJRtxkSOM8sAfE.m0taVFGVthlvNqsK82FHm78jAxDL3r."], ["created_at", "2018-06-12 11:58:33.645315"], ["updated_at", "2018-06-12 11:58:33.645315"], ["role", "admin"], ["cap", "00015"], ["radius", "10"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$3Qx1Lnf95YyON5ZaWtHzcuG3J2XZ/8CqAz3WqMfpR9Qqr7Q7xx.Ja"], ["created_at", "2018-06-12 11:58:33.784184"], ["updated_at", "2018-06-12 11:58:33.784184"], ["role", "admin"], ["cap", "00015"], ["radius", "10"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 11:58:33.808497"], ["updated_at", "2018-06-12 11:58:33.808497"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 11:58:33.824284"], ["updated_at", "2018-06-12 11:58:33.824284"], ["text", "Ciao vincenzone porcone"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-12 11:58:33.827138"], ["updated_at", "2018-06-12 11:58:33.827138"], ["text", "Ciao giorgio, sei bellissimo"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 11:58:33.829387"], ["updated_at", "2018-06-12 11:58:33.829387"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 11:58:33.831700"], ["updated_at", "2018-06-12 11:58:33.831700"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-12 11:58:33.833862"], ["updated_at", "2018-06-12 11:58:33.833862"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:58:56 +0200
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:58:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:58:56 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:58:56 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:58:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 13:59:01 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (6.5ms)
  Rendered home/welcome.html.erb within layouts/application (17.1ms)
Completed 200 OK in 439ms (Views: 361.2ms | ActiveRecord: 16.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:02 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:59:02 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:02 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:59:04 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (19.3ms)
Completed 200 OK in 60ms (Views: 58.1ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:04 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:59:04 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:04 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:59:08 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"DmeylrFdFkyBQRqMiq29CDOsjIIQWGNmm2c6HIx7ZjVlTLle59V7TlO6MNbIw9O0FkMIAKLfsEPpqkHpxi7eLw==", "user"=>{"email"=>"dante@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-12 11:59:09.037063"], ["last_sign_in_at", "2018-06-12 11:59:09.037063"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-12 11:59:09.038244"], ["id", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/1
Completed 302 Found in 167ms (ActiveRecord: 3.6ms)


Started GET "/users/profile/1" for 127.0.0.1 at 2018-06-12 13:59:09 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 1 OR guest_id = 1)[0m
  Rendered home/_chat.html.erb (4.6ms)
  Rendered home/_chats_index.html.erb (0.5ms)
  Rendered home/profile.html.erb within layouts/application (13.6ms)
Completed 200 OK in 67ms (Views: 53.9ms | ActiveRecord: 4.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:09 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:59:09 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_1
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:59:10 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (6.3ms)
Completed 200 OK in 45ms (Views: 39.3ms | ActiveRecord: 1.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:10 +0200
MailboxChannel stopped streaming from mailbox_1
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:59:10 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:10 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-12 13:59:15 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"OysytvsouGTTxCY4I7+a27QfN7nvylqg9YzxsBKkTqh1BMfN80ocDL4cpXOabmmBowAT43iUjjkjkRbf6rn8tA=="}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 12ms (ActiveRecord: 1.3ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 13:59:15 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (1.7ms)
  Rendered home/welcome.html.erb within layouts/application (4.4ms)
Completed 200 OK in 42ms (Views: 39.6ms | ActiveRecord: 0.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:15 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:59:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:59:16 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 44ms (Views: 43.4ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:16 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:59:16 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:16 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 13:59:19 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"7pqoxyRqs1KyTRECrQDO4VwyOeXrMStU92zqYhYp+8M1ywd3Iiy5Jd6IpioA/IQvyPwZ7MU+0XmhijwIy+8rkA==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-12 11:59:20.108149"], ["last_sign_in_at", "2018-06-12 11:59:20.108149"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-12 11:59:20.108922"], ["id", 4]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/4
Completed 302 Found in 151ms (ActiveRecord: 3.0ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 13:59:20 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (53.2ms)
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (60.1ms)
Completed 200 OK in 96ms (Views: 80.7ms | ActiveRecord: 11.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:20 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:59:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 13:59:21 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY id[0m
  Rendered home/admin_panel.html.erb within layouts/application (3.5ms)
Completed 200 OK in 45ms (Views: 40.7ms | ActiveRecord: 1.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:21 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:59:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 13:59:23 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (1.6ms)
  Rendered home/welcome.html.erb within layouts/application (7.3ms)
Completed 200 OK in 49ms (Views: 43.4ms | ActiveRecord: 1.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:23 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:59:23 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:23 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 13:59:25 +0200
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 13:59:25 +0200
Started GET "/profile/gift_list?id=3&list_type=1" for 127.0.0.1 at 2018-06-12 13:59:25 +0200
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%%')[0m
  Rendering home/users_list.html.erb within layouts/application
Processing by AdsController#gift as HTML
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%%')[0m
  Parameters: {"id"=>"3", "list_type"=>"1"}
  Rendered home/users_list.html.erb within layouts/application (8.1ms)
  [1m[36mUser Load (10.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (12.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  Rendered home/profile.html.erb within layouts/application (1.9ms)
  Rendering ads/gift.html.erb within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (1.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 1]]
  Rendered _ads_list.html.erb (3.8ms)
  Rendered ads/gift.html.erb within layouts/application (10.7ms)
Completed 200 OK in 136ms (Views: 117.2ms | ActiveRecord: 9.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:25 +0200
MailboxChannel stopped streaming from mailbox_
Completed 200 OK in 173ms (Views: 117.6ms | ActiveRecord: 35.0ms)


Completed 200 OK in 169ms (Views: 115.1ms | ActiveRecord: 36.3ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 13:59:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 13:59:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 14:01:04 +0200
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 14:01:04 +0200
Started GET "/profile/gift_list?id=3&list_type=1" for 127.0.0.1 at 2018-06-12 14:01:04 +0200
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%%')[0m
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%%')[0m
  Rendered home/users_list.html.erb within layouts/application (4.4ms)
Completed 200 OK in 78ms (Views: 35.7ms | ActiveRecord: 8.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:01:04 +0200
Processing by AdsController#gift as HTML
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:04 +0200
  Parameters: {"id"=>"3", "list_type"=>"1"}
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (18.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  Rendered home/profile.html.erb within layouts/application (2.0ms)
  Rendering ads/gift.html.erb within layouts/application
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (1.1ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 1]]
  Rendered _ads_list.html.erb (2.6ms)
  Rendered ads/gift.html.erb within layouts/application (9.9ms)
Completed 200 OK in 153ms (Views: 91.5ms | ActiveRecord: 28.3ms)


Completed 200 OK in 164ms (Views: 92.5ms | ActiveRecord: 15.9ms)


Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 14:01:06 +0200
Started GET "/profile/gift_list?id=3&list_type=1" for 127.0.0.1 at 2018-06-12 14:01:06 +0200
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
Processing by AdsController#gift as HTML
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 14:01:06 +0200
  Parameters: {"id"=>"3", "list_type"=>"1"}
Processing by HomeController#profile as HTML
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%%')[0m
  Rendering ads/gift.html.erb within layouts/application
  [1m[36mUser Load (14.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (8.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%%')[0m
  Rendered home/users_list.html.erb within layouts/application (15.9ms)
  [1m[36mAd Load (2.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 1]]
  Rendered _ads_list.html.erb (18.4ms)
  Rendered ads/gift.html.erb within layouts/application (37.3ms)
  Rendering home/profile.html.erb within layouts/application
  Rendered home/profile.html.erb within layouts/application (2.2ms)
Completed 200 OK in 178ms (Views: 137.1ms | ActiveRecord: 17.9ms)


Completed 200 OK in 191ms (Views: 155.8ms | ActiveRecord: 15.7ms)


Completed 200 OK in 190ms (Views: 166.0ms | ActiveRecord: 12.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:06 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:01:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-12 14:01:08 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (1.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (2.5ms)
  Rendered home/welcome.html.erb within layouts/application (5.9ms)
Completed 200 OK in 49ms (Views: 39.6ms | ActiveRecord: 2.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:08 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:01:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 14:01:09 +0200
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%%')[0m
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%%')[0m
  Rendered home/users_list.html.erb within layouts/application (3.3ms)
Completed 200 OK in 45ms (Views: 38.9ms | ActiveRecord: 1.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:09 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:01:09 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-12 14:01:17 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.9ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (1.8ms)
  Rendered home/welcome.html.erb within layouts/application (5.3ms)
Completed 200 OK in 58ms (Views: 48.6ms | ActiveRecord: 2.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:17 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:01:17 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 14:01:18 +0200
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
Started GET "/profile/gift_list?id=3&list_type=1" for 127.0.0.1 at 2018-06-12 14:01:18 +0200
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 14:01:18 +0200
Processing by AdsController#gift as HTML
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3", "list_type"=>"1"}
  Parameters: {"id"=>"3"}
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%%')[0m
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (9.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%%')[0m
  Rendering ads/gift.html.erb within layouts/application
  Rendered home/users_list.html.erb within layouts/application (16.1ms)
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  Rendered home/profile.html.erb within layouts/application (2.1ms)
  [1m[36mAd Load (0.9ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 1]]
  Rendered _ads_list.html.erb (3.2ms)
  Rendered ads/gift.html.erb within layouts/application (17.2ms)
Completed 200 OK in 120ms (Views: 95.7ms | ActiveRecord: 10.0ms)


Completed 200 OK in 132ms (Views: 109.3ms | ActiveRecord: 14.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:18 +0200
MailboxChannel stopped streaming from mailbox_
Completed 200 OK in 143ms (Views: 117.2ms | ActiveRecord: 4.3ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:01:19 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:19 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-12 14:01:31 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (1.5ms)
  Rendered home/welcome.html.erb within layouts/application (4.2ms)
Completed 200 OK in 54ms (Views: 47.6ms | ActiveRecord: 1.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:32 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:01:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 14:01:32 +0200
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%%')[0m
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (username iLIKE'%%') LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (username iLIKE'%%') LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (username iLIKE'%%') LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (username iLIKE'%%') LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (username iLIKE'%%') LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (username iLIKE'%%') LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (username iLIKE'%%') LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (username iLIKE'%%') LIMIT $1[0m  [["LIMIT", 11]]
  Rendered home/users_list.html.erb within layouts/application (263.3ms)
Completed 500 Internal Server Error in 279ms (ActiveRecord: 1.8ms)


  
ActionView::Template::Error (undefined local variable or method `name' for #<#<Class:0x00007f8b8f5859b8>:0x00007f8b8f574280>):
     7:     <h3>Users</h3> 
     8: 
     9:     <ul class="list-group">
    10:         <% @users.order(name).each do |user|%>
    11:             <% if user.role != "superadmin"%>
    12:                 <li class="list-group-item d-flex  align-items-center">
    13:                     <meta name="user_id" content="<%= user.id %>">
  
app/views/home/users_list.html.erb:10:in `_app_views_home_users_list_html_erb___3579193713415038490_70118691022300'
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:33 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 14:01:41 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (1.6ms)
  Rendered home/welcome.html.erb within layouts/application (5.4ms)
Completed 200 OK in 74ms (Views: 64.0ms | ActiveRecord: 1.8ms)


Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 14:01:42 +0200
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 14:01:42 +0200
Started GET "/profile/gift_list?id=3&list_type=1" for 127.0.0.1 at 2018-06-12 14:01:42 +0200
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Processing by HomeController#profile as HTML
Processing by AdsController#gift as HTML
  Parameters: {"id"=>"3", "list_type"=>"1"}
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%%')[0m
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (8.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%%') ORDER BY name[0m
  Rendering ads/gift.html.erb within layouts/application
  Rendered home/users_list.html.erb within layouts/application (14.9ms)
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  Rendered home/profile.html.erb within layouts/application (2.6ms)
  [1m[36mAd Load (4.0ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 1]]
  Rendered _ads_list.html.erb (6.6ms)
  Rendered ads/gift.html.erb within layouts/application (20.5ms)
Completed 200 OK in 159ms (Views: 124.5ms | ActiveRecord: 16.2ms)


Completed 200 OK in 178ms (Views: 154.0ms | ActiveRecord: 11.6ms)


Completed 200 OK in 170ms (Views: 144.5ms | ActiveRecord: 11.6ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:01:42 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:01:42 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-12 14:02:13 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (1.5ms)
  Rendered home/welcome.html.erb within layouts/application (4.1ms)
Completed 200 OK in 48ms (Views: 40.6ms | ActiveRecord: 1.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:13 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:02:13 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:13 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 14:02:14 +0200
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%%')[0m
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%%') ORDER BY name[0m
  Rendered home/users_list.html.erb within layouts/application (3.2ms)
Completed 200 OK in 48ms (Views: 41.5ms | ActiveRecord: 1.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:14 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:02:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-12 14:02:16 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (1.7ms)
  Rendered home/welcome.html.erb within layouts/application (5.2ms)
Completed 200 OK in 55ms (Views: 49.8ms | ActiveRecord: 1.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:16 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:02:17 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 14:02:25 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (1.5ms)
  Rendered home/welcome.html.erb within layouts/application (4.3ms)
Completed 200 OK in 48ms (Views: 41.9ms | ActiveRecord: 1.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:25 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:02:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 14:02:27 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (40.6ms)
  Rendered home/_chats_index.html.erb (1.0ms)
  Rendered home/profile.html.erb within layouts/application (48.4ms)
Completed 200 OK in 88ms (Views: 64.1ms | ActiveRecord: 19.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:27 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:02:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-12 14:02:31 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (1.9ms)
  Rendered home/welcome.html.erb within layouts/application (4.9ms)
Completed 200 OK in 55ms (Views: 48.9ms | ActiveRecord: 1.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:31 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:02:31 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 14:02:39 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (6.8ms)
  Rendered home/_chats_index.html.erb (1.8ms)
  Rendered home/profile.html.erb within layouts/application (16.8ms)
Completed 200 OK in 59ms (Views: 51.4ms | ActiveRecord: 3.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:39 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:02:39 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:39 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=gomorra&commit=Search" for 127.0.0.1 at 2018-06-12 14:02:42 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["gomorra"], "commit"=>"Search"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (24.4ms)
Completed 200 OK in 761ms (Views: 57.6ms | ActiveRecord: 0.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:43 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:02:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FGomorra-sample-epub.acsm%3Fid%3Dm-KftFxpQk8C%26format%3Depub%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FGomorra-sample-pdf.acsm%3Fid%3Dm-KftFxpQk8C%26format%3Dpdf%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3Dm-KftFxpQk8C%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=WQNI1zPWEXg&book%5Bid%5D%5Bid%5D=m-KftFxpQk8C&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5BbuyLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dm-KftFxpQk8C%26rdid%3Dbook-m-KftFxpQk8C%26rdot%3D1%26source%3Dgbs_api&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=true&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BfinskyOfferType%5D=1&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=Roberto+Saviano+racconta+la+camorra+come+nessuno+aveva+mai+fatto+prima%2C+unendo+il+rigore+del+ricercatore%2C+il+coraggio+del+giornalista+d%26%2339%3Binchiesta%2C+la+passione+dello+scrittore+e%2C+soprattutto%2C+l%26%2339%3Bamore+doloroso+per+una+citt%C3%A0+da+parte+di+chi+...&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2Fm-KftFxpQk8C&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=Roberto+Saviano&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.5&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fmarket.android.com%2Fdetails%3Fid%3Dbook-m-KftFxpQk8C&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=2.16.18.0.preview.3&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=Roberto+Saviano+racconta+la+camorra+come+nessuno+aveva+mai+fatto+prima%2C+unendo+il+rigore+del+ricercatore%2C+il+coraggio+del+giornalista+d%27inchiesta%2C+la+passione+dello+scrittore+e%2C+soprattutto%2C+l%27amore+doloroso+per+una+citt%C3%A0+da+parte+di+chi+vi+%C3%A8+nato+e+cresciuto.&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dm-KftFxpQk8C%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dm-KftFxpQk8C%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9788852016110&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=8852016112&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dm-KftFxpQk8C%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=406&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3Dm-KftFxpQk8C%26printsec%3Dfrontcover%26dq%3Dgomorra%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2010-10-07&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Edizioni+Mondadori&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=14&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Gomorra&book%5Blist_type%5D=0" for 127.0.0.1 at 2018-06-12 14:02:45 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"Bovg3npkNij/yOkRd3SWmiD/hWzgOBug3aInYArzeHgunCkDYORUAgOSEav+uYDV6nsKJyVVqE9yV9LiaJn5SA==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"acsTokenLink"=>"http://books.google.it/books/download/Gomorra-sample-epub.acsm?id=m-KftFxpQk8C&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "pdf"=>{"acsTokenLink"=>"http://books.google.it/books/download/Gomorra-sample-pdf.acsm?id=m-KftFxpQk8C&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=m-KftFxpQk8C&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"WQNI1zPWEXg", "id"=>"m-KftFxpQk8C", "kind"=>"books#volume", "saleInfo"=>{"buyLink"=>"https://play.google.com/store/books/details?id=m-KftFxpQk8C&rdid=book-m-KftFxpQk8C&rdot=1&source=gbs_api", "country"=>"IT", "isEbook"=>"true", "listPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "offers"=>[{"finskyOfferType"=>"1", "listPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}, "retailPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}}], "retailPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "saleability"=>"FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"Roberto Saviano racconta la camorra come nessuno aveva mai fatto prima, unendo il rigore del ricercatore, il coraggio del giornalista d&#39;inchiesta, la passione dello scrittore e, soprattutto, l&#39;amore doloroso per una cittÃ  da parte di chi ..."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/m-KftFxpQk8C", "volumeInfo"=>{"allowAnonLogging"=>"true", "authors"=>["Roberto Saviano"], "averageRating"=>"4.5", "canonicalVolumeLink"=>"https://market.android.com/details?id=book-m-KftFxpQk8C", "categories"=>["Fiction"], "contentVersion"=>"2.16.18.0.preview.3", "description"=>"Roberto Saviano racconta la camorra come nessuno aveva mai fatto prima, unendo il rigore del ricercatore, il coraggio del giornalista d'inchiesta, la passione dello scrittore e, soprattutto, l'amore doloroso per una cittÃ  da parte di chi vi Ã¨ nato e cresciuto.", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=m-KftFxpQk8C&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=m-KftFxpQk8C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9788852016110", "type"=>"ISBN_13"}, {"identifier"=>"8852016112", "type"=>"ISBN_10"}], "infoLink"=>"https://play.google.com/store/books/details?id=m-KftFxpQk8C&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"406", "previewLink"=>"http://books.google.it/books?id=m-KftFxpQk8C&printsec=frontcover&dq=gomorra&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2010-10-07", "publisher"=>"Edizioni Mondadori", "ratingsCount"=>"14", "readingModes"=>{"image"=>"true", "text"=>"true"}, "title"=>"Gomorra"}}, "list_type"=>"0"}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 4], ["google_id", "m-KftFxpQk8C"], ["list_type", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 0], ["book_title", "Gomorra"], ["book_authors", "[\"Roberto Saviano\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=m-KftFxpQk8C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"], ["publisher", "Edizioni Mondadori"], ["identifier", "[\"ISBN_13\", \"9788852016110\"]"], ["user_id", 4], ["created_at", "2018-06-12 12:02:45.319714"], ["updated_at", "2018-06-12 12:02:45.319714"], ["google_id", "m-KftFxpQk8C"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/4
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: b3bd0734-ee31-4e7f-8f5f-8bd866e31164) to Async(default) with arguments: #<GlobalID:0x00007f8b8f4c4b50 @uri=#<URI::GID gid://flealibrary/Ad/1>>
Completed 302 Found in 67ms (ActiveRecord: 7.9ms)


  [1m[36mAd Load (0.8ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [b3bd0734-ee31-4e7f-8f5f-8bd866e31164] Performing CreateNotificationsJob (Job ID: b3bd0734-ee31-4e7f-8f5f-8bd866e31164) from Async(default) with arguments: #<GlobalID:0x00007f8b8f49f260 @uri=#<URI::GID gid://flealibrary/Ad/1>>
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 14:02:45 +0200
[ActiveJob] [CreateNotificationsJob] [b3bd0734-ee31-4e7f-8f5f-8bd866e31164]   [1m[36mAd Load (1.2ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'gomorra' AND id != 1)[0m
[ActiveJob] [CreateNotificationsJob] [b3bd0734-ee31-4e7f-8f5f-8bd866e31164] Performed CreateNotificationsJob (Job ID: b3bd0734-ee31-4e7f-8f5f-8bd866e31164) from Async(default) in 2.3ms
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (6.2ms)
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (13.8ms)
Completed 200 OK in 53ms (Views: 45.8ms | ActiveRecord: 2.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:45 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:02:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-12 14:02:49 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"c6VYI+MECIYCr4x98nuHOqZRJQeyGUi7VPpptpMfO/9bspH++YRqrP71dMd7tpF1bNWqTHd0+1T7D5w08XW6zw=="}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 0.9ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 14:02:49 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (5.3ms)
  Rendered home/welcome.html.erb within layouts/application (8.4ms)
Completed 200 OK in 47ms (Views: 43.2ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:49 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:02:50 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 14:02:51 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (2.3ms)
Completed 200 OK in 56ms (Views: 55.0ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:51 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:02:51 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:51 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 14:02:56 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Kr0kkQfyLuHuaaOb58LlvMlAy/94q+7rhfur6hKGadMll175UUP70Pzrh5y3lqO37xeT8hul/vpx1j/4cU2GVg==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-12 12:02:56.173160"], ["last_sign_in_at", "2018-06-12 12:02:56.173160"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-12 12:02:56.174123"], ["id", 3]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
Completed 302 Found in 151ms (ActiveRecord: 3.2ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 14:02:56 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (6.9ms)
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (14.1ms)
Completed 200 OK in 50ms (Views: 42.8ms | ActiveRecord: 2.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:56 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:02:56 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:02:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=gomorra&commit=Search" for 127.0.0.1 at 2018-06-12 14:03:00 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["gomorra"], "commit"=>"Search"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (26.4ms)
Completed 200 OK in 700ms (Views: 66.6ms | ActiveRecord: 0.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:03:01 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:03:01 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:03:01 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FGomorra-sample-epub.acsm%3Fid%3Dm-KftFxpQk8C%26format%3Depub%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FGomorra-sample-pdf.acsm%3Fid%3Dm-KftFxpQk8C%26format%3Dpdf%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3Dm-KftFxpQk8C%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=WQNI1zPWEXg&book%5Bid%5D%5Bid%5D=m-KftFxpQk8C&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5BbuyLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dm-KftFxpQk8C%26rdid%3Dbook-m-KftFxpQk8C%26rdot%3D1%26source%3Dgbs_api&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=true&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BfinskyOfferType%5D=1&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=Roberto+Saviano+racconta+la+camorra+come+nessuno+aveva+mai+fatto+prima%2C+unendo+il+rigore+del+ricercatore%2C+il+coraggio+del+giornalista+d%26%2339%3Binchiesta%2C+la+passione+dello+scrittore+e%2C+soprattutto%2C+l%26%2339%3Bamore+doloroso+per+una+citt%C3%A0+da+parte+di+chi+...&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2Fm-KftFxpQk8C&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=Roberto+Saviano&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.5&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fmarket.android.com%2Fdetails%3Fid%3Dbook-m-KftFxpQk8C&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=2.16.18.0.preview.3&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=Roberto+Saviano+racconta+la+camorra+come+nessuno+aveva+mai+fatto+prima%2C+unendo+il+rigore+del+ricercatore%2C+il+coraggio+del+giornalista+d%27inchiesta%2C+la+passione+dello+scrittore+e%2C+soprattutto%2C+l%27amore+doloroso+per+una+citt%C3%A0+da+parte+di+chi+vi+%C3%A8+nato+e+cresciuto.&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dm-KftFxpQk8C%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dm-KftFxpQk8C%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9788852016110&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=8852016112&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dm-KftFxpQk8C%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=406&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3Dm-KftFxpQk8C%26printsec%3Dfrontcover%26dq%3Dgomorra%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2010-10-07&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Edizioni+Mondadori&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=14&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Gomorra&book%5Blist_type%5D=1" for 127.0.0.1 at 2018-06-12 14:03:03 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"E54nVRH9ZwnSAKQzQZKJlEAn7iBcGJFaSta9NXwyJwdmXk10kSW/hUB+d8SNHzvvid29Km0DHjpGuW2DPuKegw==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"acsTokenLink"=>"http://books.google.it/books/download/Gomorra-sample-epub.acsm?id=m-KftFxpQk8C&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "pdf"=>{"acsTokenLink"=>"http://books.google.it/books/download/Gomorra-sample-pdf.acsm?id=m-KftFxpQk8C&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=m-KftFxpQk8C&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"WQNI1zPWEXg", "id"=>"m-KftFxpQk8C", "kind"=>"books#volume", "saleInfo"=>{"buyLink"=>"https://play.google.com/store/books/details?id=m-KftFxpQk8C&rdid=book-m-KftFxpQk8C&rdot=1&source=gbs_api", "country"=>"IT", "isEbook"=>"true", "listPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "offers"=>[{"finskyOfferType"=>"1", "listPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}, "retailPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}}], "retailPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "saleability"=>"FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"Roberto Saviano racconta la camorra come nessuno aveva mai fatto prima, unendo il rigore del ricercatore, il coraggio del giornalista d&#39;inchiesta, la passione dello scrittore e, soprattutto, l&#39;amore doloroso per una cittÃ  da parte di chi ..."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/m-KftFxpQk8C", "volumeInfo"=>{"allowAnonLogging"=>"true", "authors"=>["Roberto Saviano"], "averageRating"=>"4.5", "canonicalVolumeLink"=>"https://market.android.com/details?id=book-m-KftFxpQk8C", "categories"=>["Fiction"], "contentVersion"=>"2.16.18.0.preview.3", "description"=>"Roberto Saviano racconta la camorra come nessuno aveva mai fatto prima, unendo il rigore del ricercatore, il coraggio del giornalista d'inchiesta, la passione dello scrittore e, soprattutto, l'amore doloroso per una cittÃ  da parte di chi vi Ã¨ nato e cresciuto.", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=m-KftFxpQk8C&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=m-KftFxpQk8C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9788852016110", "type"=>"ISBN_13"}, {"identifier"=>"8852016112", "type"=>"ISBN_10"}], "infoLink"=>"https://play.google.com/store/books/details?id=m-KftFxpQk8C&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"406", "previewLink"=>"http://books.google.it/books?id=m-KftFxpQk8C&printsec=frontcover&dq=gomorra&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2010-10-07", "publisher"=>"Edizioni Mondadori", "ratingsCount"=>"14", "readingModes"=>{"image"=>"true", "text"=>"true"}, "title"=>"Gomorra"}}, "list_type"=>"1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 3], ["google_id", "m-KftFxpQk8C"], ["list_type", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 1], ["book_title", "Gomorra"], ["book_authors", "[\"Roberto Saviano\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=m-KftFxpQk8C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"], ["publisher", "Edizioni Mondadori"], ["identifier", "[\"ISBN_13\", \"9788852016110\"]"], ["user_id", 3], ["created_at", "2018-06-12 12:03:03.034580"], ["updated_at", "2018-06-12 12:03:03.034580"], ["google_id", "m-KftFxpQk8C"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: 704ade28-a69f-43d1-8f75-f2fcae889147) to Async(default) with arguments: #<GlobalID:0x00007f8b9003bdf8 @uri=#<URI::GID gid://flealibrary/Ad/2>>
Completed 302 Found in 20ms (ActiveRecord: 4.2ms)


  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147] Performing CreateNotificationsJob (Job ID: 704ade28-a69f-43d1-8f75-f2fcae889147) from Async(default) with arguments: #<GlobalID:0x00007f8b8a7f0428 @uri=#<URI::GID gid://flealibrary/Ad/2>>
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[36mAd Load (1.2ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'gomorra' AND id != 2)[0m
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 14:03:03 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "notifications" ("created_at", "updated_at", "user_id", "ad_id", "displayed") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 12:03:03.086056"], ["updated_at", "2018-06-12 12:03:03.086056"], ["user_id", 3], ["ad_id", 1], ["displayed", 0]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (10.3ms)
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  Rendered home/_chats_index.html.erb (1.0ms)
  Rendered home/profile.html.erb within layouts/application (19.0ms)
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "notifications" ("created_at", "updated_at", "user_id", "ad_id", "displayed") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 12:03:03.099913"], ["updated_at", "2018-06-12 12:03:03.099913"], ["user_id", 4], ["ad_id", 2], ["displayed", 0]]
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[36mUser Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 1], ["updated_at", "2018-06-12 12:03:03.120697"], ["id", 3]]
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 1], ["updated_at", "2018-06-12 12:03:03.143354"], ["id", 4]]
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147]   [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147] [ActionCable] Broadcasting to mailbox_3: {:type=>"new_notification"}
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147] [ActionCable] Broadcasting to mailbox_4: {:type=>"new_notification"}
[ActiveJob] [CreateNotificationsJob] [704ade28-a69f-43d1-8f75-f2fcae889147] Performed CreateNotificationsJob (Job ID: 704ade28-a69f-43d1-8f75-f2fcae889147) from Async(default) in 106.35ms
Completed 200 OK in 126ms (Views: 110.1ms | ActiveRecord: 7.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:03:03 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:03:03 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:03:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/" for 127.0.0.1 at 2018-06-12 14:03:42 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.8ms)
  Rendered home/welcome.html.erb within layouts/application (6.0ms)
Completed 200 OK in 616ms (Views: 53.2ms | ActiveRecord: 1.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:03:42 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:03:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:03:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/notifications" for 127.0.0.1 at 2018-06-12 14:03:49 +0200
Processing by NotificationsController#index as HTML
Started GET "/" for 127.0.0.1 at 2018-06-12 14:03:49 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mNotification Load (0.9ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."user_id" = $1[0m  [["user_id", 3]]
  [1m[36mAd Load (1.9ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "notifications" SET "displayed" = $1, "updated_at" = $2 WHERE "notifications"."id" = $3[0m  [["displayed", 1], ["updated_at", "2018-06-12 12:03:49.176101"], ["id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 0], ["updated_at", "2018-06-12 12:03:49.185918"], ["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  Rendering notifications/index.html.erb within layouts/application
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.4ms)
  Rendered _ads_list.html.erb (0.0ms)
  Rendered notifications/index.html.erb within layouts/application (8.9ms)
Completed 200 OK in 74ms (Views: 40.3ms | ActiveRecord: 6.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:03:49 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:03:49 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:03:49 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.9ms)
  Rendered home/welcome.html.erb within layouts/application (4.9ms)
Completed 200 OK in 223ms (Views: 44.7ms | ActiveRecord: 5.5ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 14:03:54 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.8ms)
  Rendered home/welcome.html.erb within layouts/application (4.9ms)
Completed 200 OK in 196ms (Views: 44.2ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:03:54 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:03:54 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:03:54 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/notifications" for 127.0.0.1 at 2018-06-12 14:03:55 +0200
Processing by NotificationsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mNotification Load (0.4ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."user_id" = $1[0m  [["user_id", 3]]
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  Rendering notifications/index.html.erb within layouts/application
  Rendered _ads_list.html.erb (0.9ms)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.9ms)
  Rendered notifications/index.html.erb within layouts/application (8.1ms)
Completed 200 OK in 59ms (Views: 41.1ms | ActiveRecord: 4.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:03:55 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:03:55 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:03:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 14:04:01 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.7ms)
  Rendered home/welcome.html.erb within layouts/application (4.5ms)
Completed 200 OK in 190ms (Views: 37.3ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:04:01 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:04:01 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:04:01 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-12 14:04:05 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"qaIjH+/tsTNSpZaGsK2Yq6xI0uNTzQUxc7S4M7M1N5TcYkk+bzVpv8DbRXF8ICrQZbKB6WLWilF/22iF8eWOEA=="}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 5ms (ActiveRecord: 0.9ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 14:04:05 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (6.3ms)
  Rendered home/welcome.html.erb within layouts/application (9.1ms)
Completed 200 OK in 54ms (Views: 49.9ms | ActiveRecord: 1.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:04:05 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:04:05 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:04:05 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 14:05:07 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.4ms)
  Rendered home/welcome.html.erb within layouts/application (7.3ms)
Completed 200 OK in 52ms (Views: 47.2ms | ActiveRecord: 0.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:07 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:05:07 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:07 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 14:05:08 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (5.0ms)
  Rendered home/welcome.html.erb within layouts/application (8.6ms)
Completed 200 OK in 45ms (Views: 40.1ms | ActiveRecord: 0.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:08 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:05:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 14:05:13 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (5.3ms)
  Rendered home/welcome.html.erb within layouts/application (8.2ms)
Completed 200 OK in 47ms (Views: 40.4ms | ActiveRecord: 0.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:13 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:05:13 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:13 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/favourites?id%5Bbook%5D=1" for 127.0.0.1 at 2018-06-12 14:05:25 +0200
Processing by FavouritesController#create as HTML
  Parameters: {"authenticity_token"=>"JgyZuUIrVtnPauje9BgjIkt+r7f9//s+Aoi1tP3YQktowjp1dToPwF4lA5NpvSbTf/nl2cjzzsxf9y1WW/FETA==", "id"=>{"book"=>"1"}}
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 14:05:25 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (2.3ms)
Completed 200 OK in 46ms (Views: 44.8ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:25 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:05:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 14:05:26 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.7ms)
  Rendered home/welcome.html.erb within layouts/application (8.2ms)
Completed 200 OK in 48ms (Views: 44.7ms | ActiveRecord: 0.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:26 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:05:26 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:26 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 14:05:28 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 14:05:28 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 45ms (Views: 44.2ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 14:05:29 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.8ms)
  Rendered home/welcome.html.erb within layouts/application (7.7ms)
Completed 200 OK in 59ms (Views: 55.3ms | ActiveRecord: 0.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:29 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:05:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 14:05:36 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 49ms (Views: 48.1ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:36 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:05:36 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:36 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 14:05:41 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"rTBMQjnVE10HpmXD5qTH5zw+5uw9nnzVNOBza18dCOXj/u+ODsRKRJbpjo57AcIWCLmsggiSSSdpn+uJ+TQO4g==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2018-06-12 12:05:41.479131"], ["sign_in_count", 2], ["updated_at", "2018-06-12 12:05:41.479946"], ["id", 4]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/4
Completed 302 Found in 152ms (ActiveRecord: 1.8ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 14:05:41 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.2ms)
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (20.7ms)
Completed 200 OK in 82ms (Views: 73.2ms | ActiveRecord: 2.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:41 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:05:41 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:41 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/notifications" for 127.0.0.1 at 2018-06-12 14:05:45 +0200
Processing by NotificationsController#index as HTML
Started GET "/" for 127.0.0.1 at 2018-06-12 14:05:45 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mNotification Load (1.7ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."user_id" = $1[0m  [["user_id", 4]]
  [1m[36mAd Load (1.1ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "notifications" SET "displayed" = $1, "updated_at" = $2 WHERE "notifications"."id" = $3[0m  [["displayed", 1], ["updated_at", "2018-06-12 12:05:45.865988"], ["id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 0], ["updated_at", "2018-06-12 12:05:45.882690"], ["id", 4]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  Rendering notifications/index.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.3ms)
  Rendered _ads_list.html.erb (0.1ms)
  Rendered notifications/index.html.erb within layouts/application (8.0ms)
Completed 200 OK in 96ms (Views: 57.4ms | ActiveRecord: 8.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:45 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:05:46 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:46 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.8ms)
  Rendered home/welcome.html.erb within layouts/application (4.8ms)
Completed 200 OK in 200ms (Views: 37.8ms | ActiveRecord: 3.3ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 14:05:51 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.3ms)
  Rendered home/welcome.html.erb within layouts/application (6.4ms)
Completed 200 OK in 205ms (Views: 41.2ms | ActiveRecord: 1.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:51 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:05:51 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:05:51 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 14:06:11 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (1.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (8.2ms)
  Rendered home/_chats_index.html.erb (1.1ms)
  Rendered home/profile.html.erb within layouts/application (15.4ms)
Completed 200 OK in 63ms (Views: 53.3ms | ActiveRecord: 3.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:06:11 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:06:11 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:06:11 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 14:06:15 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (6.1ms)
  Rendered home/_chats_index.html.erb (1.7ms)
  Rendered home/profile.html.erb within layouts/application (15.2ms)
Completed 200 OK in 54ms (Views: 47.2ms | ActiveRecord: 2.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:06:15 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:06:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:06:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-12 14:06:16 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.6ms)
  Rendered home/welcome.html.erb within layouts/application (4.9ms)
Completed 200 OK in 204ms (Views: 39.2ms | ActiveRecord: 1.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:06:16 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:06:16 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:06:16 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/create_chat" for 127.0.0.1 at 2018-06-12 14:06:18 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 12:06:18.084071"], ["updated_at", "2018-06-12 12:06:18.084071"], ["owner_id", 4], ["guest_id", 3]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"create_chat"}
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.5ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-12 14:06:19 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 12:06:19.646466"], ["updated_at", "2018-06-12 12:06:19.646466"], ["owner_id", 4], ["guest_id", 3]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"create_chat"}
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 3.4ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-12 14:06:20 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 12:06:20.910849"], ["updated_at", "2018-06-12 12:06:20.910849"], ["owner_id", 4], ["guest_id", 3]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"create_chat"}
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 3.8ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 14:06:22 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mMessage Load (4.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 5]]
  Rendered home/_chat.html.erb (15.7ms)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (13.6ms)
  Rendered home/profile.html.erb within layouts/application (37.6ms)
Completed 200 OK in 82ms (Views: 66.4ms | ActiveRecord: 9.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:06:23 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:06:23 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:06:23 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-12 14:06:52 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.0ms)
  Rendered home/welcome.html.erb within layouts/application (4.8ms)
Completed 200 OK in 182ms (Views: 35.8ms | ActiveRecord: 1.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:06:52 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:06:52 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:06:52 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/ads_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 14:06:53 +0200
Processing by HomeController#ads_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "ads" WHERE (book_title iLIKE'%%')[0m
  Rendering home/ads_list.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (book_title iLIKE'%%')[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (5.7ms)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/ads_list.html.erb within layouts/application (10.1ms)
Completed 200 OK in 50ms (Views: 43.8ms | ActiveRecord: 2.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:06:53 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:06:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:06:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 14:07:00 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.7ms)
  Rendered home/welcome.html.erb within layouts/application (4.6ms)
Completed 200 OK in 208ms (Views: 38.2ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:07:01 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:07:01 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:07:01 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 14:07:02 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 5]]
  Rendered home/_chat.html.erb (10.1ms)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (8.7ms)
  Rendered home/profile.html.erb within layouts/application (25.4ms)
Completed 200 OK in 68ms (Views: 57.1ms | ActiveRecord: 4.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:07:02 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:07:02 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:07:02 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-12 14:09:19 +0200
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.9ms)
  Rendered home/welcome.html.erb within layouts/application (11.7ms)
Completed 200 OK in 1632ms (Views: 1001.0ms | ActiveRecord: 16.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:09:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:09:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/ads_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 14:09:22 +0200
Processing by HomeController#ads_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "ads" WHERE (book_title iLIKE'%%')[0m
  Rendering home/ads_list.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (book_title iLIKE'%%')[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (8.7ms)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/ads_list.html.erb within layouts/application (13.5ms)
Completed 200 OK in 82ms (Views: 72.3ms | ActiveRecord: 3.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:09:22 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:09:22 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:09:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 14:09:23 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.9ms)
  Rendered home/welcome.html.erb within layouts/application (6.7ms)
Completed 200 OK in 241ms (Views: 58.1ms | ActiveRecord: 2.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:09:24 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:09:24 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:09:24 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 14:09:25 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 5]]
  Rendered home/_chat.html.erb (72.6ms)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (7.4ms)
  Rendered home/profile.html.erb within layouts/application (87.8ms)
Completed 200 OK in 138ms (Views: 105.8ms | ActiveRecord: 16.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:09:25 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:09:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:09:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 14:09:27 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Redirected to http://localhost:3000/users/profile/4
Completed 302 Found in 213ms (ActiveRecord: 0.5ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 14:09:27 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 5]]
  Rendered home/_chat.html.erb (10.2ms)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (7.9ms)
  Rendered home/profile.html.erb within layouts/application (23.7ms)
Completed 200 OK in 62ms (Views: 52.5ms | ActiveRecord: 4.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:09:27 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:09:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:09:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=c&commit=Search" for 127.0.0.1 at 2018-06-12 14:09:31 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["c"], "commit"=>"Search"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (28.5ms)
Completed 200 OK in 915ms (Views: 66.9ms | ActiveRecord: 0.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:09:32 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:09:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:09:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=c&commit=Search" for 127.0.0.1 at 2018-06-12 14:12:08 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["c"], "commit"=>"Search"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (28.5ms)
Completed 200 OK in 716ms (Views: 62.1ms | ActiveRecord: 0.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:12:09 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:12:09 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:12:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=c&commit=Search" for 127.0.0.1 at 2018-06-12 14:12:46 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["c"], "commit"=>"Search"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (34.9ms)
Completed 200 OK in 750ms (Views: 67.7ms | ActiveRecord: 0.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:12:47 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:12:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:12:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=c&commit=Search" for 127.0.0.1 at 2018-06-12 14:13:06 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["c"], "commit"=>"Search"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (25.3ms)
Completed 200 OK in 544ms (Views: 58.4ms | ActiveRecord: 0.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:13:06 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:13:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:13:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=c&commit=Search" for 127.0.0.1 at 2018-06-12 14:14:16 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["c"], "commit"=>"Search"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (26.4ms)
Completed 200 OK in 598ms (Views: 57.1ms | ActiveRecord: 1.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:14:16 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 14:14:16 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 14:14:16 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5059.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (147.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (140.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "notifications_counter" integer DEFAULT 0)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.2ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (4.6ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAds (5)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "ads" ("id" bigserial primary key, "list_type" integer, "book_title" character varying, "book_authors" character varying, "link_to_coverbook" character varying, "publisher" character varying, "identifier" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_ads_on_user_id" ON "ads"  ("user_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "ads" ADD CONSTRAINT "fk_rails_400d8fa7ce"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "5"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGoogleIdToAds (8)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "ads" ADD "google_id" character varying[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "8"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLocateOptionToUsers (9)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" ADD "cap" character varying NOT NULL[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ADD "radius" character varying NOT NULL[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "9"]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFavourites (10)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "favourites" ("id" bigserial primary key, "user_id" bigint, "ad_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_user_id" ON "favourites"  ("user_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_ad_id" ON "favourites"  ("ad_id")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "10"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNotifications (11)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "user_id" bigint, "ad_id" bigint, "displayed" integer)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_user_id" ON "notifications"  ("user_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_ad_id" ON "notifications"  ("ad_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_b080fb4855"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_5b4eb0e1e4"
FOREIGN KEY ("ad_id")
  REFERENCES "ads" ("id")
[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "11"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-12 16:29:31.169172"], ["updated_at", "2018-06-12 16:29:31.169172"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$hzlQiz/1QuCXxKQ1GWBLteBVKb0jtfuW5qJ12kFojgVWwuvA7r2/K"], ["created_at", "2018-06-12 16:29:34.329157"], ["updated_at", "2018-06-12 16:29:34.329157"], ["role", "superadmin"], ["cap", "00184"], ["radius", "10"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$oah0AxKhu4f3mPCg4./AG.OTVyaZkMI0aCovBazBkO.TyuwD3HoOi"], ["created_at", "2018-06-12 16:29:34.467042"], ["updated_at", "2018-06-12 16:29:34.467042"], ["role", "admin"], ["cap", "00123"], ["radius", "10"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$9DUcSWmVJYYsBZLTdEr8ruroVaJ0Wrixxv0f.obJ02U5DYTJareSi"], ["created_at", "2018-06-12 16:29:34.599495"], ["updated_at", "2018-06-12 16:29:34.599495"], ["role", "admin"], ["cap", "00015"], ["radius", "10"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$bpsrfug4ggOezq3NC.cNN.js6YGCX7YeWNZcmaB8xAwcWnATdzIsG"], ["created_at", "2018-06-12 16:29:34.740256"], ["updated_at", "2018-06-12 16:29:34.740256"], ["role", "admin"], ["cap", "00015"], ["radius", "10"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 16:29:34.761903"], ["updated_at", "2018-06-12 16:29:34.761903"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 16:29:34.777662"], ["updated_at", "2018-06-12 16:29:34.777662"], ["text", "Ciao vincenzone porcone"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-12 16:29:34.780623"], ["updated_at", "2018-06-12 16:29:34.780623"], ["text", "Ciao giorgio, sei bellissimo"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 16:29:34.782888"], ["updated_at", "2018-06-12 16:29:34.782888"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 16:29:34.785280"], ["updated_at", "2018-06-12 16:29:34.785280"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-12 16:29:34.787474"], ["updated_at", "2018-06-12 16:29:34.787474"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2018-06-12 19:04:55 +0200
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (6.0ms)
  Rendered home/welcome.html.erb within layouts/application (14.8ms)
Completed 200 OK in 1156ms (Views: 1090.7ms | ActiveRecord: 14.2ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:04:57 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:04:57 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 19:05:00 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (21.9ms)
Completed 200 OK in 89ms (Views: 84.9ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:00 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:05:00 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:00 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 19:05:05 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"J62HVEyqvIaWmPoS76bX229jajvWvwcVe6WMWnvY1S6JzW51DszrRJq3zql50RQtk0hAkLV7BXe7NjRS6eMUCw==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 154ms (ActiveRecord: 1.6ms)


Processing by Users::SessionsController#new as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"J62HVEyqvIaWmPoS76bX229jajvWvwcVe6WMWnvY1S6JzW51DszrRJq3zql50RQtk0hAkLV7BXe7NjRS6eMUCw==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (5.8ms)
Completed 200 OK in 174ms (Views: 49.0ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:06 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:05:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 19:05:08 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"6hOZzf3HbTup8dPGAfaZpeniOGJczFfGYbwXFJfomsNEc3Dsv6E6+aXe532XgVpTFckSyT8IVaShL68cBdNb5g==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-12 17:05:08.730862"], ["last_sign_in_at", "2018-06-12 17:05:08.730862"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-12 17:05:08.732543"], ["id", 4]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/4
Completed 302 Found in 156ms (ActiveRecord: 3.3ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 19:05:08 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (50.2ms)
  Rendered home/_chats_index.html.erb (1.3ms)
  Rendered home/profile.html.erb within layouts/application (60.7ms)
Completed 200 OK in 112ms (Views: 86.9ms | ActiveRecord: 14.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:08 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:05:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/profile/wish_list?id=4&list_type=0" for 127.0.0.1 at 2018-06-12 19:05:11 +0200
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"4", "list_type"=>"0"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (0.8ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 4], ["list_type", 0]]
  Rendered _ads_list.html.erb (2.5ms)
  Rendered ads/wish.html.erb within layouts/application (5.1ms)
Completed 200 OK in 46ms (Views: 39.4ms | ActiveRecord: 1.6ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 19:05:12 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (1.2ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (1.9ms)
  Rendered home/welcome.html.erb within layouts/application (4.9ms)
Completed 200 OK in 50ms (Views: 40.7ms | ActiveRecord: 2.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:12 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:05:12 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:12 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 19:05:15 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.4ms)
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (16.4ms)
Completed 200 OK in 59ms (Views: 49.5ms | ActiveRecord: 3.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:15 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:05:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=cent%27anni+di+solitudine&commit=Search" for 127.0.0.1 at 2018-06-12 19:05:18 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["cent'anni di solitudine"], "commit"=>"Search"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (35.0ms)
Completed 200 OK in 769ms (Views: 74.7ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:18 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:05:18 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:18 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FCent_anni_di_solitudine-sample-epub.acsm%3Fid%3Dy6f3-R9YMsgC%26format%3Depub%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FCent_anni_di_solitudine-sample-pdf.acsm%3Fid%3Dy6f3-R9YMsgC%26format%3Dpdf%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3Dy6f3-R9YMsgC%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=324CUMiMaYM&book%5Bid%5D%5Bid%5D=y6f3-R9YMsgC&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5BbuyLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dy6f3-R9YMsgC%26rdid%3Dbook-y6f3-R9YMsgC%26rdot%3D1%26source%3Dgbs_api&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=true&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BfinskyOfferType%5D=1&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=Grandezza+e+decadenza+della+citt%C3%A0+di+Macondo+e+della+famiglia+Buendia%2C+in+una+successione+appassionante+di+avvenimenti+favolosi+e+grotteschi+tra+cronistoria+e+leggenda.&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2Fy6f3-R9YMsgC&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=Gabriel+Garc%C3%ADa+M%C3%A1rquez&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.0&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fmarket.android.com%2Fdetails%3Fid%3Dbook-y6f3-R9YMsgC&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=2.27.29.0.preview.3&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=Grandezza+e+decadenza+della+citt%C3%A0+di+Macondo+e+della+famiglia+Buendia%2C+in+una+successione+appassionante+di+avvenimenti+favolosi+e+grotteschi+tra+cronistoria+e+leggenda.&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dy6f3-R9YMsgC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dy6f3-R9YMsgC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9788852011498&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=8852011498&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dy6f3-R9YMsgC%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=420&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3Dy6f3-R9YMsgC%26printsec%3Dfrontcover%26dq%3Dcent%2527anni%2Bdi%2Bsolitudine%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2010-10-07&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Edizioni+Mondadori&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=8&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Cent%27anni+di+solitudine&book%5Blist_type%5D=0" for 127.0.0.1 at 2018-06-12 19:05:20 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"8rBUnZqcufKhjm7ScoZgmhDMcMr+Zz7vVY5dbeyvZ8kYnd/65acmh4ZlvtnSzSOU66/9/sEzrjqsf7z5gbQnRA==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"acsTokenLink"=>"http://books.google.it/books/download/Cent_anni_di_solitudine-sample-epub.acsm?id=y6f3-R9YMsgC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "pdf"=>{"acsTokenLink"=>"http://books.google.it/books/download/Cent_anni_di_solitudine-sample-pdf.acsm?id=y6f3-R9YMsgC&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=y6f3-R9YMsgC&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"324CUMiMaYM", "id"=>"y6f3-R9YMsgC", "kind"=>"books#volume", "saleInfo"=>{"buyLink"=>"https://play.google.com/store/books/details?id=y6f3-R9YMsgC&rdid=book-y6f3-R9YMsgC&rdot=1&source=gbs_api", "country"=>"IT", "isEbook"=>"true", "listPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "offers"=>[{"finskyOfferType"=>"1", "listPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}, "retailPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}}], "retailPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "saleability"=>"FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"Grandezza e decadenza della cittÃ  di Macondo e della famiglia Buendia, in una successione appassionante di avvenimenti favolosi e grotteschi tra cronistoria e leggenda."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/y6f3-R9YMsgC", "volumeInfo"=>{"allowAnonLogging"=>"true", "authors"=>["Gabriel GarcÃ­a MÃ¡rquez"], "averageRating"=>"4.0", "canonicalVolumeLink"=>"https://market.android.com/details?id=book-y6f3-R9YMsgC", "categories"=>["Fiction"], "contentVersion"=>"2.27.29.0.preview.3", "description"=>"Grandezza e decadenza della cittÃ  di Macondo e della famiglia Buendia, in una successione appassionante di avvenimenti favolosi e grotteschi tra cronistoria e leggenda.", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=y6f3-R9YMsgC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=y6f3-R9YMsgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9788852011498", "type"=>"ISBN_13"}, {"identifier"=>"8852011498", "type"=>"ISBN_10"}], "infoLink"=>"https://play.google.com/store/books/details?id=y6f3-R9YMsgC&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"420", "previewLink"=>"http://books.google.it/books?id=y6f3-R9YMsgC&printsec=frontcover&dq=cent%27anni+di+solitudine&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2010-10-07", "publisher"=>"Edizioni Mondadori", "ratingsCount"=>"8", "readingModes"=>{"image"=>"true", "text"=>"true"}, "title"=>"Cent'anni di solitudine"}}, "list_type"=>"0"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 4], ["google_id", "y6f3-R9YMsgC"], ["list_type", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 0], ["book_title", "Cent'anni di solitudine"], ["book_authors", "[\"Gabriel GarcÃ­a MÃ¡rquez\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=y6f3-R9YMsgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"], ["publisher", "Edizioni Mondadori"], ["identifier", "[\"ISBN_13\", \"9788852011498\"]"], ["user_id", 4], ["created_at", "2018-06-12 17:05:20.414210"], ["updated_at", "2018-06-12 17:05:20.414210"], ["google_id", "y6f3-R9YMsgC"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/4
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: d2b69156-9c27-4c72-97ce-3890240443e1) to Async(default) with arguments: #<GlobalID:0x00007faabdb545e0 @uri=#<URI::GID gid://flealibrary/Ad/1>>
Completed 302 Found in 61ms (ActiveRecord: 8.3ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 19:05:20 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mAd Load (2.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [d2b69156-9c27-4c72-97ce-3890240443e1] Performing CreateNotificationsJob (Job ID: d2b69156-9c27-4c72-97ce-3890240443e1) from Async(default) with arguments: #<GlobalID:0x00007faab7ba5d60 @uri=#<URI::GID gid://flealibrary/Ad/1>>
  [1m[36mMessage Load (1.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [d2b69156-9c27-4c72-97ce-3890240443e1]   [1m[36mAd Load (3.2ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'cent''anni di solitudine' AND id != 1)[0m
[ActiveJob] [CreateNotificationsJob] [d2b69156-9c27-4c72-97ce-3890240443e1] Performed CreateNotificationsJob (Job ID: d2b69156-9c27-4c72-97ce-3890240443e1) from Async(default) in 4.29ms
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (9.8ms)
  Rendered home/_chats_index.html.erb (1.0ms)
  Rendered home/profile.html.erb within layouts/application (17.8ms)
Completed 200 OK in 61ms (Views: 49.4ms | ActiveRecord: 4.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:20 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:05:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-12 19:05:23 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.4ms)
  Rendered home/welcome.html.erb within layouts/application (8.0ms)
Completed 200 OK in 51ms (Views: 42.2ms | ActiveRecord: 3.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:23 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:05:23 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:23 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 19:05:28 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (8.2ms)
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (15.7ms)
Completed 200 OK in 61ms (Views: 49.8ms | ActiveRecord: 3.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:28 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:05:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=cent%27anni+di+solitudine&commit=Search" for 127.0.0.1 at 2018-06-12 19:05:31 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["cent'anni di solitudine"], "commit"=>"Search"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (40.5ms)
Completed 200 OK in 590ms (Views: 75.8ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:32 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:05:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FCent_anni_di_solitudine-sample-epub.acsm%3Fid%3Dy6f3-R9YMsgC%26format%3Depub%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FCent_anni_di_solitudine-sample-pdf.acsm%3Fid%3Dy6f3-R9YMsgC%26format%3Dpdf%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3Dy6f3-R9YMsgC%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=324CUMiMaYM&book%5Bid%5D%5Bid%5D=y6f3-R9YMsgC&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5BbuyLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dy6f3-R9YMsgC%26rdid%3Dbook-y6f3-R9YMsgC%26rdot%3D1%26source%3Dgbs_api&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=true&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BfinskyOfferType%5D=1&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=Grandezza+e+decadenza+della+citt%C3%A0+di+Macondo+e+della+famiglia+Buendia%2C+in+una+successione+appassionante+di+avvenimenti+favolosi+e+grotteschi+tra+cronistoria+e+leggenda.&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2Fy6f3-R9YMsgC&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=Gabriel+Garc%C3%ADa+M%C3%A1rquez&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.0&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fmarket.android.com%2Fdetails%3Fid%3Dbook-y6f3-R9YMsgC&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=2.27.29.0.preview.3&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=Grandezza+e+decadenza+della+citt%C3%A0+di+Macondo+e+della+famiglia+Buendia%2C+in+una+successione+appassionante+di+avvenimenti+favolosi+e+grotteschi+tra+cronistoria+e+leggenda.&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dy6f3-R9YMsgC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dy6f3-R9YMsgC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9788852011498&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=8852011498&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dy6f3-R9YMsgC%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=420&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3Dy6f3-R9YMsgC%26printsec%3Dfrontcover%26dq%3Dcent%2527anni%2Bdi%2Bsolitudine%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2010-10-07&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Edizioni+Mondadori&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=8&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Cent%27anni+di+solitudine&book%5Blist_type%5D=0" for 127.0.0.1 at 2018-06-12 19:05:33 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"f9BUYmIk2vrUqezgFnfFbk+x9oNYOMhK18cw3KAIuy6V/d8FHR9Fj/NCPOu2PIZgtNJ7t2dsWJ8uNtFIzRP7ow==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"acsTokenLink"=>"http://books.google.it/books/download/Cent_anni_di_solitudine-sample-epub.acsm?id=y6f3-R9YMsgC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "pdf"=>{"acsTokenLink"=>"http://books.google.it/books/download/Cent_anni_di_solitudine-sample-pdf.acsm?id=y6f3-R9YMsgC&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=y6f3-R9YMsgC&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"324CUMiMaYM", "id"=>"y6f3-R9YMsgC", "kind"=>"books#volume", "saleInfo"=>{"buyLink"=>"https://play.google.com/store/books/details?id=y6f3-R9YMsgC&rdid=book-y6f3-R9YMsgC&rdot=1&source=gbs_api", "country"=>"IT", "isEbook"=>"true", "listPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "offers"=>[{"finskyOfferType"=>"1", "listPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}, "retailPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}}], "retailPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "saleability"=>"FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"Grandezza e decadenza della cittÃ  di Macondo e della famiglia Buendia, in una successione appassionante di avvenimenti favolosi e grotteschi tra cronistoria e leggenda."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/y6f3-R9YMsgC", "volumeInfo"=>{"allowAnonLogging"=>"true", "authors"=>["Gabriel GarcÃ­a MÃ¡rquez"], "averageRating"=>"4.0", "canonicalVolumeLink"=>"https://market.android.com/details?id=book-y6f3-R9YMsgC", "categories"=>["Fiction"], "contentVersion"=>"2.27.29.0.preview.3", "description"=>"Grandezza e decadenza della cittÃ  di Macondo e della famiglia Buendia, in una successione appassionante di avvenimenti favolosi e grotteschi tra cronistoria e leggenda.", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=y6f3-R9YMsgC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=y6f3-R9YMsgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9788852011498", "type"=>"ISBN_13"}, {"identifier"=>"8852011498", "type"=>"ISBN_10"}], "infoLink"=>"https://play.google.com/store/books/details?id=y6f3-R9YMsgC&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"420", "previewLink"=>"http://books.google.it/books?id=y6f3-R9YMsgC&printsec=frontcover&dq=cent%27anni+di+solitudine&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2010-10-07", "publisher"=>"Edizioni Mondadori", "ratingsCount"=>"8", "readingModes"=>{"image"=>"true", "text"=>"true"}, "title"=>"Cent'anni di solitudine"}}, "list_type"=>"0"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 4], ["google_id", "y6f3-R9YMsgC"], ["list_type", 0]]
Redirected to http://localhost:3000/users/profile/4
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: 1ef4aae1-5271-412d-9f1f-43f9eda44894) to Async(default)
[ActiveJob] [CreateNotificationsJob] [1ef4aae1-5271-412d-9f1f-43f9eda44894] Performing CreateNotificationsJob (Job ID: 1ef4aae1-5271-412d-9f1f-43f9eda44894) from Async(default)
Completed 302 Found in 7ms (ActiveRecord: 1.4ms)


[ActiveJob] [CreateNotificationsJob] [1ef4aae1-5271-412d-9f1f-43f9eda44894] Error performing CreateNotificationsJob (Job ID: 1ef4aae1-5271-412d-9f1f-43f9eda44894) from Async(default) in 1.34ms: NoMethodError (undefined method `book_title' for nil:NilClass):
/Users/flavia/Desktop/PROGETTO/flealibrary/app/jobs/create_notifications_job.rb:7:in `perform'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activejob-5.1.6/lib/active_job/execution.rb:37:in `block in perform_now'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/i18n-1.0.1/lib/i18n.rb:284:in `with_locale'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activejob-5.1.6/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `instance_exec'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activejob-5.1.6/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/notifications.rb:166:in `block in instrument'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/notifications.rb:166:in `instrument'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activejob-5.1.6/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activejob-5.1.6/lib/active_job/logging.rb:44:in `block in tag_logger'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:26:in `tagged'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `tagged'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activejob-5.1.6/lib/active_job/logging.rb:44:in `tag_logger'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activejob-5.1.6/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `instance_exec'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:135:in `run_callbacks'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activejob-5.1.6/lib/active_job/execution.rb:33:in `perform_now'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activejob-5.1.6/lib/active_job/execution.rb:22:in `block in execute'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activejob-5.1.6/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:85:in `wrap'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/reloader.rb:68:in `block in wrap'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:85:in `wrap'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/reloader.rb:67:in `wrap'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activejob-5.1.6/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `instance_exec'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:135:in `run_callbacks'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activejob-5.1.6/lib/active_job/execution.rb:20:in `execute'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/activejob-5.1.6/lib/active_job/queue_adapters/async_adapter.rb:68:in `perform'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:348:in `run_task'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:337:in `block (3 levels) in create_worker'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `loop'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `block (2 levels) in create_worker'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `catch'
/Users/flavia/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `block in create_worker'
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 19:05:33 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (8.2ms)
  Rendered home/_chats_index.html.erb (1.1ms)
  Rendered home/profile.html.erb within layouts/application (16.7ms)
Completed 200 OK in 65ms (Views: 54.9ms | ActiveRecord: 4.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:33 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:05:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:05:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:06:02 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:06:02 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:07:35 +0200
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:07:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=gomorra&commit=Search" for 127.0.0.1 at 2018-06-12 19:07:39 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["gomorra"], "commit"=>"Search"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (49.0ms)
Completed 200 OK in 1327ms (Views: 376.0ms | ActiveRecord: 9.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:07:41 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:07:41 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:07:41 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FGomorra-sample-epub.acsm%3Fid%3Dm-KftFxpQk8C%26format%3Depub%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FGomorra-sample-pdf.acsm%3Fid%3Dm-KftFxpQk8C%26format%3Dpdf%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3Dm-KftFxpQk8C%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=WQNI1zPWEXg&book%5Bid%5D%5Bid%5D=m-KftFxpQk8C&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5BbuyLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dm-KftFxpQk8C%26rdid%3Dbook-m-KftFxpQk8C%26rdot%3D1%26source%3Dgbs_api&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=true&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BfinskyOfferType%5D=1&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=Roberto+Saviano+racconta+la+camorra+come+nessuno+aveva+mai+fatto+prima%2C+unendo+il+rigore+del+ricercatore%2C+il+coraggio+del+giornalista+d%26%2339%3Binchiesta%2C+la+passione+dello+scrittore+e%2C+soprattutto%2C+l%26%2339%3Bamore+doloroso+per+una+citt%C3%A0+da+parte+di+chi+...&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2Fm-KftFxpQk8C&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=Roberto+Saviano&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.5&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fmarket.android.com%2Fdetails%3Fid%3Dbook-m-KftFxpQk8C&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=2.16.18.0.preview.3&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=Roberto+Saviano+racconta+la+camorra+come+nessuno+aveva+mai+fatto+prima%2C+unendo+il+rigore+del+ricercatore%2C+il+coraggio+del+giornalista+d%27inchiesta%2C+la+passione+dello+scrittore+e%2C+soprattutto%2C+l%27amore+doloroso+per+una+citt%C3%A0+da+parte+di+chi+vi+%C3%A8+nato+e+cresciuto.&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dm-KftFxpQk8C%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dm-KftFxpQk8C%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9788852016110&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=8852016112&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dm-KftFxpQk8C%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=406&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3Dm-KftFxpQk8C%26printsec%3Dfrontcover%26dq%3Dgomorra%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2010-10-07&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Edizioni+Mondadori&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=14&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Gomorra&book%5Blist_type%5D=0" for 127.0.0.1 at 2018-06-12 19:07:43 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"YfAhK4b6MYcUB0MCoUc7cvjpNnvInMXl1hcX39Ndwn2L3apM+cGu8jPskwkBDHh8A4q7T/fIVTAv5vZLvkaC8A==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"acsTokenLink"=>"http://books.google.it/books/download/Gomorra-sample-epub.acsm?id=m-KftFxpQk8C&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "pdf"=>{"acsTokenLink"=>"http://books.google.it/books/download/Gomorra-sample-pdf.acsm?id=m-KftFxpQk8C&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=m-KftFxpQk8C&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"WQNI1zPWEXg", "id"=>"m-KftFxpQk8C", "kind"=>"books#volume", "saleInfo"=>{"buyLink"=>"https://play.google.com/store/books/details?id=m-KftFxpQk8C&rdid=book-m-KftFxpQk8C&rdot=1&source=gbs_api", "country"=>"IT", "isEbook"=>"true", "listPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "offers"=>[{"finskyOfferType"=>"1", "listPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}, "retailPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}}], "retailPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "saleability"=>"FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"Roberto Saviano racconta la camorra come nessuno aveva mai fatto prima, unendo il rigore del ricercatore, il coraggio del giornalista d&#39;inchiesta, la passione dello scrittore e, soprattutto, l&#39;amore doloroso per una cittÃ  da parte di chi ..."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/m-KftFxpQk8C", "volumeInfo"=>{"allowAnonLogging"=>"true", "authors"=>["Roberto Saviano"], "averageRating"=>"4.5", "canonicalVolumeLink"=>"https://market.android.com/details?id=book-m-KftFxpQk8C", "categories"=>["Fiction"], "contentVersion"=>"2.16.18.0.preview.3", "description"=>"Roberto Saviano racconta la camorra come nessuno aveva mai fatto prima, unendo il rigore del ricercatore, il coraggio del giornalista d'inchiesta, la passione dello scrittore e, soprattutto, l'amore doloroso per una cittÃ  da parte di chi vi Ã¨ nato e cresciuto.", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=m-KftFxpQk8C&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=m-KftFxpQk8C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9788852016110", "type"=>"ISBN_13"}, {"identifier"=>"8852016112", "type"=>"ISBN_10"}], "infoLink"=>"https://play.google.com/store/books/details?id=m-KftFxpQk8C&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"406", "previewLink"=>"http://books.google.it/books?id=m-KftFxpQk8C&printsec=frontcover&dq=gomorra&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2010-10-07", "publisher"=>"Edizioni Mondadori", "ratingsCount"=>"14", "readingModes"=>{"image"=>"true", "text"=>"true"}, "title"=>"Gomorra"}}, "list_type"=>"0"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.9ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 4], ["google_id", "m-KftFxpQk8C"], ["list_type", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 0], ["book_title", "Gomorra"], ["book_authors", "[\"Roberto Saviano\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=m-KftFxpQk8C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"], ["publisher", "Edizioni Mondadori"], ["identifier", "[\"ISBN_13\", \"9788852016110\"]"], ["user_id", 4], ["created_at", "2018-06-12 17:07:43.481914"], ["updated_at", "2018-06-12 17:07:43.481914"], ["google_id", "m-KftFxpQk8C"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/4
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: b8f69d26-e769-432a-a02e-9565662fb85e) to Async(default) with arguments: #<GlobalID:0x00007fec88f98a68 @uri=#<URI::GID gid://flealibrary/Ad/2>>
Completed 302 Found in 94ms (ActiveRecord: 10.5ms)


  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [b8f69d26-e769-432a-a02e-9565662fb85e] Performing CreateNotificationsJob (Job ID: b8f69d26-e769-432a-a02e-9565662fb85e) from Async(default) with arguments: #<GlobalID:0x00007fec8a02a1d8 @uri=#<URI::GID gid://flealibrary/Ad/2>>
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 19:07:43 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
[ActiveJob] [CreateNotificationsJob] [b8f69d26-e769-432a-a02e-9565662fb85e]   [1m[36mAd Load (0.9ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'gomorra' AND id != 2)[0m
[ActiveJob] [CreateNotificationsJob] [b8f69d26-e769-432a-a02e-9565662fb85e] Performed CreateNotificationsJob (Job ID: b8f69d26-e769-432a-a02e-9565662fb85e) from Async(default) in 13.49ms
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (44.3ms)
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (58.4ms)
Completed 200 OK in 113ms (Views: 71.7ms | ActiveRecord: 27.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:07:43 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:07:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:07:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:08:42 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:08:42 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
>>>>>>> test_rspec
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (156.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (153.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "notifications_counter" integer DEFAULT 0)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.5ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (7.1ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAds (5)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "ads" ("id" bigserial primary key, "list_type" integer, "book_title" character varying, "book_authors" character varying, "link_to_coverbook" character varying, "publisher" character varying, "identifier" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_ads_on_user_id" ON "ads"  ("user_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "ads" ADD CONSTRAINT "fk_rails_400d8fa7ce"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "5"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGoogleIdToAds (8)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ads" ADD "google_id" character varying[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "8"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLocateOptionToUsers (9)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "cap" character varying NOT NULL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "radius" character varying NOT NULL[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "9"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFavourites (10)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "favourites" ("id" bigserial primary key, "user_id" bigint, "ad_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_user_id" ON "favourites"  ("user_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_ad_id" ON "favourites"  ("ad_id")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "10"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNotifications (11)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "user_id" bigint, "ad_id" bigint, "displayed" integer)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_user_id" ON "notifications"  ("user_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_ad_id" ON "notifications"  ("ad_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_b080fb4855"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_5b4eb0e1e4"
FOREIGN KEY ("ad_id")
  REFERENCES "ads" ("id")
[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "11"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-12 17:44:56.195941"], ["updated_at", "2018-06-12 17:44:56.195941"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$yZO.fW1pXx80aTNqYMi2HeE.rKJp91dqsuT6KULPXOzEBh8GTa76O"], ["created_at", "2018-06-12 17:44:59.357880"], ["updated_at", "2018-06-12 17:44:59.357880"], ["role", "superadmin"], ["cap", "00184"], ["radius", "10"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$W6chKkWTGBkdGm9hDGwEhuGlX3WJKa5bGUnxehw6x/HDwENzWclSK"], ["created_at", "2018-06-12 17:44:59.492528"], ["updated_at", "2018-06-12 17:44:59.492528"], ["role", "admin"], ["cap", "00123"], ["radius", "10"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$1BeDMbu/7IVGlviehMfil.QDcPb94F2/Z79u93pTP2FBIzJlg/e/2"], ["created_at", "2018-06-12 17:44:59.625796"], ["updated_at", "2018-06-12 17:44:59.625796"], ["role", "admin"], ["cap", "00015"], ["radius", "10"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$c0PCQeCLTunodHWI83ak6uE95OJcSViPx1Z122ytUXrahaCfWVyr6"], ["created_at", "2018-06-12 17:44:59.766704"], ["updated_at", "2018-06-12 17:44:59.766704"], ["role", "admin"], ["cap", "00015"], ["radius", "10"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 17:44:59.793775"], ["updated_at", "2018-06-12 17:44:59.793775"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 17:44:59.810008"], ["updated_at", "2018-06-12 17:44:59.810008"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-12 17:44:59.812899"], ["updated_at", "2018-06-12 17:44:59.812899"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 17:44:59.815208"], ["updated_at", "2018-06-12 17:44:59.815208"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 17:44:59.817581"], ["updated_at", "2018-06-12 17:44:59.817581"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-12 17:44:59.819749"], ["updated_at", "2018-06-12 17:44:59.819749"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2018-06-12 19:51:43 +0200
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (5.4ms)
  Rendered home/welcome.html.erb within layouts/application (17.4ms)
Completed 200 OK in 620ms (Views: 561.6ms | ActiveRecord: 13.6ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:51:44 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:51:44 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/ads_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 19:51:48 +0200
Processing by HomeController#ads_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
  [1m[35m (8.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "ads" WHERE (book_title iLIKE'%%')[0m
Redirected to http://localhost:3000/
Completed 302 Found in 14ms (ActiveRecord: 8.5ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 19:51:48 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (3.2ms)
  Rendered home/welcome.html.erb within layouts/application (6.4ms)
Completed 200 OK in 47ms (Views: 42.5ms | ActiveRecord: 0.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:51:48 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:51:48 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:51:48 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 19:51:50 +0200
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
Completed 401 Unauthorized in 11ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 19:51:50 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (6.2ms)
Completed 200 OK in 55ms (Views: 52.6ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:51:50 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:51:50 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:51:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 19:51:52 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (2.2ms)
  Rendered home/welcome.html.erb within layouts/application (5.2ms)
Completed 200 OK in 48ms (Views: 42.9ms | ActiveRecord: 0.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:51:52 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:51:52 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:51:52 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 19:51:55 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 50ms (Views: 48.3ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:51:55 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:51:55 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:51:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 19:51:59 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"h2F3+zfDnVvhnVOFEfOWh7lg1yL9z5DBsWnE9a988NttTPycSPgCLsZ2g46xuNWJQgNaFsKbABRImCVhwmewVg==", "user"=>{"email"=>"dante@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-12 17:51:59.344724"], ["last_sign_in_at", "2018-06-12 17:51:59.344724"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-12 17:51:59.346107"], ["id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/1
Completed 302 Found in 167ms (ActiveRecord: 2.4ms)


Started GET "/users/profile/1" for 127.0.0.1 at 2018-06-12 19:51:59 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 1 OR guest_id = 1)[0m
  Rendered home/_chat.html.erb (5.3ms)
  Rendered home/_chats_index.html.erb (0.5ms)
  Rendered home/profile.html.erb within layouts/application (13.6ms)
Completed 200 OK in 70ms (Views: 55.4ms | ActiveRecord: 4.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:51:59 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:51:59 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:51:59 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_1
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 19:52:03 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/admin_panel.html.erb within layouts/application (5.2ms)
Completed 200 OK in 46ms (Views: 40.3ms | ActiveRecord: 1.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:52:03 +0200
MailboxChannel stopped streaming from mailbox_1
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:52:04 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:52:04 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 19:52:45 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/admin_panel.html.erb within layouts/application (3.6ms)
Completed 200 OK in 44ms (Views: 38.6ms | ActiveRecord: 1.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:52:45 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:52:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:52:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 19:54:27 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/admin_panel.html.erb within layouts/application (3.9ms)
Completed 200 OK in 49ms (Views: 44.2ms | ActiveRecord: 1.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:54:27 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:54:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:54:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/1" for 127.0.0.1 at 2018-06-12 19:54:44 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 1 OR guest_id = 1)[0m
  Rendered home/_chat.html.erb (1.6ms)
  Rendered home/_chats_index.html.erb (0.6ms)
  Rendered home/profile.html.erb within layouts/application (9.4ms)
Completed 200 OK in 60ms (Views: 48.3ms | ActiveRecord: 1.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:54:44 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:54:44 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:54:44 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_1
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-12 19:54:47 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"8LCNmBZw8fKBbDOa6Sm75J3ls3ZNoM6IxW115gEf+FiqKfvrgpR3q6wRBFb8Xxxrkl2myEj+lAhFyppTfauhxQ=="}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 10ms (ActiveRecord: 1.5ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 19:54:48 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (2.1ms)
  Rendered home/welcome.html.erb within layouts/application (6.3ms)
Completed 200 OK in 49ms (Views: 45.6ms | ActiveRecord: 0.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:54:48 +0200
MailboxChannel stopped streaming from mailbox_1
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:54:48 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:54:48 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 19:54:49 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (2.5ms)
Completed 200 OK in 72ms (Views: 70.2ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:54:49 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:54:49 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:54:49 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 19:54:54 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zmDEzEaNPnAU3zVan65d+dsGGM6IIvYYXDyT9EUD/l5yV3INR47GTZSd3GuX9tFnvbwrOk7ElOpO9qs+uxeFjA==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-12 17:54:54.636710"], ["last_sign_in_at", "2018-06-12 17:54:54.636710"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-12 17:54:54.637517"], ["id", 4]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/4
Completed 302 Found in 152ms (ActiveRecord: 3.0ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 19:54:54 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (48.7ms)
  Rendered home/_chats_index.html.erb (1.2ms)
  Rendered home/profile.html.erb within layouts/application (56.5ms)
Completed 200 OK in 96ms (Views: 79.7ms | ActiveRecord: 11.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:54:54 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:54:54 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:54:54 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-12 19:54:58 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/admin_panel.html.erb within layouts/application (3.2ms)
Completed 200 OK in 47ms (Views: 40.6ms | ActiveRecord: 1.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:54:58 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:54:58 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:54:58 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 19:55:00 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (8.1ms)
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (15.2ms)
Completed 200 OK in 66ms (Views: 55.3ms | ActiveRecord: 4.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:00 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:55:00 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:00 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=cent%27anni+di+solitudine&commit=Search" for 127.0.0.1 at 2018-06-12 19:55:03 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["cent'anni di solitudine"], "commit"=>"Search"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (29.9ms)
Completed 200 OK in 753ms (Views: 65.7ms | ActiveRecord: 1.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:03 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:55:04 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:04 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FCent_anni_di_solitudine-sample-epub.acsm%3Fid%3Dy6f3-R9YMsgC%26format%3Depub%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FCent_anni_di_solitudine-sample-pdf.acsm%3Fid%3Dy6f3-R9YMsgC%26format%3Dpdf%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3Dy6f3-R9YMsgC%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=324CUMiMaYM&book%5Bid%5D%5Bid%5D=y6f3-R9YMsgC&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5BbuyLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dy6f3-R9YMsgC%26rdid%3Dbook-y6f3-R9YMsgC%26rdot%3D1%26source%3Dgbs_api&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=true&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BfinskyOfferType%5D=1&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=Grandezza+e+decadenza+della+citt%C3%A0+di+Macondo+e+della+famiglia+Buendia%2C+in+una+successione+appassionante+di+avvenimenti+favolosi+e+grotteschi+tra+cronistoria+e+leggenda.&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2Fy6f3-R9YMsgC&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=Gabriel+Garc%C3%ADa+M%C3%A1rquez&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.0&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fmarket.android.com%2Fdetails%3Fid%3Dbook-y6f3-R9YMsgC&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=2.27.29.0.preview.3&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=Grandezza+e+decadenza+della+citt%C3%A0+di+Macondo+e+della+famiglia+Buendia%2C+in+una+successione+appassionante+di+avvenimenti+favolosi+e+grotteschi+tra+cronistoria+e+leggenda.&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dy6f3-R9YMsgC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dy6f3-R9YMsgC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9788852011498&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=8852011498&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dy6f3-R9YMsgC%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=420&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3Dy6f3-R9YMsgC%26printsec%3Dfrontcover%26dq%3Dcent%2527anni%2Bdi%2Bsolitudine%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2010-10-07&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Edizioni+Mondadori&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=8&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Cent%27anni+di+solitudine&book%5Blist_type%5D=0" for 127.0.0.1 at 2018-06-12 19:55:05 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"RwVQyDFYNdT2dkuyP0stqpI93WbMXfbJzNAQWeebbr8ludTN9VzNp72hCDz14U7599PJLos4IloPwgqt141GMQ==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"acsTokenLink"=>"http://books.google.it/books/download/Cent_anni_di_solitudine-sample-epub.acsm?id=y6f3-R9YMsgC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "pdf"=>{"acsTokenLink"=>"http://books.google.it/books/download/Cent_anni_di_solitudine-sample-pdf.acsm?id=y6f3-R9YMsgC&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=y6f3-R9YMsgC&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"324CUMiMaYM", "id"=>"y6f3-R9YMsgC", "kind"=>"books#volume", "saleInfo"=>{"buyLink"=>"https://play.google.com/store/books/details?id=y6f3-R9YMsgC&rdid=book-y6f3-R9YMsgC&rdot=1&source=gbs_api", "country"=>"IT", "isEbook"=>"true", "listPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "offers"=>[{"finskyOfferType"=>"1", "listPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}, "retailPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}}], "retailPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "saleability"=>"FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"Grandezza e decadenza della cittÃ  di Macondo e della famiglia Buendia, in una successione appassionante di avvenimenti favolosi e grotteschi tra cronistoria e leggenda."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/y6f3-R9YMsgC", "volumeInfo"=>{"allowAnonLogging"=>"true", "authors"=>["Gabriel GarcÃ­a MÃ¡rquez"], "averageRating"=>"4.0", "canonicalVolumeLink"=>"https://market.android.com/details?id=book-y6f3-R9YMsgC", "categories"=>["Fiction"], "contentVersion"=>"2.27.29.0.preview.3", "description"=>"Grandezza e decadenza della cittÃ  di Macondo e della famiglia Buendia, in una successione appassionante di avvenimenti favolosi e grotteschi tra cronistoria e leggenda.", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=y6f3-R9YMsgC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=y6f3-R9YMsgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9788852011498", "type"=>"ISBN_13"}, {"identifier"=>"8852011498", "type"=>"ISBN_10"}], "infoLink"=>"https://play.google.com/store/books/details?id=y6f3-R9YMsgC&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"420", "previewLink"=>"http://books.google.it/books?id=y6f3-R9YMsgC&printsec=frontcover&dq=cent%27anni+di+solitudine&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2010-10-07", "publisher"=>"Edizioni Mondadori", "ratingsCount"=>"8", "readingModes"=>{"image"=>"true", "text"=>"true"}, "title"=>"Cent'anni di solitudine"}}, "list_type"=>"0"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 4], ["google_id", "y6f3-R9YMsgC"], ["list_type", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 0], ["book_title", "Cent'anni di solitudine"], ["book_authors", "[\"Gabriel GarcÃ­a MÃ¡rquez\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=y6f3-R9YMsgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"], ["publisher", "Edizioni Mondadori"], ["identifier", "[\"ISBN_13\", \"9788852011498\"]"], ["user_id", 4], ["created_at", "2018-06-12 17:55:05.967867"], ["updated_at", "2018-06-12 17:55:05.967867"], ["google_id", "y6f3-R9YMsgC"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/4
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: dbcf85cc-72bd-470b-9acd-6d130af7d4dc) to Async(default) with arguments: #<GlobalID:0x00007fc67e1c83a0 @uri=#<URI::GID gid://flealibrary/Ad/1>>
Completed 302 Found in 60ms (ActiveRecord: 7.0ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 19:55:06 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mAd Load (1.6ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [dbcf85cc-72bd-470b-9acd-6d130af7d4dc] Performing CreateNotificationsJob (Job ID: dbcf85cc-72bd-470b-9acd-6d130af7d4dc) from Async(default) with arguments: #<GlobalID:0x00007fc679207e10 @uri=#<URI::GID gid://flealibrary/Ad/1>>
  [1m[36mMessage Load (1.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
[ActiveJob] [CreateNotificationsJob] [dbcf85cc-72bd-470b-9acd-6d130af7d4dc]   [1m[36mAd Load (1.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'cent''anni di solitudine' AND id != 1)[0m
[ActiveJob] [CreateNotificationsJob] [dbcf85cc-72bd-470b-9acd-6d130af7d4dc] Performed CreateNotificationsJob (Job ID: dbcf85cc-72bd-470b-9acd-6d130af7d4dc) from Async(default) in 2.3ms
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (9.4ms)
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (16.8ms)
Completed 200 OK in 65ms (Views: 55.9ms | ActiveRecord: 4.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:06 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:55:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-12 19:55:08 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.6ms)
  Rendered home/welcome.html.erb within layouts/application (7.2ms)
Completed 200 OK in 55ms (Views: 46.1ms | ActiveRecord: 3.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:09 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:55:09 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/ads_list?utf8=%E2%9C%93&search%5B%5D=&commit=Search" for 127.0.0.1 at 2018-06-12 19:55:11 +0200
Processing by HomeController#ads_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>[""], "commit"=>"Search"}
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "ads" WHERE (book_title iLIKE'%%')[0m
  Rendering home/ads_list.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (book_title iLIKE'%%')[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.9ms)
  Rendered home/ads_list.html.erb within layouts/application (8.5ms)
Completed 200 OK in 54ms (Views: 45.3ms | ActiveRecord: 2.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:11 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:55:11 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:11 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-12 19:55:14 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"WXOP+3/RW17klKadv2hd0uvuwc3bLkgZO/k774O/hEQ7zwv+u9WjLa9D5RN1wj6BjgDVhZxLnIr46yEbs6msyg=="}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 1.3ms)


Started GET "/" for 127.0.0.1 at 2018-06-12 19:55:14 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.3ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.2ms)
  Rendered home/welcome.html.erb within layouts/application (6.4ms)
Completed 200 OK in 46ms (Views: 42.2ms | ActiveRecord: 0.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:14 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:55:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 19:55:17 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (6.2ms)
Completed 200 OK in 57ms (Views: 55.7ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:17 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:55:18 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:18 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 19:55:21 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"PonEyoCRyMS1BfoV1JVpJPdGM2POBlViCC0FRbcUdqoH8xNOESs/cLHJvwfRESwGzcKp3ZG1Y3414L0m2azRwg==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-12 17:55:21.282105"], ["last_sign_in_at", "2018-06-12 17:55:21.282105"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-12 17:55:21.282882"], ["id", 3]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
Completed 302 Found in 151ms (ActiveRecord: 3.4ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 19:55:21 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (6.2ms)
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (13.1ms)
Completed 200 OK in 61ms (Views: 52.9ms | ActiveRecord: 2.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:21 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:55:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=cent%27anni+di+solitudine&commit=Search" for 127.0.0.1 at 2018-06-12 19:55:24 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["cent'anni di solitudine"], "commit"=>"Search"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (29.8ms)
Completed 200 OK in 521ms (Views: 65.7ms | ActiveRecord: 1.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:25 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:55:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FCent_anni_di_solitudine-sample-epub.acsm%3Fid%3Dy6f3-R9YMsgC%26format%3Depub%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FCent_anni_di_solitudine-sample-pdf.acsm%3Fid%3Dy6f3-R9YMsgC%26format%3Dpdf%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3Dy6f3-R9YMsgC%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=324CUMiMaYM&book%5Bid%5D%5Bid%5D=y6f3-R9YMsgC&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5BbuyLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dy6f3-R9YMsgC%26rdid%3Dbook-y6f3-R9YMsgC%26rdot%3D1%26source%3Dgbs_api&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=true&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BfinskyOfferType%5D=1&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=Grandezza+e+decadenza+della+citt%C3%A0+di+Macondo+e+della+famiglia+Buendia%2C+in+una+successione+appassionante+di+avvenimenti+favolosi+e+grotteschi+tra+cronistoria+e+leggenda.&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2Fy6f3-R9YMsgC&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=Gabriel+Garc%C3%ADa+M%C3%A1rquez&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.0&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fmarket.android.com%2Fdetails%3Fid%3Dbook-y6f3-R9YMsgC&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=2.27.29.0.preview.3&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=Grandezza+e+decadenza+della+citt%C3%A0+di+Macondo+e+della+famiglia+Buendia%2C+in+una+successione+appassionante+di+avvenimenti+favolosi+e+grotteschi+tra+cronistoria+e+leggenda.&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dy6f3-R9YMsgC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3Dy6f3-R9YMsgC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9788852011498&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=8852011498&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3Dy6f3-R9YMsgC%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=420&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3Dy6f3-R9YMsgC%26printsec%3Dfrontcover%26dq%3Dcent%2527anni%2Bdi%2Bsolitudine%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2010-10-07&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Edizioni+Mondadori&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=8&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Cent%27anni+di+solitudine&book%5Blist_type%5D=1" for 127.0.0.1 at 2018-06-12 19:55:27 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"lDuVwCKmPshtWg3Arn8O4gz73t2O7pZ++jqnxmh9XznMYYyH1GXUeQFaB5XbM7iN3kXAZihK9Bo31OVrNYjRKA==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"acsTokenLink"=>"http://books.google.it/books/download/Cent_anni_di_solitudine-sample-epub.acsm?id=y6f3-R9YMsgC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "pdf"=>{"acsTokenLink"=>"http://books.google.it/books/download/Cent_anni_di_solitudine-sample-pdf.acsm?id=y6f3-R9YMsgC&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=y6f3-R9YMsgC&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"324CUMiMaYM", "id"=>"y6f3-R9YMsgC", "kind"=>"books#volume", "saleInfo"=>{"buyLink"=>"https://play.google.com/store/books/details?id=y6f3-R9YMsgC&rdid=book-y6f3-R9YMsgC&rdot=1&source=gbs_api", "country"=>"IT", "isEbook"=>"true", "listPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "offers"=>[{"finskyOfferType"=>"1", "listPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}, "retailPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}}], "retailPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "saleability"=>"FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"Grandezza e decadenza della cittÃ  di Macondo e della famiglia Buendia, in una successione appassionante di avvenimenti favolosi e grotteschi tra cronistoria e leggenda."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/y6f3-R9YMsgC", "volumeInfo"=>{"allowAnonLogging"=>"true", "authors"=>["Gabriel GarcÃ­a MÃ¡rquez"], "averageRating"=>"4.0", "canonicalVolumeLink"=>"https://market.android.com/details?id=book-y6f3-R9YMsgC", "categories"=>["Fiction"], "contentVersion"=>"2.27.29.0.preview.3", "description"=>"Grandezza e decadenza della cittÃ  di Macondo e della famiglia Buendia, in una successione appassionante di avvenimenti favolosi e grotteschi tra cronistoria e leggenda.", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=y6f3-R9YMsgC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=y6f3-R9YMsgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9788852011498", "type"=>"ISBN_13"}, {"identifier"=>"8852011498", "type"=>"ISBN_10"}], "infoLink"=>"https://play.google.com/store/books/details?id=y6f3-R9YMsgC&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"420", "previewLink"=>"http://books.google.it/books?id=y6f3-R9YMsgC&printsec=frontcover&dq=cent%27anni+di+solitudine&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2010-10-07", "publisher"=>"Edizioni Mondadori", "ratingsCount"=>"8", "readingModes"=>{"image"=>"true", "text"=>"true"}, "title"=>"Cent'anni di solitudine"}}, "list_type"=>"1"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 3], ["google_id", "y6f3-R9YMsgC"], ["list_type", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 1], ["book_title", "Cent'anni di solitudine"], ["book_authors", "[\"Gabriel GarcÃ­a MÃ¡rquez\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=y6f3-R9YMsgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"], ["publisher", "Edizioni Mondadori"], ["identifier", "[\"ISBN_13\", \"9788852011498\"]"], ["user_id", 3], ["created_at", "2018-06-12 17:55:27.157277"], ["updated_at", "2018-06-12 17:55:27.157277"], ["google_id", "y6f3-R9YMsgC"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: 3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9) to Async(default) with arguments: #<GlobalID:0x00007fc67d32e150 @uri=#<URI::GID gid://flealibrary/Ad/2>>
Completed 302 Found in 19ms (ActiveRecord: 3.4ms)


  [1m[36mAd Load (1.1ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9] Performing CreateNotificationsJob (Job ID: 3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9) from Async(default) with arguments: #<GlobalID:0x00007fc67d31c338 @uri=#<URI::GID gid://flealibrary/Ad/2>>
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[36mAd Load (0.9ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'cent''anni di solitudine' AND id != 2)[0m
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 19:55:27 +0200
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (2.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "notifications" ("created_at", "updated_at", "user_id", "ad_id", "displayed") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 17:55:27.208923"], ["updated_at", "2018-06-12 17:55:27.208923"], ["user_id", 3], ["ad_id", 1], ["displayed", 0]]
  Rendered home/_chat.html.erb (15.4ms)
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  Rendered home/_chats_index.html.erb (1.1ms)
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/profile.html.erb within layouts/application (24.3ms)
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "notifications" ("created_at", "updated_at", "user_id", "ad_id", "displayed") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 17:55:27.221529"], ["updated_at", "2018-06-12 17:55:27.221529"], ["user_id", 4], ["ad_id", 2], ["displayed", 0]]
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 1], ["updated_at", "2018-06-12 17:55:27.231749"], ["id", 3]]
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[36mUser Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 1], ["updated_at", "2018-06-12 17:55:27.250895"], ["id", 4]]
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9]   [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9] [ActionCable] Broadcasting to mailbox_3: {:type=>"new_notification"}
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9] [ActionCable] Broadcasting to mailbox_4: {:type=>"new_notification"}
[ActiveJob] [CreateNotificationsJob] [3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9] Performed CreateNotificationsJob (Job ID: 3c0f8ec4-075d-4c19-b3f5-4b2d1d39cda9) from Async(default) in 90.8ms
Completed 200 OK in 101ms (Views: 89.3ms | ActiveRecord: 5.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:27 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:55:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/" for 127.0.0.1 at 2018-06-12 19:55:29 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.2ms)
  Rendered home/welcome.html.erb within layouts/application (4.9ms)
Completed 200 OK in 821ms (Views: 44.3ms | ActiveRecord: 2.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:29 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:55:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 19:55:38 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.5ms)
  Rendered home/_chats_index.html.erb (0.8ms)
  Rendered home/profile.html.erb within layouts/application (14.9ms)
Completed 200 OK in 60ms (Views: 50.8ms | ActiveRecord: 3.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:38 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:55:38 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:38 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/" for 127.0.0.1 at 2018-06-12 19:55:40 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.7ms)
  Rendered home/welcome.html.erb within layouts/application (4.6ms)
Completed 200 OK in 183ms (Views: 38.3ms | ActiveRecord: 2.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:40 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:55:40 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:55:40 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 19:56:10 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.8ms)
  Rendered home/welcome.html.erb within layouts/application (5.1ms)
Completed 200 OK in 236ms (Views: 54.8ms | ActiveRecord: 1.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:56:10 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:56:10 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:56:10 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 19:56:13 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.6ms)
  Rendered home/welcome.html.erb within layouts/application (4.5ms)
Completed 200 OK in 204ms (Views: 40.6ms | ActiveRecord: 1.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:56:13 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:56:13 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:56:13 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 19:56:18 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  Rendered home/profile.html.erb within layouts/application (2.2ms)
Completed 200 OK in 57ms (Views: 45.3ms | ActiveRecord: 1.6ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 19:56:21 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.1ms)
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (16.6ms)
Completed 200 OK in 62ms (Views: 51.7ms | ActiveRecord: 3.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:56:21 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:56:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:56:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/" for 127.0.0.1 at 2018-06-12 19:56:23 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.6ms)
  Rendered home/welcome.html.erb within layouts/application (4.4ms)
Completed 200 OK in 207ms (Views: 41.4ms | ActiveRecord: 2.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:56:24 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:56:24 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:56:24 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:57:27 +0200
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:57:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 19:57:30 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.4ms)
  Rendered home/welcome.html.erb within layouts/application (12.9ms)
Completed 200 OK in 612ms (Views: 364.7ms | ActiveRecord: 16.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:57:31 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:57:31 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:57:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 19:58:05 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (5.9ms)
  Rendered home/welcome.html.erb within layouts/application (8.9ms)
Completed 200 OK in 51ms (Views: 41.1ms | ActiveRecord: 1.3ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:58:05 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:58:05 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 19:58:09 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (20.1ms)
Completed 200 OK in 83ms (Views: 80.3ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:58:09 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:58:09 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:58:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 19:58:16 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"1hbaOnwhWRXE/Mvba/xAUKs1qe3LWVuibmOavNB1vtFfc6TiYrvnVTjKwUtK/mZ6DQAQtSdk9qk90Sk1MEGbdw==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2018-06-12 17:58:17.072950"], ["sign_in_count", 2], ["updated_at", "2018-06-12 17:58:17.075096"], ["id", 3]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
Completed 302 Found in 171ms (ActiveRecord: 3.8ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 19:58:17 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (51.1ms)
  Rendered home/_chats_index.html.erb (0.8ms)
  Rendered home/profile.html.erb within layouts/application (59.3ms)
Completed 200 OK in 103ms (Views: 81.5ms | ActiveRecord: 14.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:58:17 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:58:17 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:58:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/" for 127.0.0.1 at 2018-06-12 19:58:18 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.7ms)
  Rendered home/welcome.html.erb within layouts/application (5.8ms)
Completed 200 OK in 221ms (Views: 43.2ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:58:18 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:58:18 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:58:18 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 19:58:51 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.0ms)
  Rendered home/welcome.html.erb within layouts/application (5.6ms)
Completed 200 OK in 193ms (Views: 47.6ms | ActiveRecord: 1.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:58:51 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:58:51 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:58:51 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:59:06 +0200
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:59:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 19:59:09 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.4ms)
  Rendered home/welcome.html.erb within layouts/application (12.3ms)
Completed 200 OK in 600ms (Views: 359.0ms | ActiveRecord: 15.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:59:10 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:59:10 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:59:10 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:59:11 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:59:11 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 19:59:13 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (1.6ms)
  Rendered home/welcome.html.erb within layouts/application (4.8ms)
Completed 200 OK in 237ms (Views: 37.1ms | ActiveRecord: 1.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:59:13 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 19:59:13 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 19:59:13 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 20:01:52 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.1ms)
  Rendered home/welcome.html.erb within layouts/application (5.2ms)
Completed 200 OK in 559ms (Views: 48.4ms | ActiveRecord: 1.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:01:53 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:01:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:01:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/create_chat" for 127.0.0.1 at 2018-06-12 20:01:54 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 18:01:54.385963"], ["updated_at", "2018-06-12 18:01:54.385963"], ["owner_id", 3], ["guest_id", 4]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_4: {:type=>"create_chat"}
Completed 200 OK in 37ms (Views: 0.6ms | ActiveRecord: 10.2ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 20:01:58 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (36.6ms)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (3.2ms)
  Rendered home/profile.html.erb within layouts/application (48.6ms)
Completed 200 OK in 94ms (Views: 75.1ms | ActiveRecord: 10.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:01:59 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:01:59 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:01:59 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (7.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (216.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (194.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (13.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "notifications_counter" integer DEFAULT 0)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (6.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.5ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (24.5ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.0ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (4.4ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAds (5)
  [1m[35m (18.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "ads" ("id" bigserial primary key, "list_type" integer, "book_title" character varying, "book_authors" character varying, "link_to_coverbook" character varying, "publisher" character varying, "identifier" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_ads_on_user_id" ON "ads"  ("user_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "ads" ADD CONSTRAINT "fk_rails_400d8fa7ce"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "5"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (6.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGoogleIdToAds (8)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ads" ADD "google_id" character varying[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "8"]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLocateOptionToUsers (9)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "users" ADD "cap" character varying NOT NULL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "radius" character varying NOT NULL[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "9"]]
  [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFavourites (10)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE "favourites" ("id" bigserial primary key, "user_id" bigint, "ad_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_user_id" ON "favourites"  ("user_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_ad_id" ON "favourites"  ("ad_id")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "10"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNotifications (11)
  [1m[35m (5.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.0ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "user_id" bigint, "ad_id" bigint, "displayed" integer)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_user_id" ON "notifications"  ("user_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_ad_id" ON "notifications"  ("ad_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_b080fb4855"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_5b4eb0e1e4"
FOREIGN KEY ("ad_id")
  REFERENCES "ads" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "11"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-12 18:07:11.696889"], ["updated_at", "2018-06-12 18:07:11.696889"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$TTUS3sdq/H9nb2HUDGe5Tu3WnvKnajL1V8ziLusqr6R1KEvrs9y0a"], ["created_at", "2018-06-12 18:07:16.729618"], ["updated_at", "2018-06-12 18:07:16.729618"], ["role", "superadmin"], ["cap", "00184"], ["radius", "10"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$mxifJMR1W2gUCfepGsBa5.7179bBrQXZqHKua2iB5KaMPQEWgP7wy"], ["created_at", "2018-06-12 18:07:16.932858"], ["updated_at", "2018-06-12 18:07:16.932858"], ["role", "admin"], ["cap", "00123"], ["radius", "10"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$J8dK.KidyGu36MC7PAaTUOFiHdhz4XWvXb8lUSytEerwHKxcJyoEu"], ["created_at", "2018-06-12 18:07:17.133571"], ["updated_at", "2018-06-12 18:07:17.133571"], ["role", "admin"], ["cap", "00015"], ["radius", "10"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$QilJmoEoRUZ3PiX18.4X9.S0qEa.6aPD9Pek90Q30AK.Mb4fJKi4u"], ["created_at", "2018-06-12 18:07:17.328132"], ["updated_at", "2018-06-12 18:07:17.328132"], ["role", "admin"], ["cap", "00015"], ["radius", "10"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 18:07:17.361630"], ["updated_at", "2018-06-12 18:07:17.361630"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 18:07:17.388073"], ["updated_at", "2018-06-12 18:07:17.388073"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-12 18:07:17.397897"], ["updated_at", "2018-06-12 18:07:17.397897"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 18:07:17.402104"], ["updated_at", "2018-06-12 18:07:17.402104"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 18:07:17.406191"], ["updated_at", "2018-06-12 18:07:17.406191"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-12 18:07:17.409967"], ["updated_at", "2018-06-12 18:07:17.409967"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2018-06-12 20:13:32 +0200
  [1m[35m (9.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.9ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (8.5ms)
  Rendered home/welcome.html.erb within layouts/application (27.1ms)
Completed 200 OK in 2335ms (Views: 2289.9ms | ActiveRecord: 3.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:13:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:13:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 20:13:39 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (58.8ms)
Completed 200 OK in 182ms (Views: 113.6ms | ActiveRecord: 6.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:13:39 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:13:39 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:13:39 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 20:13:42 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"XSFT0fYX+8De3B/mY42CQLiVcnB3cNJMueocirXg0WgLa3zxWcX0imyMeaqWwYRtQmrBa1LlQoL/y0lThp580Q==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-12 18:13:42.964073"], ["last_sign_in_at", "2018-06-12 18:13:42.964073"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-12 18:13:42.966444"], ["id", 2]]
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 254ms (ActiveRecord: 10.7ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-12 20:13:43 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (72.1ms)
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (84.5ms)
Completed 200 OK in 165ms (Views: 134.1ms | ActiveRecord: 14.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:13:43 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:13:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:13:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-12 20:14:43 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (4.4ms)
  Rendered home/welcome.html.erb within layouts/application (9.1ms)
Completed 200 OK in 116ms (Views: 111.2ms | ActiveRecord: 0.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:14:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:14:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 20:14:53 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.7ms)
Completed 200 OK in 67ms (Views: 65.5ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:14:53 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:14:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:14:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 20:14:59 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"98ur2eKM3jSM6/xmpTweE7Nk5HFcVOG7p+S/fRuXOSCcCKQgEjzUHOlwbJqlA9U5iP5j+0VJmSRSvfRvI7HMOA==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-12 18:14:59.878178"], ["last_sign_in_at", "2018-06-12 18:14:59.878178"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-12 18:14:59.879278"], ["id", 3]]
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/3
Completed 302 Found in 200ms (ActiveRecord: 10.1ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 20:14:59 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (9.5ms)
  Rendered home/_chats_index.html.erb (2.2ms)
  Rendered home/profile.html.erb within layouts/application (22.3ms)
Completed 200 OK in 85ms (Views: 73.1ms | ActiveRecord: 3.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:15:00 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:15:00 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:15:00 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/" for 127.0.0.1 at 2018-06-12 20:15:33 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (5.4ms)
  Rendered home/welcome.html.erb within layouts/application (11.7ms)
Completed 200 OK in 99ms (Views: 94.3ms | ActiveRecord: 0.6ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:15:34 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:15:34 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:15:37 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-12 20:15:37 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.7ms)
Completed 200 OK in 67ms (Views: 63.0ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:15:37 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:15:37 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:15:51 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-12 20:15:51 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"xmWc3Amh9VE06QQZaxM3YenO3Za3982WcuKOvwYczzG7Ro0QRl5L/PfU0SrGPPtpt8jDpEOyr++uU16DFx1FFg==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-12 18:15:51.885365"], ["last_sign_in_at", "2018-06-12 18:15:51.885365"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-12 18:15:51.888245"], ["id", 4]]
  [1m[35m (8.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 262ms (ActiveRecord: 10.8ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 20:15:51 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (13.7ms)
  Rendered home/_chats_index.html.erb (2.6ms)
  Rendered home/profile.html.erb within layouts/application (27.0ms)
Completed 200 OK in 98ms (Views: 85.8ms | ActiveRecord: 4.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:15:52 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:15:52 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-12 20:16:01 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (15.6ms)
  Rendered home/_chats_index.html.erb (4.7ms)
  Rendered home/profile.html.erb within layouts/application (28.8ms)
Completed 200 OK in 86ms (Views: 74.1ms | ActiveRecord: 5.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:16:01 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:16:01 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:16:01 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started POST "/send_message" for 127.0.0.1 at 2018-06-12 20:16:15 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"sii tutto bene te?"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (8.3ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 18:16:15.668183"], ["updated_at", "2018-06-12 18:16:15.668183"], ["text", "sii tutto bene te?"], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>1, :text=>"sii tutto bene te?"}
Completed 200 OK in 30ms (Views: 0.3ms | ActiveRecord: 11.9ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>1, "text"=>"sii tutto bene te?"} (via streamed from mailbox_3)
Started GET "/favourites" for 127.0.0.1 at 2018-06-12 20:16:27 +0200
Processing by FavouritesController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering favourites/index.html.erb within layouts/application
  [1m[36mFavourite Load (14.1ms)[0m  [1m[34mSELECT "favourites".* FROM "favourites" WHERE "favourites"."user_id" = $1[0m  [["user_id", 4]]
  Rendered favourites/index.html.erb within layouts/application (18.3ms)
Completed 200 OK in 136ms (Views: 104.0ms | ActiveRecord: 17.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:16:29 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 20:16:29 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (14.8ms)
  Rendered home/_chats_index.html.erb (2.6ms)
  Rendered home/profile.html.erb within layouts/application (29.8ms)
Completed 200 OK in 96ms (Views: 84.9ms | ActiveRecord: 4.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:16:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:16:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/profile/wish_list?id=4&list_type=0" for 127.0.0.1 at 2018-06-12 20:16:31 +0200
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"4", "list_type"=>"0"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 4], ["list_type", 0]]
  Rendered _ads_list.html.erb (2.6ms)
  Rendered ads/wish.html.erb within layouts/application (5.4ms)
Completed 200 OK in 61ms (Views: 51.6ms | ActiveRecord: 1.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:16:32 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 20:16:32 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (1.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (10.0ms)
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (22.1ms)
Completed 200 OK in 99ms (Views: 86.3ms | ActiveRecord: 6.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:16:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:16:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:16:41 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=harry+potter&commit=Search" for 127.0.0.1 at 2018-06-12 20:16:41 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["harry potter"], "commit"=>"Search"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (55.5ms)
Completed 200 OK in 1391ms (Views: 112.6ms | ActiveRecord: 0.8ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:16:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:16:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:16:55 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FHarry_Potter_e_la_Pietra_Filosofale-sample-epub.acsm%3Fid%3D9CJWTbd-RYoC%26format%3Depub%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FHarry_Potter_e_la_Pietra_Filosofale-sample-pdf.acsm%3Fid%3D9CJWTbd-RYoC%26format%3Dpdf%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3D9CJWTbd-RYoC%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=hY6MQeUSsoU&book%5Bid%5D%5Bid%5D=9CJWTbd-RYoC&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5BbuyLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3D9CJWTbd-RYoC%26rdid%3Dbook-9CJWTbd-RYoC%26rdot%3D1%26source%3Dgbs_api&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=true&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5Bamount%5D=8.99&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BfinskyOfferType%5D=1&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BamountInMicros%5D=8990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BamountInMicros%5D=8990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5Bamount%5D=8.99&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=Harry+Potter+%C3%A8+un+ragazzo+normale%2C+o+quantomeno+%C3%A8+convinto+di+esserlo%2C+anche+se+a+volte+provoca+strani+fenomeni%2C+come+farsi+ricrescere+i+capelli+inesorabilmente+tagliati+dai+perfidi+zii.&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2F9CJWTbd-RYoC&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=J.K.+Rowling&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.5&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fmarket.android.com%2Fdetails%3Fid%3Dbook-9CJWTbd-RYoC&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Juvenile+Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=1.7.7.0.preview.3&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=Harry+Potter+%C3%A8+un+ragazzo+normale%2C+o+quantomeno+%C3%A8+convinto+di+esserlo%2C+anche+se+a+volte+provoca+strani+fenomeni%2C+come+farsi+ricrescere+i+capelli+inesorabilmente+tagliati+dai+perfidi+zii.+Vive+con+loro+al+numero+4+di+Privet+Drive%3A+una+strada+di+periferia+come+tante%2C+dove+non+succede+mai+nulla+fuori+dall%E2%80%99ordinario.+Finch%C3%A9+un+giorno%2C+poco+prima+del+suo+undicesimo+compleanno%2C+riceve+una+misteriosa+lettera+che+gli+rivela+la+sua+vera+natura%3A+Harry+%C3%A8+un+mago+e+la+Scuola+di+Magia+e+Stregoneria+di+Hogwarts+%C3%A8+pronta+ad+accoglierlo...&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3D9CJWTbd-RYoC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3D9CJWTbd-RYoC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9781781101582&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=1781101582&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3D9CJWTbd-RYoC%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=302&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsEpubBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsImageBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3D9CJWTbd-RYoC%26printsec%3Dfrontcover%26dq%3Dharry%2Bpotter%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2015-12-08&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Pottermore&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=54&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Harry+Potter+e+la+Pietra+Filosofale&book%5Blist_type%5D=1" for 127.0.0.1 at 2018-06-12 20:16:55 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"ZAOwAXTqjeBnnPDhlhMJlUY909Y7qZahGvmzE5tIbQKd34WNTyzB810SA4KIVW+rqnZD/FWWKLYtILTfdNtpdQ==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"acsTokenLink"=>"http://books.google.it/books/download/Harry_Potter_e_la_Pietra_Filosofale-sample-epub.acsm?id=9CJWTbd-RYoC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "pdf"=>{"acsTokenLink"=>"http://books.google.it/books/download/Harry_Potter_e_la_Pietra_Filosofale-sample-pdf.acsm?id=9CJWTbd-RYoC&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=9CJWTbd-RYoC&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"hY6MQeUSsoU", "id"=>"9CJWTbd-RYoC", "kind"=>"books#volume", "saleInfo"=>{"buyLink"=>"https://play.google.com/store/books/details?id=9CJWTbd-RYoC&rdid=book-9CJWTbd-RYoC&rdot=1&source=gbs_api", "country"=>"IT", "isEbook"=>"true", "listPrice"=>{"amount"=>"8.99", "currencyCode"=>"EUR"}, "offers"=>[{"finskyOfferType"=>"1", "listPrice"=>{"amountInMicros"=>"8990000.0", "currencyCode"=>"EUR"}, "retailPrice"=>{"amountInMicros"=>"8990000.0", "currencyCode"=>"EUR"}}], "retailPrice"=>{"amount"=>"8.99", "currencyCode"=>"EUR"}, "saleability"=>"FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"Harry Potter Ã¨ un ragazzo normale, o quantomeno Ã¨ convinto di esserlo, anche se a volte provoca strani fenomeni, come farsi ricrescere i capelli inesorabilmente tagliati dai perfidi zii."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/9CJWTbd-RYoC", "volumeInfo"=>{"allowAnonLogging"=>"true", "authors"=>["J.K. Rowling"], "averageRating"=>"4.5", "canonicalVolumeLink"=>"https://market.android.com/details?id=book-9CJWTbd-RYoC", "categories"=>["Juvenile Fiction"], "contentVersion"=>"1.7.7.0.preview.3", "description"=>"Harry Potter Ã¨ un ragazzo normale, o quantomeno Ã¨ convinto di esserlo, anche se a volte provoca strani fenomeni, come farsi ricrescere i capelli inesorabilmente tagliati dai perfidi zii. Vive con loro al numero 4 di Privet Drive: una strada di periferia come tante, dove non succede mai nulla fuori dallâ€™ordinario. FinchÃ© un giorno, poco prima del suo undicesimo compleanno, riceve una misteriosa lettera che gli rivela la sua vera natura: Harry Ã¨ un mago e la Scuola di Magia e Stregoneria di Hogwarts Ã¨ pronta ad accoglierlo...", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=9CJWTbd-RYoC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=9CJWTbd-RYoC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9781781101582", "type"=>"ISBN_13"}, {"identifier"=>"1781101582", "type"=>"ISBN_10"}], "infoLink"=>"https://play.google.com/store/books/details?id=9CJWTbd-RYoC&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"302", "panelizationSummary"=>{"containsEpubBubbles"=>"false", "containsImageBubbles"=>"false"}, "previewLink"=>"http://books.google.it/books?id=9CJWTbd-RYoC&printsec=frontcover&dq=harry+potter&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2015-12-08", "publisher"=>"Pottermore", "ratingsCount"=>"54", "readingModes"=>{"image"=>"true", "text"=>"true"}, "title"=>"Harry Potter e la Pietra Filosofale"}}, "list_type"=>"1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 4], ["google_id", "9CJWTbd-RYoC"], ["list_type", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (8.4ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 1], ["book_title", "Harry Potter e la Pietra Filosofale"], ["book_authors", "[\"J.K. Rowling\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=9CJWTbd-RYoC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"], ["publisher", "Pottermore"], ["identifier", "[\"ISBN_13\", \"9781781101582\"]"], ["user_id", 4], ["created_at", "2018-06-12 18:16:55.978064"], ["updated_at", "2018-06-12 18:16:55.978064"], ["google_id", "9CJWTbd-RYoC"]]
  [1m[35m (9.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: 0daecd05-b35c-45ae-b6f6-51be3c2bc491) to Async(default) with arguments: #<GlobalID:0x00007fde3ea82090 @uri=#<URI::GID gid://flealibrary/Ad/1>>
Completed 302 Found in 137ms (ActiveRecord: 24.7ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 20:16:56 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (14.2ms)
  Rendered home/_chats_index.html.erb (1.9ms)
  [1m[36mAd Load (7.2ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered home/profile.html.erb within layouts/application (27.4ms)
[ActiveJob] [CreateNotificationsJob] [0daecd05-b35c-45ae-b6f6-51be3c2bc491] Performing CreateNotificationsJob (Job ID: 0daecd05-b35c-45ae-b6f6-51be3c2bc491) from Async(default) with arguments: #<GlobalID:0x00007fde39484670 @uri=#<URI::GID gid://flealibrary/Ad/1>>
[ActiveJob] [CreateNotificationsJob] [0daecd05-b35c-45ae-b6f6-51be3c2bc491]   [1m[36mAd Load (15.1ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'harry potter e la pietra filosofale' AND id != 1)[0m
[ActiveJob] [CreateNotificationsJob] [0daecd05-b35c-45ae-b6f6-51be3c2bc491] Performed CreateNotificationsJob (Job ID: 0daecd05-b35c-45ae-b6f6-51be3c2bc491) from Async(default) in 18.01ms
Completed 200 OK in 163ms (Views: 148.2ms | ActiveRecord: 6.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:16:56 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:16:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-12 20:17:09 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (20.3ms)
  Rendered home/_chats_index.html.erb (2.2ms)
  Rendered home/profile.html.erb within layouts/application (31.8ms)
Completed 200 OK in 113ms (Views: 97.9ms | ActiveRecord: 6.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:09 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:17:09 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=la+fine+delleternit%C3%A0&commit=Search" for 127.0.0.1 at 2018-06-12 20:17:17 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["la fine delleternitÃ "], "commit"=>"Search"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (37.0ms)
Completed 200 OK in 1050ms (Views: 71.3ms | ActiveRecord: 0.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:18 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:17:18 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:18 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=NONE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=NO_PAGES&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3DGL2pAAAACAAJ%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=vAQcbYWWtvY&book%5Bid%5D%5Bid%5D=GL2pAAAACAAJ&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=false&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=NOT_FOR_SALE&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2FGL2pAAAACAAJ&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=Isaac+Asimov&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.5&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fbooks.google.com%2Fbooks%2Fabout%2FLa_fine_dell_eternit%25C3%25A0.html%3Fhl%3D%26id%3DGL2pAAAACAAJ&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=preview-1.0.0&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3DGL2pAAAACAAJ%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3DGL2pAAAACAAJ%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=8804414510&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9788804414513&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3DGL2pAAAACAAJ%26dq%3Dla%2Bfine%2Bdelleternit%25C3%25A0%26hl%3D%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=238&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsEpubBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsImageBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3DGL2pAAAACAAJ%26dq%3Dla%2Bfine%2Bdelleternit%25C3%25A0%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=1996&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Oscar+bestsellers&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=4&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=La+fine+dell%27eternit%C3%A0&book%5Blist_type%5D=1" for 127.0.0.1 at 2018-06-12 20:17:22 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"t87EKWgk48eVR30LpOONQea6YAN4lWxMvrIKQ/3tmeIJKhwhnSu8/1w+t8xnB81SqrKzr7wzt/G0ICJU/v9UAg==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"NONE", "country"=>"IT", "embeddable"=>"false", "epub"=>{"isAvailable"=>"false"}, "pdf"=>{"isAvailable"=>"false"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"NO_PAGES", "webReaderLink"=>"http://play.google.com/books/reader?id=GL2pAAAACAAJ&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"vAQcbYWWtvY", "id"=>"GL2pAAAACAAJ", "kind"=>"books#volume", "saleInfo"=>{"country"=>"IT", "isEbook"=>"false", "saleability"=>"NOT_FOR_SALE"}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/GL2pAAAACAAJ", "volumeInfo"=>{"allowAnonLogging"=>"false", "authors"=>["Isaac Asimov"], "averageRating"=>"4.5", "canonicalVolumeLink"=>"https://books.google.com/books/about/La_fine_dell_eternit%C3%A0.html?hl=&id=GL2pAAAACAAJ", "categories"=>["Fiction"], "contentVersion"=>"preview-1.0.0", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=GL2pAAAACAAJ&printsec=frontcover&img=1&zoom=5&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=GL2pAAAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"8804414510", "type"=>"ISBN_10"}, {"identifier"=>"9788804414513", "type"=>"ISBN_13"}], "infoLink"=>"http://books.google.it/books?id=GL2pAAAACAAJ&dq=la+fine+delleternit%C3%A0&hl=&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"238", "panelizationSummary"=>{"containsEpubBubbles"=>"false", "containsImageBubbles"=>"false"}, "previewLink"=>"http://books.google.it/books?id=GL2pAAAACAAJ&dq=la+fine+delleternit%C3%A0&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"1996", "publisher"=>"Oscar bestsellers", "ratingsCount"=>"4", "readingModes"=>{"image"=>"false", "text"=>"false"}, "title"=>"La fine dell'eternitÃ "}}, "list_type"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAd Load (0.8ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 2], ["google_id", "GL2pAAAACAAJ"], ["list_type", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 1], ["book_title", "La fine dell'eternitÃ "], ["book_authors", "[\"Isaac Asimov\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=GL2pAAAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"], ["publisher", "Oscar bestsellers"], ["identifier", "[\"ISBN_10\", \"8804414510\"]"], ["user_id", 2], ["created_at", "2018-06-12 18:17:22.327241"], ["updated_at", "2018-06-12 18:17:22.327241"], ["google_id", "GL2pAAAACAAJ"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: f53732a9-f9ae-4fc0-9ba5-8c540bfa1c97) to Async(default) with arguments: #<GlobalID:0x00007fde3eb31e78 @uri=#<URI::GID gid://flealibrary/Ad/2>>
Completed 302 Found in 27ms (ActiveRecord: 10.2ms)


  [1m[36mAd Load (1.1ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [f53732a9-f9ae-4fc0-9ba5-8c540bfa1c97] Performing CreateNotificationsJob (Job ID: f53732a9-f9ae-4fc0-9ba5-8c540bfa1c97) from Async(default) with arguments: #<GlobalID:0x00007fde3eb23800 @uri=#<URI::GID gid://flealibrary/Ad/2>>
[ActiveJob] [CreateNotificationsJob] [f53732a9-f9ae-4fc0-9ba5-8c540bfa1c97]   [1m[36mAd Load (1.0ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'la fine dell''eternitÃ ' AND id != 2)[0m
[ActiveJob] [CreateNotificationsJob] [f53732a9-f9ae-4fc0-9ba5-8c540bfa1c97] Performed CreateNotificationsJob (Job ID: f53732a9-f9ae-4fc0-9ba5-8c540bfa1c97) from Async(default) in 3.05ms
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-12 20:17:22 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (12.9ms)
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (20.3ms)
Completed 200 OK in 68ms (Views: 58.9ms | ActiveRecord: 4.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:22 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:17:22 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=harry+potter&commit=Search" for 127.0.0.1 at 2018-06-12 20:17:29 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["harry potter"], "commit"=>"Search"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (65.7ms)
Completed 200 OK in 1002ms (Views: 114.9ms | ActiveRecord: 0.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:30 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:17:30 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:30 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FHarry_Potter_e_la_Pietra_Filosofale-sample-epub.acsm%3Fid%3D9CJWTbd-RYoC%26format%3Depub%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FHarry_Potter_e_la_Pietra_Filosofale-sample-pdf.acsm%3Fid%3D9CJWTbd-RYoC%26format%3Dpdf%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3D9CJWTbd-RYoC%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=hY6MQeUSsoU&book%5Bid%5D%5Bid%5D=9CJWTbd-RYoC&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5BbuyLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3D9CJWTbd-RYoC%26rdid%3Dbook-9CJWTbd-RYoC%26rdot%3D1%26source%3Dgbs_api&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=true&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5Bamount%5D=8.99&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BfinskyOfferType%5D=1&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BamountInMicros%5D=8990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BamountInMicros%5D=8990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5Bamount%5D=8.99&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=Harry+Potter+%C3%A8+un+ragazzo+normale%2C+o+quantomeno+%C3%A8+convinto+di+esserlo%2C+anche+se+a+volte+provoca+strani+fenomeni%2C+come+farsi+ricrescere+i+capelli+inesorabilmente+tagliati+dai+perfidi+zii.&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2F9CJWTbd-RYoC&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=J.K.+Rowling&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.5&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fmarket.android.com%2Fdetails%3Fid%3Dbook-9CJWTbd-RYoC&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Juvenile+Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=1.7.7.0.preview.3&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=Harry+Potter+%C3%A8+un+ragazzo+normale%2C+o+quantomeno+%C3%A8+convinto+di+esserlo%2C+anche+se+a+volte+provoca+strani+fenomeni%2C+come+farsi+ricrescere+i+capelli+inesorabilmente+tagliati+dai+perfidi+zii.+Vive+con+loro+al+numero+4+di+Privet+Drive%3A+una+strada+di+periferia+come+tante%2C+dove+non+succede+mai+nulla+fuori+dall%E2%80%99ordinario.+Finch%C3%A9+un+giorno%2C+poco+prima+del+suo+undicesimo+compleanno%2C+riceve+una+misteriosa+lettera+che+gli+rivela+la+sua+vera+natura%3A+Harry+%C3%A8+un+mago+e+la+Scuola+di+Magia+e+Stregoneria+di+Hogwarts+%C3%A8+pronta+ad+accoglierlo...&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3D9CJWTbd-RYoC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3D9CJWTbd-RYoC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9781781101582&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=1781101582&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3D9CJWTbd-RYoC%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=302&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsEpubBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsImageBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3D9CJWTbd-RYoC%26printsec%3Dfrontcover%26dq%3Dharry%2Bpotter%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2015-12-08&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Pottermore&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=54&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Harry+Potter+e+la+Pietra+Filosofale&book%5Blist_type%5D=0" for 127.0.0.1 at 2018-06-12 20:17:37 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"fL+H0bEVKLwBxqURLIfIp0/DYRzUITuvPbzp2zFbSlZ54jptaQmzbi/C2wYk0FEDhctQINZZQ2CsiX4dTPqnNw==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"acsTokenLink"=>"http://books.google.it/books/download/Harry_Potter_e_la_Pietra_Filosofale-sample-epub.acsm?id=9CJWTbd-RYoC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "pdf"=>{"acsTokenLink"=>"http://books.google.it/books/download/Harry_Potter_e_la_Pietra_Filosofale-sample-pdf.acsm?id=9CJWTbd-RYoC&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=9CJWTbd-RYoC&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"hY6MQeUSsoU", "id"=>"9CJWTbd-RYoC", "kind"=>"books#volume", "saleInfo"=>{"buyLink"=>"https://play.google.com/store/books/details?id=9CJWTbd-RYoC&rdid=book-9CJWTbd-RYoC&rdot=1&source=gbs_api", "country"=>"IT", "isEbook"=>"true", "listPrice"=>{"amount"=>"8.99", "currencyCode"=>"EUR"}, "offers"=>[{"finskyOfferType"=>"1", "listPrice"=>{"amountInMicros"=>"8990000.0", "currencyCode"=>"EUR"}, "retailPrice"=>{"amountInMicros"=>"8990000.0", "currencyCode"=>"EUR"}}], "retailPrice"=>{"amount"=>"8.99", "currencyCode"=>"EUR"}, "saleability"=>"FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"Harry Potter Ã¨ un ragazzo normale, o quantomeno Ã¨ convinto di esserlo, anche se a volte provoca strani fenomeni, come farsi ricrescere i capelli inesorabilmente tagliati dai perfidi zii."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/9CJWTbd-RYoC", "volumeInfo"=>{"allowAnonLogging"=>"true", "authors"=>["J.K. Rowling"], "averageRating"=>"4.5", "canonicalVolumeLink"=>"https://market.android.com/details?id=book-9CJWTbd-RYoC", "categories"=>["Juvenile Fiction"], "contentVersion"=>"1.7.7.0.preview.3", "description"=>"Harry Potter Ã¨ un ragazzo normale, o quantomeno Ã¨ convinto di esserlo, anche se a volte provoca strani fenomeni, come farsi ricrescere i capelli inesorabilmente tagliati dai perfidi zii. Vive con loro al numero 4 di Privet Drive: una strada di periferia come tante, dove non succede mai nulla fuori dallâ€™ordinario. FinchÃ© un giorno, poco prima del suo undicesimo compleanno, riceve una misteriosa lettera che gli rivela la sua vera natura: Harry Ã¨ un mago e la Scuola di Magia e Stregoneria di Hogwarts Ã¨ pronta ad accoglierlo...", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=9CJWTbd-RYoC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=9CJWTbd-RYoC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9781781101582", "type"=>"ISBN_13"}, {"identifier"=>"1781101582", "type"=>"ISBN_10"}], "infoLink"=>"https://play.google.com/store/books/details?id=9CJWTbd-RYoC&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"302", "panelizationSummary"=>{"containsEpubBubbles"=>"false", "containsImageBubbles"=>"false"}, "previewLink"=>"http://books.google.it/books?id=9CJWTbd-RYoC&printsec=frontcover&dq=harry+potter&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2015-12-08", "publisher"=>"Pottermore", "ratingsCount"=>"54", "readingModes"=>{"image"=>"true", "text"=>"true"}, "title"=>"Harry Potter e la Pietra Filosofale"}}, "list_type"=>"0"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 3], ["google_id", "9CJWTbd-RYoC"], ["list_type", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 0], ["book_title", "Harry Potter e la Pietra Filosofale"], ["book_authors", "[\"J.K. Rowling\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=9CJWTbd-RYoC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"], ["publisher", "Pottermore"], ["identifier", "[\"ISBN_13\", \"9781781101582\"]"], ["user_id", 3], ["created_at", "2018-06-12 18:17:37.723623"], ["updated_at", "2018-06-12 18:17:37.723623"], ["google_id", "9CJWTbd-RYoC"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/3
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: 8747b16e-226d-4c81-bcca-6cc8d9d27eb7) to Async(default) with arguments: #<GlobalID:0x00007fde3a3493e0 @uri=#<URI::GID gid://flealibrary/Ad/3>>
Completed 302 Found in 33ms (ActiveRecord: 10.1ms)


  [1m[36mAd Load (1.7ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7] Performing CreateNotificationsJob (Job ID: 8747b16e-226d-4c81-bcca-6cc8d9d27eb7) from Async(default) with arguments: #<GlobalID:0x00007fde3a339f08 @uri=#<URI::GID gid://flealibrary/Ad/3>>
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 20:17:37 +0200
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[36mAd Load (1.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'harry potter e la pietra filosofale' AND id != 3)[0m
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mChat Load (2.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (9.5ms)
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[35mSQL (10.9ms)[0m  [1m[32mINSERT INTO "notifications" ("created_at", "updated_at", "user_id", "ad_id", "displayed") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 18:17:37.777977"], ["updated_at", "2018-06-12 18:17:37.777977"], ["user_id", 3], ["ad_id", 1], ["displayed", 0]]
  Rendered home/_chats_index.html.erb (1.4ms)
  Rendered home/profile.html.erb within layouts/application (27.1ms)
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[35m (8.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[35m (5.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "notifications" ("created_at", "updated_at", "user_id", "ad_id", "displayed") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-12 18:17:37.814316"], ["updated_at", "2018-06-12 18:17:37.814316"], ["user_id", 4], ["ad_id", 3], ["displayed", 0]]
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
Completed 200 OK in 95ms (Views: 79.2ms | ActiveRecord: 8.5ms)


[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 1], ["updated_at", "2018-06-12 18:17:37.850445"], ["id", 3]]
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:37 +0200
MailboxChannel stopped streaming from mailbox_
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[36mUser Exists (5.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 1], ["updated_at", "2018-06-12 18:17:37.886051"], ["id", 4]]
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7]   [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7] [ActionCable] Broadcasting to mailbox_3: {:type=>"new_notification"}
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7] [ActionCable] Broadcasting to mailbox_4: {:type=>"new_notification"}
[ActiveJob] [CreateNotificationsJob] [8747b16e-226d-4c81-bcca-6cc8d9d27eb7] Performed CreateNotificationsJob (Job ID: 8747b16e-226d-4c81-bcca-6cc8d9d27eb7) from Async(default) in 155.2ms
MailboxChannel transmitting {"type"=>"new_notification"} (via streamed from mailbox_4)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:37 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:17:37 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:37 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-12 20:17:37 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
  [1m[36mChat Load (2.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (24.5ms)
  Rendered home/_chats_index.html.erb (1.2ms)
  Rendered home/profile.html.erb within layouts/application (38.9ms)
Completed 200 OK in 110ms (Views: 87.7ms | ActiveRecord: 12.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:17:39 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:39 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 20:17:47 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (10.6ms)
  Rendered home/_chats_index.html.erb (1.1ms)
  Rendered home/profile.html.erb within layouts/application (18.7ms)
Completed 200 OK in 68ms (Views: 58.7ms | ActiveRecord: 3.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:47 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:17:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:57 +0200
MailboxChannel stopped streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-12 20:17:57 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.0ms)
  Rendered home/welcome.html.erb within layouts/application (5.7ms)
Completed 200 OK in 1264ms (Views: 94.5ms | ActiveRecord: 2.7ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:17:58 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:17:58 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/notifications" for 127.0.0.1 at 2018-06-12 20:18:12 +0200
Processing by NotificationsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mNotification Load (0.4ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."user_id" = $1[0m  [["user_id", 3]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "notifications" SET "displayed" = $1, "updated_at" = $2 WHERE "notifications"."id" = $3[0m  [["displayed", 1], ["updated_at", "2018-06-12 18:18:12.897743"], ["id", 1]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 0], ["updated_at", "2018-06-12 18:18:12.917566"], ["id", 3]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  Rendering notifications/index.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.5ms)
  Rendered _ads_list.html.erb (0.0ms)
  Rendered notifications/index.html.erb within layouts/application (8.5ms)
Completed 200 OK in 116ms (Views: 69.8ms | ActiveRecord: 16.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:18:13 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:18:13 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:18:13 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/notifications" for 127.0.0.1 at 2018-06-12 20:18:15 +0200
Processing by NotificationsController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mNotification Load (0.9ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."user_id" = $1[0m  [["user_id", 3]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  Rendering notifications/index.html.erb within layouts/application
  Rendered _ads_list.html.erb (1.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.2ms)
  Rendered notifications/index.html.erb within layouts/application (6.7ms)
Completed 200 OK in 65ms (Views: 43.8ms | ActiveRecord: 3.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:18:15 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:18:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:18:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-12 20:18:29 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox_2: {:type=>"delete_chat", :chat_id=>1}
[ActionCable] Broadcasting to mailbox_3: {:type=>"delete_chat", :chat_id=>1}
MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>1} (via streamed from mailbox_2)
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.9ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 1]]
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 32ms (Views: 0.3ms | ActiveRecord: 12.9ms)


Started POST "/delete_chat" for 127.0.0.1 at 2018-06-12 20:18:30 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox_2: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] Broadcasting to mailbox_4: {:type=>"delete_chat", :chat_id=>2}
MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox_2)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.9ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 2]]
  [1m[35m (8.0ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 30ms (Views: 0.4ms | ActiveRecord: 12.6ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-12 20:18:34 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  Rendered home/_chat.html.erb (1.9ms)
  Rendered home/_chats_index.html.erb (1.3ms)
  Rendered home/profile.html.erb within layouts/application (10.9ms)
Completed 200 OK in 69ms (Views: 52.8ms | ActiveRecord: 1.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:18:34 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:18:34 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:18:34 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/" for 127.0.0.1 at 2018-06-12 20:18:38 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.2ms)
  Rendered home/welcome.html.erb within layouts/application (5.4ms)
Completed 200 OK in 661ms (Views: 43.4ms | ActiveRecord: 2.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:18:39 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:18:39 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:18:39 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 20:18:42 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.9ms)
  Rendered home/welcome.html.erb within layouts/application (8.2ms)
Completed 200 OK in 653ms (Views: 50.0ms | ActiveRecord: 2.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:18:43 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:18:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:18:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=vincenzo&commit=Search" for 127.0.0.1 at 2018-06-12 20:18:51 +0200
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["vincenzo"], "commit"=>"Search"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (13.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%vincenzo%')[0m
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%vincenzo%') ORDER BY name[0m
  Rendered home/users_list.html.erb within layouts/application (3.2ms)
Completed 200 OK in 68ms (Views: 46.8ms | ActiveRecord: 14.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:18:51 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:18:51 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:18:51 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-12 20:19:21 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  Rendered home/_chat.html.erb (1.7ms)
  Rendered home/_chats_index.html.erb (0.8ms)
  Rendered home/profile.html.erb within layouts/application (9.9ms)
Completed 200 OK in 62ms (Views: 54.4ms | ActiveRecord: 1.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:19:21 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:19:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:19:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-12 20:19:25 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  Rendered home/_chat.html.erb (2.0ms)
  Rendered home/_chats_index.html.erb (0.6ms)
  Rendered home/profile.html.erb within layouts/application (10.3ms)
Completed 200 OK in 57ms (Views: 50.0ms | ActiveRecord: 1.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:19:25 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:19:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:19:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-12 20:19:27 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 2]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (6.5ms)
  Rendered home/welcome.html.erb within layouts/application (10.5ms)
Completed 200 OK in 628ms (Views: 60.2ms | ActiveRecord: 2.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:19:28 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:19:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:19:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=flavia&commit=Search" for 127.0.0.1 at 2018-06-12 20:19:32 +0200
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["flavia"], "commit"=>"Search"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%flavia%')[0m
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%flavia%') ORDER BY name[0m
  Rendered home/users_list.html.erb within layouts/application (2.7ms)
Completed 200 OK in 50ms (Views: 43.0ms | ActiveRecord: 1.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:19:32 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:19:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:19:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:20:52 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-12 20:20:52 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAd Load (1.0ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 4]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.8ms)
  Rendered home/welcome.html.erb within layouts/application (9.5ms)
Completed 200 OK in 657ms (Views: 86.2ms | ActiveRecord: 3.2ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:20:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:20:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users_list?utf8=%E2%9C%93&search%5B%5D=flavia&commit=Search" for 127.0.0.1 at 2018-06-12 20:20:59 +0200
Processing by HomeController#users_list as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["flavia"], "commit"=>"Search"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (username iLIKE'%flavia%')[0m
  Rendering home/users_list.html.erb within layouts/application
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (username iLIKE'%flavia%') ORDER BY name[0m
  Rendered home/users_list.html.erb within layouts/application (3.9ms)
Completed 200 OK in 56ms (Views: 48.3ms | ActiveRecord: 1.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:20:59 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:20:59 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:20:59 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started POST "/create_chat" for 127.0.0.1 at 2018-06-12 20:21:01 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-12 18:21:01.671356"], ["updated_at", "2018-06-12 18:21:01.671356"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_4: {:type=>"create_chat"}
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 3.3ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-12 20:21:06 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (14.0ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (6.4ms)
  Rendered home/profile.html.erb within layouts/application (29.1ms)
Completed 200 OK in 90ms (Views: 81.3ms | ActiveRecord: 3.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:21:07 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-12 20:21:07 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-12 20:21:07 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-13 10:15:51 +0200
  
PG::ConnectionBad (could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
):
  
pg (1.0.0) lib/pg.rb:56:in `initialize'
pg (1.0.0) lib/pg.rb:56:in `new'
pg (1.0.0) lib/pg.rb:56:in `connect'
activerecord (5.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:697:in `connect'
activerecord (5.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:221:in `initialize'
activerecord (5.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:38:in `new'
activerecord (5.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:38:in `postgresql_connection'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:759:in `new_connection'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:803:in `checkout_new_connection'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:782:in `try_to_checkout_new_connection'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:743:in `acquire_connection'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:500:in `checkout'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:374:in `connection'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:931:in `retrieve_connection'
activerecord (5.1.6) lib/active_record/connection_handling.rb:116:in `retrieve_connection'
activerecord (5.1.6) lib/active_record/connection_handling.rb:88:in `connection'
activerecord (5.1.6) lib/active_record/migration.rb:562:in `connection'
activerecord (5.1.6) lib/active_record/migration.rb:553:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
activesupport (5.1.6) lib/active_support/callbacks.rb:97:in `run_callbacks'
actionpack (5.1.6) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2018-06-13 10:16:22 +0200
  
PG::ConnectionBad (could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
):
  
pg (1.0.0) lib/pg.rb:56:in `initialize'
pg (1.0.0) lib/pg.rb:56:in `new'
pg (1.0.0) lib/pg.rb:56:in `connect'
activerecord (5.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:697:in `connect'
activerecord (5.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:221:in `initialize'
activerecord (5.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:38:in `new'
activerecord (5.1.6) lib/active_record/connection_adapters/postgresql_adapter.rb:38:in `postgresql_connection'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:759:in `new_connection'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:803:in `checkout_new_connection'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:782:in `try_to_checkout_new_connection'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:743:in `acquire_connection'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:500:in `checkout'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:374:in `connection'
activerecord (5.1.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:931:in `retrieve_connection'
activerecord (5.1.6) lib/active_record/connection_handling.rb:116:in `retrieve_connection'
activerecord (5.1.6) lib/active_record/connection_handling.rb:88:in `connection'
activerecord (5.1.6) lib/active_record/migration.rb:562:in `connection'
activerecord (5.1.6) lib/active_record/migration.rb:553:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
activesupport (5.1.6) lib/active_support/callbacks.rb:97:in `run_callbacks'
actionpack (5.1.6) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  [1m[35m (11.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (23.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (254.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (228.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (106.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (97.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (98.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "notifications_counter" integer DEFAULT 0)[0m
  [1m[35m (54.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (41.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (17.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (151.9ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (18.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (44.1ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (42.9ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (42.2ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (117.2ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (40.0ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (13.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAds (5)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (81.2ms)[0m  [1m[35mCREATE TABLE "ads" ("id" bigserial primary key, "list_type" integer, "book_title" character varying, "book_authors" character varying, "link_to_coverbook" character varying, "publisher" character varying, "identifier" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (53.3ms)[0m  [1m[35mCREATE  INDEX  "index_ads_on_user_id" ON "ads"  ("user_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "ads" ADD CONSTRAINT "fk_rails_400d8fa7ce"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "5"]]
  [1m[35m (18.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (46.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (43.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (17.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGoogleIdToAds (8)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ads" ADD "google_id" character varying[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "8"]]
  [1m[35m (9.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLocateOptionToUsers (9)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "cap" character varying NOT NULL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "radius" character varying NOT NULL[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "9"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFavourites (10)
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (64.3ms)[0m  [1m[35mCREATE TABLE "favourites" ("id" bigserial primary key, "user_id" bigint, "ad_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (42.7ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_user_id" ON "favourites"  ("user_id")[0m
  [1m[35m (43.0ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_ad_id" ON "favourites"  ("ad_id")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "10"]]
  [1m[35m (16.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNotifications (11)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (46.1ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "user_id" bigint, "ad_id" bigint, "displayed" integer)[0m
  [1m[35m (42.5ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_user_id" ON "notifications"  ("user_id")[0m
  [1m[35m (64.3ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_ad_id" ON "notifications"  ("ad_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_b080fb4855"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_5b4eb0e1e4"
FOREIGN KEY ("ad_id")
  REFERENCES "ads" ("id")
[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "11"]]
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-13 08:17:10.602239"], ["updated_at", "2018-06-13 08:17:10.602239"]]
  [1m[35m (12.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$.Y7Y9depUHKF2K8HxgH3yu.xqtyMTEzT9pr0m3ZnMQtKKJVobe4la"], ["created_at", "2018-06-13 08:17:14.130051"], ["updated_at", "2018-06-13 08:17:14.130051"], ["role", "superadmin"], ["cap", "00184"], ["radius", "10"]]
  [1m[35m (15.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$N9A8Oi0icJu28RSPAgiFO.LjBkboRu.AzGbzBWFG.ZtcEdMMT947y"], ["created_at", "2018-06-13 08:17:14.349814"], ["updated_at", "2018-06-13 08:17:14.349814"], ["role", "admin"], ["cap", "00123"], ["radius", "10"]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$sWEbcklATidCGrTd5Xq9bu9Kb6rKYPhEG/hxhOv5L36r7UUpCdRaG"], ["created_at", "2018-06-13 08:17:14.561366"], ["updated_at", "2018-06-13 08:17:14.561366"], ["role", "admin"], ["cap", "00015"], ["radius", "10"]]
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$7JNuKSdtGr2G0geKaUFANOcnzA9eaFAVRTiLD.qqEBjjD0Vz3nnHy"], ["created_at", "2018-06-13 08:17:14.771622"], ["updated_at", "2018-06-13 08:17:14.771622"], ["role", "admin"], ["cap", "00015"], ["radius", "10"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-13 08:17:14.800743"], ["updated_at", "2018-06-13 08:17:14.800743"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (9.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-13 08:17:14.827966"], ["updated_at", "2018-06-13 08:17:14.827966"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-13 08:17:14.836036"], ["updated_at", "2018-06-13 08:17:14.836036"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-13 08:17:14.847390"], ["updated_at", "2018-06-13 08:17:14.847390"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-13 08:17:14.858744"], ["updated_at", "2018-06-13 08:17:14.858744"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-13 08:17:14.869237"], ["updated_at", "2018-06-13 08:17:14.869237"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2018-06-13 10:17:32 +0200
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  Rendered _ads_list.html.erb (7.9ms)
  Rendered home/welcome.html.erb within layouts/application (28.4ms)
Completed 200 OK in 1036ms (Views: 906.5ms | ActiveRecord: 16.8ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:17:34 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:17:34 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:17:47 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-13 10:17:47 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (35.5ms)
Completed 200 OK in 128ms (Views: 121.8ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:17:48 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:17:48 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:17:53 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-13 10:17:53 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"AZoCoPrrCoroVzcJ0y2ec2rzZh3awrDA5uixqPDAydki29j6v8qNCBR6I8D3zIKKo583T/GW0ekSx2ijKpDfGg==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-13 08:17:54.225647"], ["last_sign_in_at", "2018-06-13 08:17:54.225647"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-13 08:17:54.227403"], ["id", 3]]
  [1m[35m (11.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
Completed 302 Found in 269ms (ActiveRecord: 13.0ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-13 10:17:54 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (1.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (74.6ms)
  Rendered home/_chats_index.html.erb (1.9ms)
  Rendered home/profile.html.erb within layouts/application (94.0ms)
Completed 200 OK in 177ms (Views: 144.2ms | ActiveRecord: 11.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:17:55 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:17:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:18:00 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=it&commit=Search" for 127.0.0.1 at 2018-06-13 10:18:00 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["it"], "commit"=>"Search"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (157.5ms)
Completed 200 OK in 1390ms (Views: 213.6ms | ActiveRecord: 0.8ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:18:03 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:18:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:18:07 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED_FOR_ACCESSIBILITY&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3DS85NCwAAQBAJ%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=2TmIjgvM%2BzA&book%5Bid%5D%5Bid%5D=S85NCwAAQBAJ&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=false&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=NOT_FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=In+1985%2C+six+men+and+one+woman+are+called+back+together+to+search+for+a+creature+of+unspeakable+evil+that+had+stalked+them+as+children.&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2FS85NCwAAQBAJ&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=Stephen+King&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.0&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fbooks.google.com%2Fbooks%2Fabout%2FIt.html%3Fhl%3D%26id%3DS85NCwAAQBAJ&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=0.5.0.0.preview.0&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=They+were+seven+teenagers+when+they+first+stumbled+upon+the+horror.+Now+they+were+grown-up+men+and+women+who+had+gone+out+into+the+big+world+to+gain+success+and+happiness.+But+none+of+them+could+withstand+the+force+that+drew+them+back+to+Derry%2C+Maine+to+face+the+nightmare+without+an+end%2C+and+the+evil+without+a+name.&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3DS85NCwAAQBAJ%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3DS85NCwAAQBAJ%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9781501142970&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=1501142976&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3DS85NCwAAQBAJ%26dq%3Dit%26hl%3D%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=en&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=1168&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsEpubBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsImageBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3DS85NCwAAQBAJ%26printsec%3Dfrontcover%26dq%3Dit%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2016-01-05&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Simon+and+Schuster&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=236&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5Bsubtitle%5D=A+Novel&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=It&book%5Blist_type%5D=0" for 127.0.0.1 at 2018-06-13 10:18:07 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"kBKEofkeoktKzCVsG3t+SLntoV1kSUgrT5A/TFGK6gd7stoF+rCMau/4RUi/qi7lngNv1orYG7+0jNxlUohFdg==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"isAvailable"=>"false"}, "pdf"=>{"isAvailable"=>"false"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED_FOR_ACCESSIBILITY", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=S85NCwAAQBAJ&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"2TmIjgvM+zA", "id"=>"S85NCwAAQBAJ", "kind"=>"books#volume", "saleInfo"=>{"country"=>"IT", "isEbook"=>"false", "saleability"=>"NOT_FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"In 1985, six men and one woman are called back together to search for a creature of unspeakable evil that had stalked them as children."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/S85NCwAAQBAJ", "volumeInfo"=>{"allowAnonLogging"=>"false", "authors"=>["Stephen King"], "averageRating"=>"4.0", "canonicalVolumeLink"=>"https://books.google.com/books/about/It.html?hl=&id=S85NCwAAQBAJ", "categories"=>["Fiction"], "contentVersion"=>"0.5.0.0.preview.0", "description"=>"They were seven teenagers when they first stumbled upon the horror. Now they were grown-up men and women who had gone out into the big world to gain success and happiness. But none of them could withstand the force that drew them back to Derry, Maine to face the nightmare without an end, and the evil without a name.", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=S85NCwAAQBAJ&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=S85NCwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9781501142970", "type"=>"ISBN_13"}, {"identifier"=>"1501142976", "type"=>"ISBN_10"}], "infoLink"=>"http://books.google.it/books?id=S85NCwAAQBAJ&dq=it&hl=&source=gbs_api", "language"=>"en", "maturityRating"=>"NOT_MATURE", "pageCount"=>"1168", "panelizationSummary"=>{"containsEpubBubbles"=>"false", "containsImageBubbles"=>"false"}, "previewLink"=>"http://books.google.it/books?id=S85NCwAAQBAJ&printsec=frontcover&dq=it&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2016-01-05", "publisher"=>"Simon and Schuster", "ratingsCount"=>"236", "readingModes"=>{"image"=>"false", "text"=>"false"}, "subtitle"=>"A Novel", "title"=>"It"}}, "list_type"=>"0"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 3], ["google_id", "S85NCwAAQBAJ"], ["list_type", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 0], ["book_title", "It"], ["book_authors", "[\"Stephen King\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=S85NCwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"], ["publisher", "Simon and Schuster"], ["identifier", "[\"ISBN_13\", \"9781501142970\"]"], ["user_id", 3], ["created_at", "2018-06-13 08:18:08.052622"], ["updated_at", "2018-06-13 08:18:08.052622"], ["google_id", "S85NCwAAQBAJ"]]
  [1m[35m (14.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: 5c3f5cfc-7dab-42b8-af47-a9941bf43d93) to Async(default) with arguments: #<GlobalID:0x007fa989143f18 @uri=#<URI::GID gid://flealibrary/Ad/1>>
Completed 302 Found in 133ms (ActiveRecord: 20.5ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-13 10:18:08 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mAd Load (5.3ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [5c3f5cfc-7dab-42b8-af47-a9941bf43d93] Performing CreateNotificationsJob (Job ID: 5c3f5cfc-7dab-42b8-af47-a9941bf43d93) from Async(default) with arguments: #<GlobalID:0x007fa9890b2c98 @uri=#<URI::GID gid://flealibrary/Ad/1>>
[ActiveJob] [CreateNotificationsJob] [5c3f5cfc-7dab-42b8-af47-a9941bf43d93]   [1m[36mAd Load (0.8ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'it' AND id != 1)[0m
[ActiveJob] [CreateNotificationsJob] [5c3f5cfc-7dab-42b8-af47-a9941bf43d93] Performed CreateNotificationsJob (Job ID: 5c3f5cfc-7dab-42b8-af47-a9941bf43d93) from Async(default) in 2.06ms
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (2.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (16.7ms)
  Rendered home/_chats_index.html.erb (1.3ms)
  Rendered home/profile.html.erb within layouts/application (29.5ms)
Completed 200 OK in 127ms (Views: 83.8ms | ActiveRecord: 16.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:18:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:18:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:18:18 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=addio+alle+armi&commit=Search" for 127.0.0.1 at 2018-06-13 10:18:18 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["addio alle armi"], "commit"=>"Search"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (211.8ms)
Completed 200 OK in 1317ms (Views: 261.2ms | ActiveRecord: 0.6ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:18:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:18:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:18:24 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FAddio_alle_armi-sample-epub.acsm%3Fid%3DDG36DR0jlbEC%26format%3Depub%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FAddio_alle_armi-sample-pdf.acsm%3Fid%3DDG36DR0jlbEC%26format%3Dpdf%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3DDG36DR0jlbEC%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=wGvLKXsIWrg&book%5Bid%5D%5Bid%5D=DG36DR0jlbEC&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5BbuyLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3DDG36DR0jlbEC%26rdid%3Dbook-DG36DR0jlbEC%26rdot%3D1%26source%3Dgbs_api&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=true&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BfinskyOfferType%5D=1&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BamountInMicros%5D=7990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5Bamount%5D=7.99&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=I+temi+della+guerra%2C+dell%26%2339%3Bamore+e+della+morte%2C+che+per+diversi+aspetti+sono+alla+base+di+tutta+l%26%2339%3Bopera+di+Hemingway%2C+trovano+in+Addio+alle+armi+uno+spazio+e+un%26%2339%3Barticolazione+particolari...&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2FDG36DR0jlbEC&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=Ernest+Hemingway&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=5.0&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fmarket.android.com%2Fdetails%3Fid%3Dbook-DG36DR0jlbEC&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=1.5.4.0.preview.3&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=I+temi+della+guerra%2C+dell%27amore+e+della+morte%2C+che+per+diversi+aspetti+sono+alla+base+di+tutta+l%27opera+di+Hemingway%2C+trovano+in+Addio+alle+armi+uno+spazio+e+un%27articolazione+particolari...&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3DDG36DR0jlbEC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3DDG36DR0jlbEC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9788852018770&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=8852018778&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3DDG36DR0jlbEC%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=364&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3DDG36DR0jlbEC%26printsec%3Dfrontcover%26dq%3Daddio%2Balle%2Barmi%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2011-05-17&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Edizioni+Mondadori&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=4&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Addio+alle+armi&book%5Blist_type%5D=0" for 127.0.0.1 at 2018-06-13 10:18:24 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"GOfIvVoNzi5rS5sLTPgdPKBqDjU+BUsZaMsC4yBC5lTzR5YZWaPgD85/+y/oKU2Rh4TAvtCUGI2T1+HKI0BJJQ==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"acsTokenLink"=>"http://books.google.it/books/download/Addio_alle_armi-sample-epub.acsm?id=DG36DR0jlbEC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "pdf"=>{"acsTokenLink"=>"http://books.google.it/books/download/Addio_alle_armi-sample-pdf.acsm?id=DG36DR0jlbEC&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=DG36DR0jlbEC&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"wGvLKXsIWrg", "id"=>"DG36DR0jlbEC", "kind"=>"books#volume", "saleInfo"=>{"buyLink"=>"https://play.google.com/store/books/details?id=DG36DR0jlbEC&rdid=book-DG36DR0jlbEC&rdot=1&source=gbs_api", "country"=>"IT", "isEbook"=>"true", "listPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "offers"=>[{"finskyOfferType"=>"1", "listPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}, "retailPrice"=>{"amountInMicros"=>"7990000.0", "currencyCode"=>"EUR"}}], "retailPrice"=>{"amount"=>"7.99", "currencyCode"=>"EUR"}, "saleability"=>"FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"I temi della guerra, dell&#39;amore e della morte, che per diversi aspetti sono alla base di tutta l&#39;opera di Hemingway, trovano in Addio alle armi uno spazio e un&#39;articolazione particolari..."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/DG36DR0jlbEC", "volumeInfo"=>{"allowAnonLogging"=>"true", "authors"=>["Ernest Hemingway"], "averageRating"=>"5.0", "canonicalVolumeLink"=>"https://market.android.com/details?id=book-DG36DR0jlbEC", "categories"=>["Fiction"], "contentVersion"=>"1.5.4.0.preview.3", "description"=>"I temi della guerra, dell'amore e della morte, che per diversi aspetti sono alla base di tutta l'opera di Hemingway, trovano in Addio alle armi uno spazio e un'articolazione particolari...", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=DG36DR0jlbEC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=DG36DR0jlbEC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9788852018770", "type"=>"ISBN_13"}, {"identifier"=>"8852018778", "type"=>"ISBN_10"}], "infoLink"=>"https://play.google.com/store/books/details?id=DG36DR0jlbEC&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"364", "previewLink"=>"http://books.google.it/books?id=DG36DR0jlbEC&printsec=frontcover&dq=addio+alle+armi&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2011-05-17", "publisher"=>"Edizioni Mondadori", "ratingsCount"=>"4", "readingModes"=>{"image"=>"true", "text"=>"true"}, "title"=>"Addio alle armi"}}, "list_type"=>"0"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (1.0ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 3], ["google_id", "DG36DR0jlbEC"], ["list_type", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 0], ["book_title", "Addio alle armi"], ["book_authors", "[\"Ernest Hemingway\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=DG36DR0jlbEC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"], ["publisher", "Edizioni Mondadori"], ["identifier", "[\"ISBN_13\", \"9788852018770\"]"], ["user_id", 3], ["created_at", "2018-06-13 08:18:24.241814"], ["updated_at", "2018-06-13 08:18:24.241814"], ["google_id", "DG36DR0jlbEC"]]
  [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: e7c9154d-6e42-4083-b082-6c125976d658) to Async(default) with arguments: #<GlobalID:0x007fa988456788 @uri=#<URI::GID gid://flealibrary/Ad/2>>
Completed 302 Found in 41ms (ActiveRecord: 15.5ms)


  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [e7c9154d-6e42-4083-b082-6c125976d658] Performing CreateNotificationsJob (Job ID: e7c9154d-6e42-4083-b082-6c125976d658) from Async(default) with arguments: #<GlobalID:0x007fa988438e90 @uri=#<URI::GID gid://flealibrary/Ad/2>>
[ActiveJob] [CreateNotificationsJob] [e7c9154d-6e42-4083-b082-6c125976d658]   [1m[36mAd Load (1.1ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'addio alle armi' AND id != 2)[0m
[ActiveJob] [CreateNotificationsJob] [e7c9154d-6e42-4083-b082-6c125976d658] Performed CreateNotificationsJob (Job ID: e7c9154d-6e42-4083-b082-6c125976d658) from Async(default) in 2.95ms
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-13 10:18:24 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (16.0ms)
  Rendered home/_chats_index.html.erb (4.1ms)
  Rendered home/profile.html.erb within layouts/application (27.9ms)
Completed 200 OK in 122ms (Views: 107.5ms | ActiveRecord: 6.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:18:24 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:18:24 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:18:34 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=harry+potter&commit=Search" for 127.0.0.1 at 2018-06-13 10:18:34 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["harry potter"], "commit"=>"Search"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (196.5ms)
Completed 200 OK in 1069ms (Views: 262.1ms | ActiveRecord: 0.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:18:36 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:18:36 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:19:41 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FHarry_Potter_e_la_Pietra_Filosofale-sample-epub.acsm%3Fid%3D9CJWTbd-RYoC%26format%3Depub%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FHarry_Potter_e_la_Pietra_Filosofale-sample-pdf.acsm%3Fid%3D9CJWTbd-RYoC%26format%3Dpdf%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3D9CJWTbd-RYoC%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=hY6MQeUSsoU&book%5Bid%5D%5Bid%5D=9CJWTbd-RYoC&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5BbuyLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3D9CJWTbd-RYoC%26rdid%3Dbook-9CJWTbd-RYoC%26rdot%3D1%26source%3Dgbs_api&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=true&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5Bamount%5D=8.99&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BfinskyOfferType%5D=1&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BamountInMicros%5D=8990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BamountInMicros%5D=8990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5Bamount%5D=8.99&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=Harry+Potter+%C3%A8+un+ragazzo+normale%2C+o+quantomeno+%C3%A8+convinto+di+esserlo%2C+anche+se+a+volte+provoca+strani+fenomeni%2C+come+farsi+ricrescere+i+capelli+inesorabilmente+tagliati+dai+perfidi+zii.&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2F9CJWTbd-RYoC&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=J.K.+Rowling&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.5&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fmarket.android.com%2Fdetails%3Fid%3Dbook-9CJWTbd-RYoC&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Juvenile+Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=1.7.7.0.preview.3&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=Harry+Potter+%C3%A8+un+ragazzo+normale%2C+o+quantomeno+%C3%A8+convinto+di+esserlo%2C+anche+se+a+volte+provoca+strani+fenomeni%2C+come+farsi+ricrescere+i+capelli+inesorabilmente+tagliati+dai+perfidi+zii.+Vive+con+loro+al+numero+4+di+Privet+Drive%3A+una+strada+di+periferia+come+tante%2C+dove+non+succede+mai+nulla+fuori+dall%E2%80%99ordinario.+Finch%C3%A9+un+giorno%2C+poco+prima+del+suo+undicesimo+compleanno%2C+riceve+una+misteriosa+lettera+che+gli+rivela+la+sua+vera+natura%3A+Harry+%C3%A8+un+mago+e+la+Scuola+di+Magia+e+Stregoneria+di+Hogwarts+%C3%A8+pronta+ad+accoglierlo...&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3D9CJWTbd-RYoC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3D9CJWTbd-RYoC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9781781101582&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=1781101582&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3D9CJWTbd-RYoC%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=302&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsEpubBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsImageBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3D9CJWTbd-RYoC%26printsec%3Dfrontcover%26dq%3Dharry%2Bpotter%26hl%3D%26cd%3D1%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2015-12-08&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Pottermore&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=54&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Harry+Potter+e+la+Pietra+Filosofale&book%5Blist_type%5D=1" for 127.0.0.1 at 2018-06-13 10:19:41 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"nbxfWlvz9IMIzue2soLt71WcglMwUkAkJV2tOut3puR2HAH+WF3aoq36h5IWU71CcnJM2N7DE7DeQU4T6HUJlQ==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"acsTokenLink"=>"http://books.google.it/books/download/Harry_Potter_e_la_Pietra_Filosofale-sample-epub.acsm?id=9CJWTbd-RYoC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "pdf"=>{"acsTokenLink"=>"http://books.google.it/books/download/Harry_Potter_e_la_Pietra_Filosofale-sample-pdf.acsm?id=9CJWTbd-RYoC&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=9CJWTbd-RYoC&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"hY6MQeUSsoU", "id"=>"9CJWTbd-RYoC", "kind"=>"books#volume", "saleInfo"=>{"buyLink"=>"https://play.google.com/store/books/details?id=9CJWTbd-RYoC&rdid=book-9CJWTbd-RYoC&rdot=1&source=gbs_api", "country"=>"IT", "isEbook"=>"true", "listPrice"=>{"amount"=>"8.99", "currencyCode"=>"EUR"}, "offers"=>[{"finskyOfferType"=>"1", "listPrice"=>{"amountInMicros"=>"8990000.0", "currencyCode"=>"EUR"}, "retailPrice"=>{"amountInMicros"=>"8990000.0", "currencyCode"=>"EUR"}}], "retailPrice"=>{"amount"=>"8.99", "currencyCode"=>"EUR"}, "saleability"=>"FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"Harry Potter Ã¨ un ragazzo normale, o quantomeno Ã¨ convinto di esserlo, anche se a volte provoca strani fenomeni, come farsi ricrescere i capelli inesorabilmente tagliati dai perfidi zii."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/9CJWTbd-RYoC", "volumeInfo"=>{"allowAnonLogging"=>"true", "authors"=>["J.K. Rowling"], "averageRating"=>"4.5", "canonicalVolumeLink"=>"https://market.android.com/details?id=book-9CJWTbd-RYoC", "categories"=>["Juvenile Fiction"], "contentVersion"=>"1.7.7.0.preview.3", "description"=>"Harry Potter Ã¨ un ragazzo normale, o quantomeno Ã¨ convinto di esserlo, anche se a volte provoca strani fenomeni, come farsi ricrescere i capelli inesorabilmente tagliati dai perfidi zii. Vive con loro al numero 4 di Privet Drive: una strada di periferia come tante, dove non succede mai nulla fuori dallâ€™ordinario. FinchÃ© un giorno, poco prima del suo undicesimo compleanno, riceve una misteriosa lettera che gli rivela la sua vera natura: Harry Ã¨ un mago e la Scuola di Magia e Stregoneria di Hogwarts Ã¨ pronta ad accoglierlo...", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=9CJWTbd-RYoC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=9CJWTbd-RYoC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9781781101582", "type"=>"ISBN_13"}, {"identifier"=>"1781101582", "type"=>"ISBN_10"}], "infoLink"=>"https://play.google.com/store/books/details?id=9CJWTbd-RYoC&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"302", "panelizationSummary"=>{"containsEpubBubbles"=>"false", "containsImageBubbles"=>"false"}, "previewLink"=>"http://books.google.it/books?id=9CJWTbd-RYoC&printsec=frontcover&dq=harry+potter&hl=&cd=1&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2015-12-08", "publisher"=>"Pottermore", "ratingsCount"=>"54", "readingModes"=>{"image"=>"true", "text"=>"true"}, "title"=>"Harry Potter e la Pietra Filosofale"}}, "list_type"=>"1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 3], ["google_id", "9CJWTbd-RYoC"], ["list_type", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 1], ["book_title", "Harry Potter e la Pietra Filosofale"], ["book_authors", "[\"J.K. Rowling\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=9CJWTbd-RYoC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"], ["publisher", "Pottermore"], ["identifier", "[\"ISBN_13\", \"9781781101582\"]"], ["user_id", 3], ["created_at", "2018-06-13 08:19:41.559808"], ["updated_at", "2018-06-13 08:19:41.559808"], ["google_id", "9CJWTbd-RYoC"]]
  [1m[35m (17.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: 9ce01cc8-b0aa-472f-a6f0-863ab6cffc6d) to Async(default) with arguments: #<GlobalID:0x00000007033e30 @uri=#<URI::GID gid://flealibrary/Ad/3>>
Completed 302 Found in 53ms (ActiveRecord: 21.6ms)


  [1m[36mAd Load (0.9ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [9ce01cc8-b0aa-472f-a6f0-863ab6cffc6d] Performing CreateNotificationsJob (Job ID: 9ce01cc8-b0aa-472f-a6f0-863ab6cffc6d) from Async(default) with arguments: #<GlobalID:0x00000006fec148 @uri=#<URI::GID gid://flealibrary/Ad/3>>
[ActiveJob] [CreateNotificationsJob] [9ce01cc8-b0aa-472f-a6f0-863ab6cffc6d]   [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'harry potter e la pietra filosofale' AND id != 3)[0m
[ActiveJob] [CreateNotificationsJob] [9ce01cc8-b0aa-472f-a6f0-863ab6cffc6d] Performed CreateNotificationsJob (Job ID: 9ce01cc8-b0aa-472f-a6f0-863ab6cffc6d) from Async(default) in 2.16ms
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-13 10:19:41 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.4ms)
  Rendered home/_chats_index.html.erb (1.2ms)
  Rendered home/profile.html.erb within layouts/application (19.8ms)
Completed 200 OK in 92ms (Views: 80.1ms | ActiveRecord: 2.7ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:19:42 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:19:42 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:19:46 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=harry+potter&commit=Search" for 127.0.0.1 at 2018-06-13 10:19:46 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["harry potter"], "commit"=>"Search"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (184.9ms)
Completed 200 OK in 1057ms (Views: 239.8ms | ActiveRecord: 0.8ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:19:48 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:19:48 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:19:52 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FHarry_Potter_e_il_Calice_di_Fuoco-sample-epub.acsm%3Fid%3D4dvptppOG8MC%26format%3Depub%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FHarry_Potter_e_il_Calice_di_Fuoco-sample-pdf.acsm%3Fid%3D4dvptppOG8MC%26format%3Dpdf%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3D4dvptppOG8MC%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=URKrbSlF3hA&book%5Bid%5D%5Bid%5D=4dvptppOG8MC&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5BbuyLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3D4dvptppOG8MC%26rdid%3Dbook-4dvptppOG8MC%26rdot%3D1%26source%3Dgbs_api&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=true&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5Bamount%5D=8.99&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BfinskyOfferType%5D=1&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BamountInMicros%5D=8990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BamountInMicros%5D=8990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5Bamount%5D=8.99&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=Questo+che+avete+tra+le+mani+%C3%A8+il+volume+centrale+delle+avventure+di+Harry+Potter.+%C3%88+un+momento+cruciale+nella+vita+di+Harry%3A+ormai+%C3%A8+un+mago+adolescente%2C+vuole+andarsene+dalla+casa+dei+perfidi+Dursley%2C+vuole+sognare+la+Cercatrice+di+...&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2F4dvptppOG8MC&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=J.K.+Rowling&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.5&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fmarket.android.com%2Fdetails%3Fid%3Dbook-4dvptppOG8MC&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Juvenile+Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=1.3.4.0.preview.3&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=Questo+che+avete+tra+le+mani+%C3%A8+il+volume+centrale+delle+avventure+di+Harry+Potter.+%C3%88+un+momento+cruciale+nella+vita+di+Harry%3A+ormai+%C3%A8+un+mago+adolescente%2C+vuole+andarsene+dalla+casa+dei+perfidi+Dursley%2C+vuole+sognare+la+Cercatrice+di+Corvonero+per+cui+ha+una+cotta+tremenda...&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3D4dvptppOG8MC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3D4dvptppOG8MC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9781781102145&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=1781102147&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3D4dvptppOG8MC%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=655&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsEpubBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsImageBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3D4dvptppOG8MC%26printsec%3Dfrontcover%26dq%3Dharry%2Bpotter%26hl%3D%26cd%3D2%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2015-12-08&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Pottermore&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=32&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Harry+Potter+e+il+Calice+di+Fuoco&book%5Blist_type%5D=1" for 127.0.0.1 at 2018-06-13 10:19:52 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"1X6xMPDXrShAYlYGYPn2l6jbZvhYAb/z0JmFLu+Svo0+3u+U83mDCeVWNiLEKKY6jzWoc7aQ7GcrhWYH7JAR/A==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"acsTokenLink"=>"http://books.google.it/books/download/Harry_Potter_e_il_Calice_di_Fuoco-sample-epub.acsm?id=4dvptppOG8MC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "pdf"=>{"acsTokenLink"=>"http://books.google.it/books/download/Harry_Potter_e_il_Calice_di_Fuoco-sample-pdf.acsm?id=4dvptppOG8MC&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=4dvptppOG8MC&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"URKrbSlF3hA", "id"=>"4dvptppOG8MC", "kind"=>"books#volume", "saleInfo"=>{"buyLink"=>"https://play.google.com/store/books/details?id=4dvptppOG8MC&rdid=book-4dvptppOG8MC&rdot=1&source=gbs_api", "country"=>"IT", "isEbook"=>"true", "listPrice"=>{"amount"=>"8.99", "currencyCode"=>"EUR"}, "offers"=>[{"finskyOfferType"=>"1", "listPrice"=>{"amountInMicros"=>"8990000.0", "currencyCode"=>"EUR"}, "retailPrice"=>{"amountInMicros"=>"8990000.0", "currencyCode"=>"EUR"}}], "retailPrice"=>{"amount"=>"8.99", "currencyCode"=>"EUR"}, "saleability"=>"FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"Questo che avete tra le mani Ã¨ il volume centrale delle avventure di Harry Potter. Ãˆ un momento cruciale nella vita di Harry: ormai Ã¨ un mago adolescente, vuole andarsene dalla casa dei perfidi Dursley, vuole sognare la Cercatrice di ..."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/4dvptppOG8MC", "volumeInfo"=>{"allowAnonLogging"=>"true", "authors"=>["J.K. Rowling"], "averageRating"=>"4.5", "canonicalVolumeLink"=>"https://market.android.com/details?id=book-4dvptppOG8MC", "categories"=>["Juvenile Fiction"], "contentVersion"=>"1.3.4.0.preview.3", "description"=>"Questo che avete tra le mani Ã¨ il volume centrale delle avventure di Harry Potter. Ãˆ un momento cruciale nella vita di Harry: ormai Ã¨ un mago adolescente, vuole andarsene dalla casa dei perfidi Dursley, vuole sognare la Cercatrice di Corvonero per cui ha una cotta tremenda...", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=4dvptppOG8MC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=4dvptppOG8MC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9781781102145", "type"=>"ISBN_13"}, {"identifier"=>"1781102147", "type"=>"ISBN_10"}], "infoLink"=>"https://play.google.com/store/books/details?id=4dvptppOG8MC&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"655", "panelizationSummary"=>{"containsEpubBubbles"=>"false", "containsImageBubbles"=>"false"}, "previewLink"=>"http://books.google.it/books?id=4dvptppOG8MC&printsec=frontcover&dq=harry+potter&hl=&cd=2&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2015-12-08", "publisher"=>"Pottermore", "ratingsCount"=>"32", "readingModes"=>{"image"=>"true", "text"=>"true"}, "title"=>"Harry Potter e il Calice di Fuoco"}}, "list_type"=>"1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 3], ["google_id", "4dvptppOG8MC"], ["list_type", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 1], ["book_title", "Harry Potter e il Calice di Fuoco"], ["book_authors", "[\"J.K. Rowling\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=4dvptppOG8MC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"], ["publisher", "Pottermore"], ["identifier", "[\"ISBN_13\", \"9781781102145\"]"], ["user_id", 3], ["created_at", "2018-06-13 08:19:52.700717"], ["updated_at", "2018-06-13 08:19:52.700717"], ["google_id", "4dvptppOG8MC"]]
  [1m[35m (22.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: af279fe3-063b-49a8-aec2-e090f862739a) to Async(default) with arguments: #<GlobalID:0x007fa99655a3d8 @uri=#<URI::GID gid://flealibrary/Ad/4>>
Completed 302 Found in 56ms (ActiveRecord: 26.0ms)


  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [af279fe3-063b-49a8-aec2-e090f862739a] Performing CreateNotificationsJob (Job ID: af279fe3-063b-49a8-aec2-e090f862739a) from Async(default) with arguments: #<GlobalID:0x007fa9889918b0 @uri=#<URI::GID gid://flealibrary/Ad/4>>
[ActiveJob] [CreateNotificationsJob] [af279fe3-063b-49a8-aec2-e090f862739a]   [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'harry potter e il calice di fuoco' AND id != 4)[0m
[ActiveJob] [CreateNotificationsJob] [af279fe3-063b-49a8-aec2-e090f862739a] Performed CreateNotificationsJob (Job ID: af279fe3-063b-49a8-aec2-e090f862739a) from Async(default) in 2.02ms
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-13 10:19:52 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (2.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (14.3ms)
  Rendered home/_chats_index.html.erb (5.7ms)
  Rendered home/profile.html.erb within layouts/application (27.7ms)
Completed 200 OK in 100ms (Views: 85.5ms | ActiveRecord: 5.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:19:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:19:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:19:56 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/" for 127.0.0.1 at 2018-06-13 10:19:56 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.9ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (1.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (13.3ms)
  Rendered home/welcome.html.erb within layouts/application (16.6ms)
Completed 200 OK in 89ms (Views: 78.1ms | ActiveRecord: 4.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:19:57 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:19:57 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:20:02 +0200
MailboxChannel stopped streaming from mailbox_
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-13 10:20:03 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"rJjjxyZ5CY3kzRq+exJbmKG5q5zgVRpWGQDETcjwSmpHOL1jJdcnrEH5eprfwws1hldlFw7EScLiHCdky/LlGw=="}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 60ms (ActiveRecord: 0.9ms)


Started GET "/" for 127.0.0.1 at 2018-06-13 10:20:03 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (16.5ms)
  Rendered home/welcome.html.erb within layouts/application (21.8ms)
Completed 200 OK in 96ms (Views: 89.2ms | ActiveRecord: 1.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:20:03 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:20:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:20:05 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/users/sign_up" for 127.0.0.1 at 2018-06-13 10:20:05 +0200
Processing by Users::RegistrationsController#new as HTML
  Rendering users/registrations/new.html.erb within layouts/application
  Rendered users/registrations/new.html.erb within layouts/application (28.1ms)
Completed 200 OK in 100ms (Views: 97.8ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:20:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:20:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:20:55 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/users" for 127.0.0.1 at 2018-06-13 10:20:55 +0200
Processing by Users::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"3rOIhufRqYtFhhja8EuhoWkpwVyqVOY7K3N9N6sAtu3uwdKTGtoUNALhlSfzJcwfWzBH81+K/PDXQedsfFoFzg==", "user"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fa989c62f48 @tempfile=#<Tempfile:/tmp/RackMultipart20180613-6531-1d0yunq.jpg>, @original_filename="wp1828901.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"user[image]\"; filename=\"wp1828901.jpg\"\r\nContent-Type: image/jpeg\r\n">, "name"=>"Francesca", "surname"=>"Fabrizi", "username"=>"FraFra", "cap"=>"00015", "radius"=>"30", "email"=>"francesca@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up"}
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "francesca@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "FraFra"], ["LIMIT", 1]]
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "image", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Francesca"], ["surname", "Fabrizi"], ["username", "FraFra"], ["email", "francesca@gmail.com"], ["encrypted_password", "$2a$11$7WhdK7uzIPD4sInug9RE3.y5uIrLVZsfSKHLqbwLzB6RIyApqQAwm"], ["created_at", "2018-06-13 08:20:55.564833"], ["updated_at", "2018-06-13 08:20:55.564833"], ["image", "wp1828901.jpg"], ["cap", "00015"], ["radius", "30"]]
  [1m[35m (18.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "current_sign_in_ip" = $4, "last_sign_in_ip" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["sign_in_count", 1], ["current_sign_in_at", "2018-06-13 08:20:55.596382"], ["last_sign_in_at", "2018-06-13 08:20:55.596382"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["updated_at", "2018-06-13 08:20:55.597492"], ["id", 5]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/5
Completed 302 Found in 269ms (ActiveRecord: 28.3ms)


Started GET "/users/profile/5" for 127.0.0.1 at 2018-06-13 10:20:55 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 5 OR guest_id = 5)[0m
  Rendered home/_chat.html.erb (6.5ms)
  Rendered home/_chats_index.html.erb (1.0ms)
  Rendered home/profile.html.erb within layouts/application (16.3ms)
Completed 200 OK in 96ms (Views: 84.2ms | ActiveRecord: 3.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:20:56 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:20:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_5
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:21:06 +0200
MailboxChannel stopped streaming from mailbox_5
Started GET "/books_results?utf8=%E2%9C%93&search%5B%5D=harry+potter&commit=Search" for 127.0.0.1 at 2018-06-13 10:21:06 +0200
Processing by HomeController#books_results as HTML
  Parameters: {"utf8"=>"âœ“", "search"=>["harry potter"], "commit"=>"Search"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/books_results.html.erb within layouts/application
  Rendered home/books_results.html.erb within layouts/application (193.5ms)
Completed 200 OK in 1367ms (Views: 252.1ms | ActiveRecord: 0.7ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:21:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:21:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:21:15 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/ads?book%5Bid%5D%5BaccessInfo%5D%5BaccessViewStatus%5D=SAMPLE&book%5Bid%5D%5BaccessInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BaccessInfo%5D%5Bembeddable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FHarry_Potter_e_il_Calice_di_Fuoco-sample-epub.acsm%3Fid%3D4dvptppOG8MC%26format%3Depub%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bepub%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BacsTokenLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%2Fdownload%2FHarry_Potter_e_il_Calice_di_Fuoco-sample-pdf.acsm%3Fid%3D4dvptppOG8MC%26format%3Dpdf%26output%3Dacs4_fulfillment_token%26dl_type%3Dsample%26source%3Dgbs_api&book%5Bid%5D%5BaccessInfo%5D%5Bpdf%5D%5BisAvailable%5D=true&book%5Bid%5D%5BaccessInfo%5D%5BpublicDomain%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BquoteSharingAllowed%5D=false&book%5Bid%5D%5BaccessInfo%5D%5BtextToSpeechPermission%5D=ALLOWED&book%5Bid%5D%5BaccessInfo%5D%5Bviewability%5D=PARTIAL&book%5Bid%5D%5BaccessInfo%5D%5BwebReaderLink%5D=http%3A%2F%2Fplay.google.com%2Fbooks%2Freader%3Fid%3D4dvptppOG8MC%26hl%3D%26printsec%3Dfrontcover%26source%3Dgbs_api&book%5Bid%5D%5Betag%5D=vWZique1Bao&book%5Bid%5D%5Bid%5D=4dvptppOG8MC&book%5Bid%5D%5Bkind%5D=books%23volume&book%5Bid%5D%5BsaleInfo%5D%5BbuyLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3D4dvptppOG8MC%26rdid%3Dbook-4dvptppOG8MC%26rdot%3D1%26source%3Dgbs_api&book%5Bid%5D%5BsaleInfo%5D%5Bcountry%5D=IT&book%5Bid%5D%5BsaleInfo%5D%5BisEbook%5D=true&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5Bamount%5D=8.99&book%5Bid%5D%5BsaleInfo%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BfinskyOfferType%5D=1&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BamountInMicros%5D=8990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BlistPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BamountInMicros%5D=8990000.0&book%5Bid%5D%5BsaleInfo%5D%5Boffers%5D%5B%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5Bamount%5D=8.99&book%5Bid%5D%5BsaleInfo%5D%5BretailPrice%5D%5BcurrencyCode%5D=EUR&book%5Bid%5D%5BsaleInfo%5D%5Bsaleability%5D=FOR_SALE&book%5Bid%5D%5BsearchInfo%5D%5BtextSnippet%5D=Questo+che+avete+tra+le+mani+%C3%A8+il+volume+centrale+delle+avventure+di+Harry+Potter.+%C3%88+un+momento+cruciale+nella+vita+di+Harry%3A+ormai+%C3%A8+un+mago+adolescente%2C+vuole+andarsene+dalla+casa+dei+perfidi+Dursley%2C+vuole+sognare+la+Cercatrice+di+...&book%5Bid%5D%5BselfLink%5D=https%3A%2F%2Fwww.googleapis.com%2Fbooks%2Fv1%2Fvolumes%2F4dvptppOG8MC&book%5Bid%5D%5BvolumeInfo%5D%5BallowAnonLogging%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Bauthors%5D%5B%5D=J.K.+Rowling&book%5Bid%5D%5BvolumeInfo%5D%5BaverageRating%5D=4.5&book%5Bid%5D%5BvolumeInfo%5D%5BcanonicalVolumeLink%5D=https%3A%2F%2Fmarket.android.com%2Fdetails%3Fid%3Dbook-4dvptppOG8MC&book%5Bid%5D%5BvolumeInfo%5D%5Bcategories%5D%5B%5D=Juvenile+Fiction&book%5Bid%5D%5BvolumeInfo%5D%5BcontentVersion%5D=1.3.4.0.preview.3&book%5Bid%5D%5BvolumeInfo%5D%5Bdescription%5D=Questo+che+avete+tra+le+mani+%C3%A8+il+volume+centrale+delle+avventure+di+Harry+Potter.+%C3%88+un+momento+cruciale+nella+vita+di+Harry%3A+ormai+%C3%A8+un+mago+adolescente%2C+vuole+andarsene+dalla+casa+dei+perfidi+Dursley%2C+vuole+sognare+la+Cercatrice+di+Corvonero+per+cui+ha+una+cotta+tremenda...&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5BsmallThumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3D4dvptppOG8MC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D5%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BimageLinks%5D%5Bthumbnail%5D=http%3A%2F%2Fbooks.google.com%2Fbooks%2Fcontent%3Fid%3D4dvptppOG8MC%26printsec%3Dfrontcover%26img%3D1%26zoom%3D1%26edge%3Dcurl%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=9781781102145&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_13&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Bidentifier%5D=1781102147&book%5Bid%5D%5BvolumeInfo%5D%5BindustryIdentifiers%5D%5B%5D%5Btype%5D=ISBN_10&book%5Bid%5D%5BvolumeInfo%5D%5BinfoLink%5D=https%3A%2F%2Fplay.google.com%2Fstore%2Fbooks%2Fdetails%3Fid%3D4dvptppOG8MC%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5Blanguage%5D=it&book%5Bid%5D%5BvolumeInfo%5D%5BmaturityRating%5D=NOT_MATURE&book%5Bid%5D%5BvolumeInfo%5D%5BpageCount%5D=655&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsEpubBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpanelizationSummary%5D%5BcontainsImageBubbles%5D=false&book%5Bid%5D%5BvolumeInfo%5D%5BpreviewLink%5D=http%3A%2F%2Fbooks.google.it%2Fbooks%3Fid%3D4dvptppOG8MC%26printsec%3Dfrontcover%26dq%3Dharry%2Bpotter%26hl%3D%26cd%3D3%26source%3Dgbs_api&book%5Bid%5D%5BvolumeInfo%5D%5BprintType%5D=BOOK&book%5Bid%5D%5BvolumeInfo%5D%5BpublishedDate%5D=2015-12-08&book%5Bid%5D%5BvolumeInfo%5D%5Bpublisher%5D=Pottermore&book%5Bid%5D%5BvolumeInfo%5D%5BratingsCount%5D=32&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Bimage%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5BreadingModes%5D%5Btext%5D=true&book%5Bid%5D%5BvolumeInfo%5D%5Btitle%5D=Harry+Potter+e+il+Calice+di+Fuoco&book%5Blist_type%5D=0" for 127.0.0.1 at 2018-06-13 10:21:15 +0200
Processing by AdsController#create as HTML
  Parameters: {"authenticity_token"=>"k8UuBL2E5M4mN9Oy8FMhIxLF/PYJ+B4C58sHe/EExaejt3QRQI9ZcWFQXk/zPUydINx6WfwmBMkb+Z0gJl52hA==", "book"=>{"id"=>{"accessInfo"=>{"accessViewStatus"=>"SAMPLE", "country"=>"IT", "embeddable"=>"true", "epub"=>{"acsTokenLink"=>"http://books.google.it/books/download/Harry_Potter_e_il_Calice_di_Fuoco-sample-epub.acsm?id=4dvptppOG8MC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "pdf"=>{"acsTokenLink"=>"http://books.google.it/books/download/Harry_Potter_e_il_Calice_di_Fuoco-sample-pdf.acsm?id=4dvptppOG8MC&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api", "isAvailable"=>"true"}, "publicDomain"=>"false", "quoteSharingAllowed"=>"false", "textToSpeechPermission"=>"ALLOWED", "viewability"=>"PARTIAL", "webReaderLink"=>"http://play.google.com/books/reader?id=4dvptppOG8MC&hl=&printsec=frontcover&source=gbs_api"}, "etag"=>"vWZique1Bao", "id"=>"4dvptppOG8MC", "kind"=>"books#volume", "saleInfo"=>{"buyLink"=>"https://play.google.com/store/books/details?id=4dvptppOG8MC&rdid=book-4dvptppOG8MC&rdot=1&source=gbs_api", "country"=>"IT", "isEbook"=>"true", "listPrice"=>{"amount"=>"8.99", "currencyCode"=>"EUR"}, "offers"=>[{"finskyOfferType"=>"1", "listPrice"=>{"amountInMicros"=>"8990000.0", "currencyCode"=>"EUR"}, "retailPrice"=>{"amountInMicros"=>"8990000.0", "currencyCode"=>"EUR"}}], "retailPrice"=>{"amount"=>"8.99", "currencyCode"=>"EUR"}, "saleability"=>"FOR_SALE"}, "searchInfo"=>{"textSnippet"=>"Questo che avete tra le mani Ã¨ il volume centrale delle avventure di Harry Potter. Ãˆ un momento cruciale nella vita di Harry: ormai Ã¨ un mago adolescente, vuole andarsene dalla casa dei perfidi Dursley, vuole sognare la Cercatrice di ..."}, "selfLink"=>"https://www.googleapis.com/books/v1/volumes/4dvptppOG8MC", "volumeInfo"=>{"allowAnonLogging"=>"true", "authors"=>["J.K. Rowling"], "averageRating"=>"4.5", "canonicalVolumeLink"=>"https://market.android.com/details?id=book-4dvptppOG8MC", "categories"=>["Juvenile Fiction"], "contentVersion"=>"1.3.4.0.preview.3", "description"=>"Questo che avete tra le mani Ã¨ il volume centrale delle avventure di Harry Potter. Ãˆ un momento cruciale nella vita di Harry: ormai Ã¨ un mago adolescente, vuole andarsene dalla casa dei perfidi Dursley, vuole sognare la Cercatrice di Corvonero per cui ha una cotta tremenda...", "imageLinks"=>{"smallThumbnail"=>"http://books.google.com/books/content?id=4dvptppOG8MC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api", "thumbnail"=>"http://books.google.com/books/content?id=4dvptppOG8MC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}, "industryIdentifiers"=>[{"identifier"=>"9781781102145", "type"=>"ISBN_13"}, {"identifier"=>"1781102147", "type"=>"ISBN_10"}], "infoLink"=>"https://play.google.com/store/books/details?id=4dvptppOG8MC&source=gbs_api", "language"=>"it", "maturityRating"=>"NOT_MATURE", "pageCount"=>"655", "panelizationSummary"=>{"containsEpubBubbles"=>"false", "containsImageBubbles"=>"false"}, "previewLink"=>"http://books.google.it/books?id=4dvptppOG8MC&printsec=frontcover&dq=harry+potter&hl=&cd=3&source=gbs_api", "printType"=>"BOOK", "publishedDate"=>"2015-12-08", "publisher"=>"Pottermore", "ratingsCount"=>"32", "readingModes"=>{"image"=>"true", "text"=>"true"}, "title"=>"Harry Potter e il Calice di Fuoco"}}, "list_type"=>"0"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."google_id" = $2 AND "ads"."list_type" = $3[0m  [["user_id", 5], ["google_id", "4dvptppOG8MC"], ["list_type", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "FraFra"], ["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "ads" ("list_type", "book_title", "book_authors", "link_to_coverbook", "publisher", "identifier", "user_id", "created_at", "updated_at", "google_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["list_type", 0], ["book_title", "Harry Potter e il Calice di Fuoco"], ["book_authors", "[\"J.K. Rowling\"]"], ["link_to_coverbook", "http://books.google.com/books/content?id=4dvptppOG8MC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"], ["publisher", "Pottermore"], ["identifier", "[\"ISBN_13\", \"9781781102145\"]"], ["user_id", 5], ["created_at", "2018-06-13 08:21:16.002070"], ["updated_at", "2018-06-13 08:21:16.002070"], ["google_id", "4dvptppOG8MC"]]
  [1m[35m (14.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/5
[ActiveJob] Enqueued CreateNotificationsJob (Job ID: 71535032-096d-40f2-bb1c-8ed04a27e991) to Async(default) with arguments: #<GlobalID:0x007fa989aa0a48 @uri=#<URI::GID gid://flealibrary/Ad/5>>
Completed 302 Found in 52ms (ActiveRecord: 18.5ms)


  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991] Performing CreateNotificationsJob (Job ID: 71535032-096d-40f2-bb1c-8ed04a27e991) from Async(default) with arguments: #<GlobalID:0x007fa98993c2d8 @uri=#<URI::GID gid://flealibrary/Ad/5>>
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[36mAd Load (2.9ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE (LOWER(book_title) = 'harry potter e il calice di fuoco' AND id != 5)[0m
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
Started GET "/users/profile/5" for 127.0.0.1 at 2018-06-13 10:21:16 +0200
Processing by HomeController#profile as HTML
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[35m (3.6ms)[0m  [1m[35mBEGIN[0m
  Parameters: {"id"=>"5"}
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "notifications" ("created_at", "updated_at", "user_id", "ad_id", "displayed") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-13 08:21:16.074440"], ["updated_at", "2018-06-13 08:21:16.074440"], ["user_id", 5], ["ad_id", 4], ["displayed", 0]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[35m (15.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mChat Load (1.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 5 OR guest_id = 5)[0m
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (3.0ms)
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  Rendered home/_chats_index.html.erb (1.4ms)
  Rendered home/profile.html.erb within layouts/application (15.9ms)
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[35mSQL (4.7ms)[0m  [1m[32mINSERT INTO "notifications" ("created_at", "updated_at", "user_id", "ad_id", "displayed") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-13 08:21:16.106179"], ["updated_at", "2018-06-13 08:21:16.106179"], ["user_id", 3], ["ad_id", 5], ["displayed", 0]]
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "FraFra"], ["id", 5], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[35mSQL (2.3ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 1], ["updated_at", "2018-06-13 08:21:16.155742"], ["id", 5]]
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[35m (12.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
Completed 200 OK in 132ms (Views: 119.9ms | ActiveRecord: 4.0ms)


[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[36mUser Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[35mSQL (3.3ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 1], ["updated_at", "2018-06-13 08:21:16.210219"], ["id", 3]]
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991]   [1m[35m (12.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991] [ActionCable] Broadcasting to mailbox_5: {:type=>"new_notification"}
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991] [ActionCable] Broadcasting to mailbox_3: {:type=>"new_notification"}
[ActiveJob] [CreateNotificationsJob] [71535032-096d-40f2-bb1c-8ed04a27e991] Performed CreateNotificationsJob (Job ID: 71535032-096d-40f2-bb1c-8ed04a27e991) from Async(default) in 204.16ms
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:21:16 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:21:16 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_5
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:21:18 +0200
MailboxChannel stopped streaming from mailbox_5
Started GET "/" for 127.0.0.1 at 2018-06-13 10:21:18 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mAd Load (0.8ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 5]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (11.6ms)
  Rendered home/welcome.html.erb within layouts/application (16.4ms)
Completed 200 OK in 1041ms (Views: 70.8ms | ActiveRecord: 3.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:21:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:21:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:21:23 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/notifications" for 127.0.0.1 at 2018-06-13 10:21:23 +0200
Processing by NotificationsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mNotification Load (0.5ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."user_id" = $1[0m  [["user_id", 5]]
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[33mUPDATE "notifications" SET "displayed" = $1, "updated_at" = $2 WHERE "notifications"."id" = $3[0m  [["displayed", 1], ["updated_at", "2018-06-13 08:21:23.235352"], ["id", 1]]
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "FraFra"], ["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 0], ["updated_at", "2018-06-13 08:21:23.260755"], ["id", 5]]
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  Rendering notifications/index.html.erb within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (8.1ms)
  Rendered _ads_list.html.erb (0.0ms)
  Rendered notifications/index.html.erb within layouts/application (15.9ms)
Completed 200 OK in 142ms (Views: 77.9ms | ActiveRecord: 20.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:21:23 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:21:23 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/create_chat" for 127.0.0.1 at 2018-06-13 10:21:41 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-13 08:21:41.745006"], ["updated_at", "2018-06-13 08:21:41.745006"], ["owner_id", 5], ["guest_id", 3]]
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"create_chat"}
Completed 200 OK in 23ms (Views: 0.3ms | ActiveRecord: 10.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:21:45 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-13 10:21:45 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 5]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (12.0ms)
  Rendered home/welcome.html.erb within layouts/application (15.6ms)
Completed 200 OK in 804ms (Views: 94.9ms | ActiveRecord: 6.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:21:46 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:21:46 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:21:48 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/users/profile/5" for 127.0.0.1 at 2018-06-13 10:21:48 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 5 OR guest_id = 5)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (6.8ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (11.8ms)
  Rendered home/profile.html.erb within layouts/application (25.0ms)
Completed 200 OK in 95ms (Views: 82.1ms | ActiveRecord: 5.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:21:49 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:21:49 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_5
Started POST "/send_message" for 127.0.0.1 at 2018-06-13 10:21:56 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"Ciaooo"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-13 08:21:56.185379"], ["updated_at", "2018-06-13 08:21:56.185379"], ["text", "Ciaooo"], ["chat_id", 3]]
  [1m[35m (12.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"Ciaooo"}
Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 18.0ms)


Started POST "/send_message" for 127.0.0.1 at 2018-06-13 10:22:00 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"come stai?"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-13 08:22:00.462792"], ["updated_at", "2018-06-13 08:22:00.462792"], ["text", "come stai?"], ["chat_id", 3]]
  [1m[35m (11.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"come stai?"}
Completed 200 OK in 36ms (Views: 0.3ms | ActiveRecord: 16.1ms)


Started POST "/send_message" for 127.0.0.1 at 2018-06-13 10:22:09 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"ho visto che hai un libro che mi interessa"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-13 08:22:09.679684"], ["updated_at", "2018-06-13 08:22:09.679684"], ["text", "ho visto che hai un libro che mi interessa"], ["chat_id", 3]]
  [1m[35m (16.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"ho visto che hai un libro che mi interessa"}
Completed 200 OK in 38ms (Views: 0.4ms | ActiveRecord: 19.8ms)


Started GET "/" for 127.0.0.1 at 2018-06-13 10:22:54 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (1.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (18.6ms)
  Rendered home/welcome.html.erb within layouts/application (22.3ms)
Completed 200 OK in 624ms (Views: 616.1ms | ActiveRecord: 3.3ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:22:56 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:22:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-13 10:23:22 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (5.1ms)
Completed 200 OK in 109ms (Views: 106.3ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:22 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:23:22 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-13 10:23:29 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"5LM0uTrlSOcBOQTPy5TCG2rmD1qJ/LWMAnFRUWzyXD/tfpZKjjdRVdHU5DpdG1EZ73jZkp5BArTpbQmnaldVrw==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2018-06-13 08:23:29.580563"], ["sign_in_count", 2], ["updated_at", "2018-06-13 08:23:29.581954"], ["id", 3]]
  [1m[35m (90.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
Completed 302 Found in 307ms (ActiveRecord: 92.1ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-13 10:23:29 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (1.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (21.1ms)
  Rendered home/_chats_index.html.erb (2.7ms)
  Rendered home/profile.html.erb within layouts/application (34.5ms)
Completed 200 OK in 121ms (Views: 108.7ms | ActiveRecord: 5.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:29 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:23:30 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:30 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/notifications" for 127.0.0.1 at 2018-06-13 10:23:32 +0200
Processing by NotificationsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mNotification Load (1.4ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."user_id" = $1[0m  [["user_id", 3]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "notifications" SET "displayed" = $1, "updated_at" = $2 WHERE "notifications"."id" = $3[0m  [["displayed", 1], ["updated_at", "2018-06-13 08:23:32.439114"], ["id", 2]]
  [1m[35m (16.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "notifications_counter" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["notifications_counter", 0], ["updated_at", "2018-06-13 08:23:32.471633"], ["id", 3]]
  [1m[35m (13.4ms)[0m  [1m[35mCOMMIT[0m
  Rendering notifications/index.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (6.2ms)
  Rendered _ads_list.html.erb (0.4ms)
  Rendered notifications/index.html.erb within layouts/application (12.6ms)
Completed 200 OK in 143ms (Views: 78.9ms | ActiveRecord: 36.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:32 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:23:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/notifications" for 127.0.0.1 at 2018-06-13 10:23:35 +0200
Processing by NotificationsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."user_id" = $1[0m  [["user_id", 3]]
  [1m[36mAd Load (1.8ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  Rendering notifications/index.html.erb within layouts/application
  Rendered _ads_list.html.erb (1.8ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.7ms)
  Rendered notifications/index.html.erb within layouts/application (9.7ms)
Completed 200 OK in 91ms (Views: 60.2ms | ActiveRecord: 5.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:35 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:23:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-13 10:23:37 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (1.1ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.5ms)
  Rendered home/welcome.html.erb within layouts/application (6.7ms)
Completed 200 OK in 250ms (Views: 80.8ms | ActiveRecord: 2.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:37 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:23:37 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:37 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-13 10:23:46 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.8ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (2.7ms)
  Rendered home/welcome.html.erb within layouts/application (6.0ms)
Completed 200 OK in 301ms (Views: 85.0ms | ActiveRecord: 2.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:47 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:23:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/notifications" for 127.0.0.1 at 2018-06-13 10:23:52 +0200
Processing by NotificationsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mNotification Load (0.4ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."user_id" = $1[0m  [["user_id", 3]]
  [1m[36mAd Load (1.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  Rendering notifications/index.html.erb within layouts/application
  Rendered _ads_list.html.erb (2.2ms)
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (5.1ms)
  Rendered notifications/index.html.erb within layouts/application (12.1ms)
Completed 200 OK in 111ms (Views: 81.9ms | ActiveRecord: 6.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:52 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:23:52 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:52 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-13 10:23:59 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (2.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (1.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (28.1ms)
  Rendered home/_chats_index.html.erb (3.1ms)
  Rendered home/profile.html.erb within layouts/application (43.9ms)
Completed 200 OK in 112ms (Views: 96.0ms | ActiveRecord: 10.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:59 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:23:59 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:23:59 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started POST "/send_message" for 127.0.0.1 at 2018-06-13 10:24:11 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"ciaooo"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-13 08:24:11.873214"], ["updated_at", "2018-06-13 08:24:11.873214"], ["text", "ciaooo"], ["from", 1], ["chat_id", 3]]
  [1m[35m (13.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_5: {:type=>"message", :chat_id=>3, :text=>"ciaooo"}
MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"ciaooo"} (via streamed from mailbox_5)
Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 18.6ms)


Started GET "/" for 127.0.0.1 at 2018-06-13 10:25:04 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.7ms)
  Rendered home/welcome.html.erb within layouts/application (6.3ms)
Completed 200 OK in 305ms (Views: 115.7ms | ActiveRecord: 3.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:25:04 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:25:04 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:25:04 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-13 10:25:06 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (1.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (25.5ms)
  Rendered home/_chats_index.html.erb (2.0ms)
  Rendered home/profile.html.erb within layouts/application (34.1ms)
Completed 200 OK in 128ms (Views: 113.0ms | ActiveRecord: 7.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:25:06 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:25:07 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:25:07 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/profile/wish_list?id=3&list_type=0" for 127.0.0.1 at 2018-06-13 10:25:13 +0200
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"3", "list_type"=>"0"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (0.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 0]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (5.3ms)
  Rendered ads/wish.html.erb within layouts/application (6.7ms)
Completed 200 OK in 113ms (Views: 53.9ms | ActiveRecord: 1.5ms)


Started GET "/profile/wish_list?id=3&list_type=0" for 127.0.0.1 at 2018-06-13 10:25:23 +0200
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"3", "list_type"=>"0"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (1.0ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 0]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (10.8ms)
  Rendered ads/wish.html.erb within layouts/application (14.9ms)
Completed 200 OK in 86ms (Views: 79.9ms | ActiveRecord: 2.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:25:23 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:25:24 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:25:24 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/profile/wish_list?id=3&list_type=0" for 127.0.0.1 at 2018-06-13 10:26:57 +0200
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"3", "list_type"=>"0"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 0]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (12.9ms)
  Rendered ads/wish.html.erb within layouts/application (14.9ms)
Completed 200 OK in 94ms (Views: 86.9ms | ActiveRecord: 2.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:26:57 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:26:57 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:26:57 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started DELETE "/ads/1" for 127.0.0.1 at 2018-06-13 10:27:03 +0200
Processing by AdsController#destroy as HTML
  Parameters: {"authenticity_token"=>"7rcUfYjIuwwpjfaY1Yf1cgcQGXlHedXyrxXyQTYp8hn8RInG7TF4nLqFI0ldHKzZn/Et3fj0SC1hi6aEvzWSPw==", "id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE Ad Load (0.0ms)[0m  [1m[34mSELECT  "ads".* FROM "ads" WHERE "ads"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFavourite Load (52.0ms)[0m  [1m[34mSELECT "favourites".* FROM "favourites" WHERE "favourites"."ad_id" = $1[0m  [["ad_id", 1]]
  [1m[36mNotification Load (0.3ms)[0m  [1m[34mSELECT "notifications".* FROM "notifications" WHERE "notifications"."ad_id" = $1[0m  [["ad_id", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "ads" WHERE "ads"."id" = $1[0m  [["id", 1]]
  [1m[35m (21.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/profile/wish_list?id=3&list_type=0
Completed 302 Found in 118ms (ActiveRecord: 78.8ms)


Started GET "/profile/wish_list?id=3&list_type=0" for 127.0.0.1 at 2018-06-13 10:27:03 +0200
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"3", "list_type"=>"0"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 3], ["list_type", 0]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (6.6ms)
  Rendered ads/wish.html.erb within layouts/application (8.2ms)
Completed 200 OK in 78ms (Views: 71.1ms | ActiveRecord: 1.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:27:04 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:27:04 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:27:04 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-13 10:27:07 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.4ms)
  Rendered home/welcome.html.erb within layouts/application (6.1ms)
Completed 200 OK in 631ms (Views: 58.0ms | ActiveRecord: 4.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:27:07 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:27:07 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:27:07 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/5" for 127.0.0.1 at 2018-06-13 10:27:12 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  Rendered home/profile.html.erb within layouts/application (8.6ms)
Completed 200 OK in 66ms (Views: 59.7ms | ActiveRecord: 1.2ms)


Started GET "/profile/wish_list?id=5&list_type=0" for 127.0.0.1 at 2018-06-13 10:27:14 +0200
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"5", "list_type"=>"0"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 5], ["list_type", 0]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (9.0ms)
  Rendered ads/wish.html.erb within layouts/application (12.0ms)
Completed 200 OK in 84ms (Views: 77.1ms | ActiveRecord: 2.3ms)


Started GET "/profile/wish_list?id=5&list_type=0" for 127.0.0.1 at 2018-06-13 10:27:47 +0200
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"5", "list_type"=>"0"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 5], ["list_type", 0]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (8.3ms)
  Rendered ads/wish.html.erb within layouts/application (13.9ms)
Completed 200 OK in 90ms (Views: 81.7ms | ActiveRecord: 3.2ms)


Started GET "/users/profile/5" for 127.0.0.1 at 2018-06-13 10:28:07 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  Rendered home/profile.html.erb within layouts/application (4.4ms)
Completed 200 OK in 79ms (Views: 70.3ms | ActiveRecord: 1.2ms)


Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-13 10:29:49 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"U+rNLt3p1FefMIYa+bUQEHd9xppG91YjY4VeCX829iRkeHaUWd2glhWHRoPM5YoyrQ6bwdm4yhtenHD07ed/pQ=="}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 14ms (ActiveRecord: 1.2ms)


Started GET "/" for 127.0.0.1 at 2018-06-13 10:29:49 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (15.5ms)
  Rendered home/welcome.html.erb within layouts/application (18.9ms)
Completed 200 OK in 91ms (Views: 88.2ms | ActiveRecord: 1.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:29:49 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:29:49 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:29:49 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_up" for 127.0.0.1 at 2018-06-13 10:29:52 +0200
Processing by Users::RegistrationsController#new as HTML
  Rendering users/registrations/new.html.erb within layouts/application
  Rendered users/registrations/new.html.erb within layouts/application (11.8ms)
Completed 200 OK in 120ms (Views: 118.6ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:29:52 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:29:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:29:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is streaming from mailbox_
MailboxChannel is transmitting the subscription confirmation
Started POST "/users" for 127.0.0.1 at 2018-06-13 10:29:54 +0200
Processing by Users::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"1Yh5K49RTx59txaF8S/2fVIF2JSONM5vmQS/k0SVyV5wQDp0vTmEmnuvuWyNUCsWWoNHbTtwow8X7ZTP+Xc5Pg==", "user"=>{"name"=>"", "surname"=>"", "username"=>"", "cap"=>"", "radius"=>"5", "email"=>"", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up"}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", ""], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  Rendering users/registrations/new.html.erb within layouts/application
  Rendered users/registrations/new.html.erb within layouts/application (32.4ms)
Completed 200 OK in 135ms (Views: 106.1ms | ActiveRecord: 1.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:29:54 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:29:54 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:29:54 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:30:07 +0200
MailboxChannel stopped streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:30:11 +0200
MailboxChannel stopped streaming from mailbox_5
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-13 10:30:11 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"omNgfx82rXfDdznafcCF/sUZbkMuJYJeJoIG/xPnaxGSETpq4j0QyIQQtCd+ruhA9wDo7Nv7mJXasJykxL3YMg=="}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 11ms (ActiveRecord: 1.2ms)


Started GET "/" for 127.0.0.1 at 2018-06-13 10:30:11 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (19.9ms)
  Rendered home/welcome.html.erb within layouts/application (24.5ms)
Completed 200 OK in 91ms (Views: 86.8ms | ActiveRecord: 1.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 10:30:12 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:30:12 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 10:30:19 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-13 11:58:55 +0200
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.7ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (86.0ms)
  Rendered home/welcome.html.erb within layouts/application (99.6ms)
Completed 200 OK in 941ms (Views: 881.5ms | ActiveRecord: 13.3ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 11:58:57 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 11:58:58 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:02:02 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-13 12:02:02 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (117.9ms)
Completed 200 OK in 182ms (Views: 174.4ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 12:02:03 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:02:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:02:13 +0200
MailboxChannel stopped streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-13 12:02:13 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"T4pvFU995QyIWwPrj4ht1hOjyTc712xhdPWEkSCwgu5MAtitXdwI6KmfprKQcwwwrR8Bs8Qf6Pm6hDIvjvzd9w==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-13 10:02:13.876846"], ["last_sign_in_at", "2018-06-13 08:23:29.580563"], ["sign_in_count", 3], ["updated_at", "2018-06-13 10:02:13.881413"], ["id", 3]]
  [1m[35m (16.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/profile/3
Completed 302 Found in 338ms (ActiveRecord: 21.2ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-13 12:02:13 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (98.4ms)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.0ms)
  Rendered home/profile.html.erb within layouts/application (110.9ms)
Completed 200 OK in 198ms (Views: 155.7ms | ActiveRecord: 15.3ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 12:02:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:02:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:02:18 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/" for 127.0.0.1 at 2018-06-13 12:02:18 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.6ms)
  Rendered home/welcome.html.erb within layouts/application (6.8ms)
Completed 200 OK in 730ms (Views: 55.7ms | ActiveRecord: 3.2ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 12:02:19 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:02:19 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/5" for 127.0.0.1 at 2018-06-13 12:02:21 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered home/profile.html.erb within layouts/application (3.3ms)
Completed 200 OK in 55ms (Views: 48.0ms | ActiveRecord: 1.0ms)


Started GET "/profile/wish_list?id=5&list_type=0" for 127.0.0.1 at 2018-06-13 12:02:31 +0200
Processing by AdsController#wish as HTML
  Parameters: {"id"=>"5", "list_type"=>"0"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/wish.html.erb within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 5], ["list_type", 0]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (4.5ms)
  Rendered ads/wish.html.erb within layouts/application (7.4ms)
Completed 200 OK in 69ms (Views: 63.4ms | ActiveRecord: 1.6ms)


Started GET "/profile/gift_list?id=5&list_type=1" for 127.0.0.1 at 2018-06-13 12:02:33 +0200
Processing by AdsController#gift as HTML
  Parameters: {"id"=>"5", "list_type"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering ads/gift.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mAd Load (0.6ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE "ads"."user_id" = $1 AND "ads"."list_type" = $2[0m  [["user_id", 5], ["list_type", 1]]
  Rendered _ads_list.html.erb (2.8ms)
  Rendered ads/gift.html.erb within layouts/application (5.2ms)
Completed 200 OK in 55ms (Views: 50.0ms | ActiveRecord: 1.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 12:07:43 +0200
  [1m[35m (3.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:07:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:07:52 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/users/profile/5" for 127.0.0.1 at 2018-06-13 12:07:52 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered home/profile.html.erb within layouts/application (8.1ms)
Completed 200 OK in 482ms (Views: 378.5ms | ActiveRecord: 9.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 12:07:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:07:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:07:54 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-13 12:07:54 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (94.1ms)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (1.7ms)
  Rendered home/profile.html.erb within layouts/application (115.0ms)
Completed 200 OK in 230ms (Views: 207.0ms | ActiveRecord: 17.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 12:07:55 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:07:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:08:21 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-13 12:08:22 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (1.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (36.7ms)
  Rendered home/_chats_index.html.erb (2.7ms)
  Rendered home/profile.html.erb within layouts/application (66.1ms)
Completed 200 OK in 189ms (Views: 175.6ms | ActiveRecord: 6.3ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 12:08:23 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:08:23 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:08:30 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/" for 127.0.0.1 at 2018-06-13 12:08:30 +0200
Processing by HomeController#welcome as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAd Load (0.8ms)[0m  [1m[34mSELECT "ads".* FROM "ads" WHERE ("ads"."user_id" != $1)[0m  [["user_id", 3]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (3.2ms)
  Rendered home/welcome.html.erb within layouts/application (6.8ms)
Completed 200 OK in 690ms (Views: 108.4ms | ActiveRecord: 12.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 12:08:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:08:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/5" for 127.0.0.1 at 2018-06-13 12:08:34 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendered home/profile.html.erb within layouts/application (4.8ms)
Completed 200 OK in 95ms (Views: 87.7ms | ActiveRecord: 1.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:08:37 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-13 12:08:37 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (2.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (28.0ms)
  Rendered home/_chats_index.html.erb (2.3ms)
  Rendered home/profile.html.erb within layouts/application (58.0ms)
Completed 200 OK in 156ms (Views: 139.1ms | ActiveRecord: 9.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-13 12:08:38 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:08:38 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-13 12:08:42 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"3"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox_5: {:type=>"delete_chat", :chat_id=>3}
[ActionCable] Broadcasting to mailbox_3: {:type=>"delete_chat", :chat_id=>3}
MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>3} (via streamed from mailbox_3)
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (3.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (1.1ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (2.6ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (1.9ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 3]]
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 46ms (Views: 0.4ms | ActiveRecord: 21.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-13 12:08:48 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/" for 127.0.0.1 at 2018-06-20 20:19:46 +0200
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (29.5ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (140.7ms)
  Rendered home/welcome.html.erb within layouts/application (158.3ms)
Completed 200 OK in 3739ms (Views: 3630.3ms | ActiveRecord: 72.9ms)


Started GET "/" for 127.0.0.1 at 2018-06-20 20:20:14 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  [1m[36mAd Load (0.4ms)[0m  [1m[34mSELECT "ads".* FROM "ads"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  Rendered _ads_list.html.erb (6.4ms)
  Rendered home/welcome.html.erb within layouts/application (10.5ms)
Completed 200 OK in 88ms (Views: 82.0ms | ActiveRecord: 0.8ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:20:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:20:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 20:20:17 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (41.3ms)
Completed 200 OK in 133ms (Views: 127.3ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:20:18 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:20:18 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:20:18 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 20:20:21 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"pe0oAybnzcitttmA+gexSqr+8hEsuZEYieyIUwIE9OgGKl5/2DsqKJX3Ck6RY2A9US0Co93LOnXChypSaR5q2A==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (26.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 33ms (ActiveRecord: 26.5ms)


Processing by Users::SessionsController#new as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"pe0oAybnzcitttmA+gexSqr+8hEsuZEYieyIUwIE9OgGKl5/2DsqKJX3Ck6RY2A9US0Co93LOnXChypSaR5q2A==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.8ms)
Completed 200 OK in 302ms (Views: 79.6ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:20:22 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:20:22 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:20:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 20:20:28 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"UpdWnL+zgTGe5QVRPhl92lFI28UgSSA7XNCVEsUR71LxUCDgQW9m0aak1p9Vfaytqpsrd9E7i1YXuzcTrgtxYg==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.5ms)


Processing by Users::SessionsController#new as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"UpdWnL+zgTGe5QVRPhl92lFI28UgSSA7XNCVEsUR71LxUCDgQW9m0aak1p9Vfaytqpsrd9E7i1YXuzcTrgtxYg==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (2.5ms)
Completed 200 OK in 239ms (Views: 53.8ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:20:29 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:20:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:20:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-20 20:29:56 +0200
  [1m[35m (6.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#welcome as HTML
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant HomeController::Ad):
  
app/controllers/home_controller.rb:20:in `welcome'
Started GET "/" for 127.0.0.1 at 2018-06-20 20:31:39 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  Rendered home/welcome.html.erb within layouts/application (11.8ms)
Completed 200 OK in 803ms (Views: 799.3ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:31:40 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:31:40 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_up" for 127.0.0.1 at 2018-06-20 20:31:42 +0200
Processing by Users::RegistrationsController#new as HTML
  Rendering users/registrations/new.html.erb within layouts/application
  Rendered users/registrations/new.html.erb within layouts/application (35.9ms)
Completed 200 OK in 138ms (Views: 100.5ms | ActiveRecord: 8.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:31:42 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:31:42 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:31:42 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users" for 127.0.0.1 at 2018-06-20 20:32:43 +0200
Processing by Users::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"XHP8G5iHyGMgI/Iduz7ilh0lzdAHPMTsW35jqCeJSDv/tIpnZlsvgxhiIdPQWjPh5vY9YvZOb4EQFcGpTJPWCw==", "user"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x00007ff50a340f60 @tempfile=#<Tempfile:/var/folders/nv/cj1vt9wn5f7bq1zkpkh8j2dm0000gn/T/RackMultipart20180620-16360-1djwzuv.jpg>, @original_filename="darthmaul.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"user[image]\"; filename=\"darthmaul.jpg\"\r\nContent-Type: image/jpeg\r\n">, "name"=>"giorgio", "surname"=>"dema", "username"=>"giorgio", "cap"=>"00123", "radius"=>"5", "email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up"}
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (12.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (22.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "image", "cap", "radius") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$7VKO.88dezIKvVkiBXVJIOPwz2q5KMpty9M55v7ZO.XfqW7WxVs42"], ["created_at", "2018-06-20 18:32:43.870596"], ["updated_at", "2018-06-20 18:32:43.870596"], ["image", "darthmaul.jpg"], ["cap", "00123"], ["radius", "5"]]
  [1m[35m (17.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (69.8ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "current_sign_in_ip" = $4, "last_sign_in_ip" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["sign_in_count", 1], ["current_sign_in_at", "2018-06-20 18:32:43.918258"], ["last_sign_in_at", "2018-06-20 18:32:43.918258"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["updated_at", "2018-06-20 18:32:43.919853"], ["id", 11]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/11
Completed 302 Found in 419ms (ActiveRecord: 131.7ms)


Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:32:44 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (42.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (47.3ms)
  Rendered home/_chats_index.html.erb (1.0ms)
  Rendered home/profile.html.erb within layouts/application (57.5ms)
Completed 200 OK in 151ms (Views: 77.1ms | ActiveRecord: 46.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:32:44 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:32:44 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:32:44 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:36:06 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (3.8ms)
  Rendered home/_chats_index.html.erb (1.2ms)
  Rendered home/profile.html.erb within layouts/application (20.8ms)
Completed 200 OK in 155ms (Views: 116.9ms | ActiveRecord: 3.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:36:07 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:36:07 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:36:07 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:38:01 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (1.9ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.3ms)
  Rendered home/profile.html.erb within layouts/application (20.8ms)
Completed 200 OK in 104ms (Views: 93.7ms | ActiveRecord: 3.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:38:02 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:38:02 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:38:02 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:40:13 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (5.4ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (0.7ms)
  Rendered home/profile.html.erb within layouts/application (50.4ms)
Completed 200 OK in 104ms (Views: 92.1ms | ActiveRecord: 2.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:40:13 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:40:13 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:40:13 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:42:06 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (2.5ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.0ms)
  Rendered home/profile.html.erb within layouts/application (12.3ms)
Completed 200 OK in 92ms (Views: 82.4ms | ActiveRecord: 2.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:42:06 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:42:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:42:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:42:15 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (1.9ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (0.6ms)
  Rendered home/profile.html.erb within layouts/application (10.6ms)
Completed 200 OK in 60ms (Views: 52.2ms | ActiveRecord: 1.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:42:15 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:42:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:42:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:42:35 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (1.7ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (0.7ms)
  Rendered home/profile.html.erb within layouts/application (10.8ms)
Completed 200 OK in 58ms (Views: 50.0ms | ActiveRecord: 3.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:42:35 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:42:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:42:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:45:11 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (2.3ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (0.7ms)
  Rendered home/profile.html.erb within layouts/application (19.0ms)
Completed 200 OK in 105ms (Views: 95.2ms | ActiveRecord: 2.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:45:11 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/uploads/user/image/10/2018-06-13_15.39.09.jpg" for 127.0.0.1 at 2018-06-20 20:45:11 +0200
  
ActionController::RoutingError (No route matches [GET] "/uploads/user/image/10/2018-06-13_15.39.09.jpg"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:45:11 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:45:11 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:46:36 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (2.4ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.1ms)
  Rendered home/profile.html.erb within layouts/application (21.2ms)
Completed 200 OK in 888ms (Views: 877.5ms | ActiveRecord: 2.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:46:37 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/uploads/user/image/10/2018-06-13_15.39.09.jpg" for 127.0.0.1 at 2018-06-20 20:46:37 +0200
  
ActionController::RoutingError (No route matches [GET] "/uploads/user/image/10/2018-06-13_15.39.09.jpg"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:46:37 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:46:37 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:47:57 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
Started GET "/uploads/user/image/10/2018-06-13_15.39.09.jpg" for 127.0.0.1 at 2018-06-20 20:47:57 +0200
  
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
ActionController::RoutingError (No route matches [GET] "/uploads/user/image/10/2018-06-13_15.39.09.jpg"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (2.3ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (0.7ms)
  Rendered home/profile.html.erb within layouts/application (14.3ms)
Completed 200 OK in 1278ms (Views: 1261.7ms | ActiveRecord: 9.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:47:58 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/uploads/user/image/10/2018-06-13_15.39.09.jpg" for 127.0.0.1 at 2018-06-20 20:47:58 +0200
  
ActionController::RoutingError (No route matches [GET] "/uploads/user/image/10/2018-06-13_15.39.09.jpg"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:47:58 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:47:58 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:48:45 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
Started GET "/uploads/user/image/10/2018-06-13_15.39.09.jpg" for 127.0.0.1 at 2018-06-20 20:48:45 +0200
  
ActionController::RoutingError (No route matches [GET] "/uploads/user/image/10/2018-06-13_15.39.09.jpg"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (2.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (5.5ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (20.0ms)
Completed 200 OK in 1877ms (Views: 1864.1ms | ActiveRecord: 4.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:48:47 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/uploads/user/image/10/2018-06-13_15.39.09.jpg" for 127.0.0.1 at 2018-06-20 20:48:47 +0200
  
ActionController::RoutingError (No route matches [GET] "/uploads/user/image/10/2018-06-13_15.39.09.jpg"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:48:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:48:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:49:43 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
Started GET "/uploads/user/image/10/2018-06-13_15.39.09.jpg" for 127.0.0.1 at 2018-06-20 20:49:43 +0200
  
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
ActionController::RoutingError (No route matches [GET] "/uploads/user/image/10/2018-06-13_15.39.09.jpg"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (3.5ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (0.7ms)
  Rendered home/profile.html.erb within layouts/application (16.9ms)
Completed 200 OK in 1826ms (Views: 1809.6ms | ActiveRecord: 10.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:49:45 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/uploads/user/image/10/2018-06-13_15.39.09.jpg" for 127.0.0.1 at 2018-06-20 20:49:45 +0200
  
ActionController::RoutingError (No route matches [GET] "/uploads/user/image/10/2018-06-13_15.39.09.jpg"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:49:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:49:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:50:40 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
Started GET "/uploads/user/image/10/2018-06-13_15.39.09.jpg" for 127.0.0.1 at 2018-06-20 20:50:40 +0200
  
ActionController::RoutingError (No route matches [GET] "/uploads/user/image/10/2018-06-13_15.39.09.jpg"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (3.2ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (0.6ms)
  Rendered home/profile.html.erb within layouts/application (16.1ms)
Completed 200 OK in 1901ms (Views: 1875.6ms | ActiveRecord: 5.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:50:42 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/uploads/user/image/10/2018-06-13_15.39.09.jpg" for 127.0.0.1 at 2018-06-20 20:50:42 +0200
  
ActionController::RoutingError (No route matches [GET] "/uploads/user/image/10/2018-06-13_15.39.09.jpg"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:50:42 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:50:42 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/" for 127.0.0.1 at 2018-06-20 20:50:50 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  Rendered home/welcome.html.erb within layouts/application (13.9ms)
Completed 200 OK in 81ms (Views: 76.9ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:50:51 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:50:51 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 20:50:53 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (9.4ms)
Completed 200 OK in 74ms (Views: 71.3ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:50:53 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:50:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:50:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 20:50:55 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"D9mC7UAN/nOM+tN7Tj3//ayzfFq47DWSd+pCF80u6jg9hFrZoaC55iBmnUwT0SnBWjOUe0lXpXZGv4+sDWbchA==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2018-06-20 18:50:55.222957"], ["sign_in_count", 2], ["updated_at", "2018-06-20 18:50:55.224360"], ["id", 11]]
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/11
Completed 302 Found in 242ms (ActiveRecord: 10.1ms)


Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:50:55 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (2.8ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (40.4ms)
Completed 200 OK in 114ms (Views: 94.8ms | ActiveRecord: 2.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:50:55 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/uploads/user/image/10/2018-06-13_15.39.09.jpg" for 127.0.0.1 at 2018-06-20 20:50:55 +0200
  
ActionController::RoutingError (No route matches [GET] "/uploads/user/image/10/2018-06-13_15.39.09.jpg"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:50:55 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:50:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:53:20 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (9.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 11 OR guest_id = 11)[0m
  Rendered home/_chat.html.erb (2.7ms)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (0.9ms)
  Rendered home/profile.html.erb within layouts/application (31.3ms)
Completed 200 OK in 198ms (Views: 160.0ms | ActiveRecord: 11.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:53:21 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/uploads/user/image/10/2018-06-13_15.39.09.jpg" for 127.0.0.1 at 2018-06-20 20:53:21 +0200
  
ActionController::RoutingError (No route matches [GET] "/uploads/user/image/10/2018-06-13_15.39.09.jpg"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:53:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:53:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
  [1m[35m (7.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (19.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (137.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (217.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (14.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (25.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "notifications_counter" integer DEFAULT 0)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.7ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (26.8ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.1ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (5.1ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAds (5)
  [1m[35m (17.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE "ads" ("id" bigserial primary key, "list_type" integer, "book_title" character varying, "book_authors" character varying, "link_to_coverbook" character varying, "publisher" character varying, "identifier" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_ads_on_user_id" ON "ads"  ("user_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "ads" ADD CONSTRAINT "fk_rails_400d8fa7ce"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "5"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGoogleIdToAds (8)
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ads" ADD "google_id" character varying[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "8"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLocateOptionToUsers (9)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "cap" character varying NOT NULL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "radius" character varying NOT NULL[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "9"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFavourites (10)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "favourites" ("id" bigserial primary key, "user_id" bigint, "ad_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_user_id" ON "favourites"  ("user_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_favourites_on_ad_id" ON "favourites"  ("ad_id")[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "10"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNotifications (11)
  [1m[35m (6.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.3ms)[0m  [1m[35mCREATE TABLE "notifications" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "user_id" bigint, "ad_id" bigint, "displayed" integer)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_user_id" ON "notifications"  ("user_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_notifications_on_ad_id" ON "notifications"  ("ad_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_b080fb4855"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "notifications" ADD CONSTRAINT "fk_rails_5b4eb0e1e4"
FOREIGN KEY ("ad_id")
  REFERENCES "ads" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "11"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-20 18:55:20.879616"], ["updated_at", "2018-06-20 18:55:20.879616"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35m (5.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (6.4ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2018-06-20 18:55:26.307267"], ["updated_at", "2018-06-20 18:55:26.307267"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (8.4ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-20 18:55:26.340870"], ["updated_at", "2018-06-20 18:55:26.340870"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-20 18:55:26.352552"], ["updated_at", "2018-06-20 18:55:26.352552"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2018-06-20 18:55:26.364976"], ["updated_at", "2018-06-20 18:55:26.364976"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-20 18:55:26.368950"], ["updated_at", "2018-06-20 18:55:26.368950"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-20 18:55:26.372345"], ["updated_at", "2018-06-20 18:55:26.372345"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (192.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (172.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (22.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (26.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "notifications_counter" integer DEFAULT 0)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.5ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-20 18:57:07.253571"], ["updated_at", "2018-06-20 18:57:07.253571"]]
  [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (203.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (208.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (20.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (24.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "notifications_counter" integer DEFAULT 0)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (6.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (26.2ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (11.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-20 18:58:51.740297"], ["updated_at", "2018-06-20 18:58:51.740297"]]
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$Abtgv.WZ.ZHhEehXhRU9EuamsiKPFh2M2MIKKRNWjKS55KW8k7C/C"], ["created_at", "2018-06-20 18:58:56.384190"], ["updated_at", "2018-06-20 18:58:56.384190"], ["role", "superadmin"]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$oRHLmS/BFwDcWQgdQ7ym3eqs2NWjGYyH728Asoqz5RN53e/EEP0ni"], ["created_at", "2018-06-20 18:58:56.565690"], ["updated_at", "2018-06-20 18:58:56.565690"], ["role", "admin"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$aneZM1cwDr711WxGlk3a7uNilo/VjXaFI1HY.b2n8mfCiowMsSQZW"], ["created_at", "2018-06-20 18:58:56.740861"], ["updated_at", "2018-06-20 18:58:56.740861"], ["role", "admin"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$tIhaf6ZWqWFlL4716rnpbuDtKDB/k2VyfSSkEssk/gib/Oi7WiQ0a"], ["created_at", "2018-06-20 18:58:56.911436"], ["updated_at", "2018-06-20 18:58:56.911436"], ["role", "admin"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 18:58:56.947871"], ["updated_at", "2018-06-20 18:58:56.947871"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-20 18:58:56.977046"], ["updated_at", "2018-06-20 18:58:56.977046"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-20 18:58:56.985736"], ["updated_at", "2018-06-20 18:58:56.985736"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 18:58:56.990069"], ["updated_at", "2018-06-20 18:58:56.990069"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-20 18:58:56.994020"], ["updated_at", "2018-06-20 18:58:56.994020"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-20 18:58:56.997673"], ["updated_at", "2018-06-20 18:58:56.997673"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:59:18 +0200
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:59:19 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:59:19 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:59:19 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:59:19 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started GET "/users/profile/11" for 127.0.0.1 at 2018-06-20 20:59:23 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
Completed 401 Unauthorized in 63ms (ActiveRecord: 6.7ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 20:59:23 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (74.0ms)
Completed 200 OK in 793ms (Views: 759.1ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 20:59:24 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (2.3ms)
Completed 200 OK in 59ms (Views: 58.1ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-20 20:59:24 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  Rendered home/welcome.html.erb within layouts/application (7.4ms)
Completed 200 OK in 67ms (Views: 62.1ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:59:24 +0200
MailboxChannel stopped streaming from mailbox_11
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:59:24 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:59:24 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 20:59:33 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (2.4ms)
Completed 200 OK in 53ms (Views: 50.8ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:59:33 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:59:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:59:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:59:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:59:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_11
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 20:59:49 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ngsQyUI81zO78okVMfJ0L3vTIG/WixXe8pLCp7m94MM9zGa1vOAw04OzWttalqVYgADQ3Sf5vrO5+WCm0qd+8w==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-20 18:59:49.306826"], ["last_sign_in_at", "2018-06-20 18:59:49.306826"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-20 18:59:49.308612"], ["id", 2]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 265ms (ActiveRecord: 9.8ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 20:59:49 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (79.0ms)
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (100.8ms)
Completed 200 OK in 201ms (Views: 139.1ms | ActiveRecord: 25.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:59:49 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 20:59:49 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 20:59:49 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:04:22 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (14.1ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.4ms)
  Rendered home/profile.html.erb within layouts/application (32.1ms)
Completed 200 OK in 1479ms (Views: 1468.0ms | ActiveRecord: 5.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:04:23 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:04:23 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:04:23 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:04:45 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (36.8ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.1ms)
  Rendered home/profile.html.erb within layouts/application (53.3ms)
Completed 200 OK in 99ms (Views: 87.2ms | ActiveRecord: 5.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:04:45 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:04:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:04:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:05:23 +0200
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:05:23 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 21:05:25 +0200
Processing by HomeController#welcome as HTML
  Rendering home/welcome.html.erb within layouts/application
  Rendered home/welcome.html.erb within layouts/application (17.2ms)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
Completed 200 OK in 472ms (Views: 449.0ms | ActiveRecord: 7.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:05:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:05:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 21:05:27 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (23.3ms)
Completed 200 OK in 124ms (Views: 73.7ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:05:27 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:05:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:05:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 21:05:28 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"dxnYLF9l1aqeMgOCE6ivmQv8/10IqdyrO7lK9JeFiaqOkI4ueq/MDHnPwYIJZbcJTrWgXlJyHSEFMtXfbRigFQ==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2018-06-20 19:05:29.126238"], ["sign_in_count", 2], ["updated_at", "2018-06-20 19:05:29.128645"], ["id", 2]]
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 245ms (ActiveRecord: 10.4ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:05:29 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (2.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (101.1ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.5ms)
  Rendered home/profile.html.erb within layouts/application (119.0ms)
Completed 200 OK in 213ms (Views: 169.0ms | ActiveRecord: 15.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:05:29 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:05:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:05:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:06:12 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (13.5ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (28.6ms)
Completed 200 OK in 1315ms (Views: 1301.1ms | ActiveRecord: 6.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:06:14 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:06:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:06:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:08:38 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (66.2ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.3ms)
  Rendered home/profile.html.erb within layouts/application (83.4ms)
Completed 500 Internal Server Error in 573ms (ActiveRecord: 20.9ms)


  
ActionView::Template::Error (undefined local variable or method `notifications_path' for #<#<Class:0x00007fb29580b4a8>:0x00007fb292532f18>):
    31:         <%if user_signed_in?%>
    32:           <% user = current_user %>
    33:           <%= button_to "#{user.username.upcase}", profile_path(user.id), :method => 'get', class: "btn-lg btn-success profile_btn"%>
    34:           <%= button_to "Notifications: #{user.notifications_counter}", notifications_path, :method => 'get', class:"btn-lg btn-outline-primary notifications_btn", id:"notifications_btn"%>
    35:             <% if (current_user.role == 'admin' || current_user.role == 'superadmin') %>
    36:               <%= button_to "Admin panel", admin_panel_path, :method => 'get', class: "btn-lg btn-outline-danger admin_btn", id: "adminbutton"%>
    37:             <% end %>
  
app/views/layouts/application.html.erb:34:in `_app_views_layouts_application_html_erb__3557753493129035303_70202477504560'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:09:39 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:09:39 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 21:09:58 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (ActiveRecord: 0.8ms)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=):
  
app/controllers/home_controller.rb:7:in `profile'
Started GET "/" for 127.0.0.1 at 2018-06-20 21:11:18 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Completed 404 Not Found in 41ms (ActiveRecord: 5.8ms)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=):
  
app/controllers/home_controller.rb:4:in `profile'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:11:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:11:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 21:12:28 +0200
  
ArgumentError (Missing :controller key on routes definition, please check your routes.):
  
config/routes.rb:28:in `block in <top (required)>'
config/routes.rb:1:in `<top (required)>'
Started GET "/" for 127.0.0.1 at 2018-06-20 21:13:33 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Completed 404 Not Found in 40ms (ActiveRecord: 4.9ms)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=):
  
app/controllers/home_controller.rb:6:in `profile'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:14:03 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:14:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 21:14:12 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (35.6ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (47.7ms)
Completed 200 OK in 145ms (Views: 96.9ms | ActiveRecord: 14.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:14:12 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:14:12 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-20 21:14:16 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"TDaYqD87GqGfJLfuPCuNhGcoi5YM3jMmKNoZx1aLsknmDsubxL8+YiLRw+veLAKSEXok7dCOPTp8XW25TVKqpg=="}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 12ms (ActiveRecord: 1.2ms)


Started GET "/" for 127.0.0.1 at 2018-06-20 21:14:17 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 21:14:17 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (4.2ms)
Completed 200 OK in 58ms (Views: 56.1ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:14:17 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:14:17 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:14:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/" for 127.0.0.1 at 2018-06-20 21:14:21 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 21:14:22 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (2.8ms)
Completed 200 OK in 54ms (Views: 52.3ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:14:22 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:14:22 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:14:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 21:14:27 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"D9xqztnnnENrcL6JxOO5nC9M6cbGczJR+1f8eSwazkRVYhKuZi1E92NychyS/F3gJPF1BR/xPiX3AB5S2kEnrQ==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-20 19:14:28.118167"], ["last_sign_in_at", "2018-06-20 19:05:29.126238"], ["sign_in_count", 3], ["updated_at", "2018-06-20 19:14:28.119826"], ["id", 2]]
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 207ms (ActiveRecord: 10.0ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:14:28 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (13.7ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.0ms)
  Rendered home/profile.html.erb within layouts/application (25.7ms)
Completed 200 OK in 65ms (Views: 55.5ms | ActiveRecord: 4.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:14:28 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:14:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:14:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/admin_panel" for 127.0.0.1 at 2018-06-20 21:14:35 +0200
Processing by HomeController#admin_panel as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/admin_panel.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/admin_panel.html.erb within layouts/application (6.7ms)
Completed 200 OK in 64ms (Views: 57.8ms | ActiveRecord: 1.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:14:35 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:14:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:14:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:14:40 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (16.8ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.9ms)
  Rendered home/profile.html.erb within layouts/application (33.0ms)
Completed 200 OK in 90ms (Views: 74.1ms | ActiveRecord: 8.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:14:40 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:14:40 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:14:40 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:15:30 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:15:30 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 21:17:08 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:17:08 +0200
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (7.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (105.8ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (26.7ms)
  Rendered home/profile.html.erb within layouts/application (467.8ms)
Completed 200 OK in 680ms (Views: 515.2ms | ActiveRecord: 25.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:08 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:17:09 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:17:15 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (13.6ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.3ms)
  Rendered home/profile.html.erb within layouts/application (25.3ms)
Completed 200 OK in 65ms (Views: 53.1ms | ActiveRecord: 6.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:15 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:17:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:17:18 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:18 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 21:17:22 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (18.4ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.4ms)
  Rendered home/profile.html.erb within layouts/application (34.6ms)
Started GET "/" for 127.0.0.1 at 2018-06-20 21:17:22 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (2.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (1.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
Completed 200 OK in 122ms (Views: 112.2ms | ActiveRecord: 5.2ms)


  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (1.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (27.4ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (3.0ms)
  Rendered home/profile.html.erb within layouts/application (48.7ms)
Completed 200 OK in 154ms (Views: 124.7ms | ActiveRecord: 11.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:22 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:17:22 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-20 21:17:25 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"hGBPP48XK7lZGuLw9/3E7O/0J8wbB+Fm9ipa4+RnbMVE4zAvbWlXRgVeZhS/8lDK6w0iWfTA15XEOiv6+VkEEw=="}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 36ms (ActiveRecord: 6.7ms)


Started GET "/" for 127.0.0.1 at 2018-06-20 21:17:25 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 6ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 21:17:25 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (17.3ms)
Completed 200 OK in 79ms (Views: 76.1ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:25 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:17:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 21:17:28 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"T3C+TlMdr4U+4DRt7zbwnD1H3Q3ST57ZXENMm3Gc3LbfN36BLX8IED9VRzfMCc+Io2zGa9Is47G3UeuxwnAZeg==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-20 19:17:28.314279"], ["last_sign_in_at", "2018-06-20 19:17:28.314279"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-20 19:17:28.315363"], ["id", 3]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/3
Completed 302 Found in 228ms (ActiveRecord: 3.0ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-20 21:17:28 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (8.8ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.0ms)
  Rendered home/profile.html.erb within layouts/application (20.0ms)
Completed 200 OK in 64ms (Views: 55.9ms | ActiveRecord: 3.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:28 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:17:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:17:44 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"bene te"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:17:44.327153"], ["updated_at", "2018-06-20 19:17:44.327153"], ["text", "bene te"], ["chat_id", 1]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>1, :text=>"bene te"}
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 10.2ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>1, "text"=>"bene te"} (via streamed from mailbox_3)
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:17:51 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"tutto ok"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-20 19:17:51.101044"], ["updated_at", "2018-06-20 19:17:51.101044"], ["text", "tutto ok"], ["from", 1], ["chat_id", 1]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_2: {:type=>"message", :chat_id=>1, :text=>"tutto ok"}
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 10.6ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>1, "text"=>"tutto ok"} (via streamed from mailbox_2)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-20 21:17:53 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox_2: {:type=>"delete_chat", :chat_id=>1}
[ActionCable] Broadcasting to mailbox_3: {:type=>"delete_chat", :chat_id=>1}
MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>1} (via streamed from mailbox_2)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>1} (via streamed from mailbox_3)
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.9ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 1]]
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 38ms (Views: 0.3ms | ActiveRecord: 13.5ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:17:58 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (10.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.4ms)
  Rendered home/profile.html.erb within layouts/application (23.3ms)
Completed 200 OK in 100ms (Views: 90.3ms | ActiveRecord: 3.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:58 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:17:58 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:17:58 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-20 21:18:02 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  Rendered home/_chat.html.erb (2.0ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (0.8ms)
  Rendered home/profile.html.erb within layouts/application (13.0ms)
Completed 200 OK in 55ms (Views: 48.6ms | ActiveRecord: 1.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:18:02 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:18:02 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:18:02 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-20 21:18:13 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox_2: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] Broadcasting to mailbox_4: {:type=>"delete_chat", :chat_id=>2}
  [1m[35m (4.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (1.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[35mSQL (1.1ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 3]]
MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox_2)
  [1m[35mSQL (15.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (1.8ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 53ms (Views: 0.4ms | ActiveRecord: 34.0ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:18:15 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  Rendered home/_chat.html.erb (1.9ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (0.7ms)
  Rendered home/profile.html.erb within layouts/application (11.8ms)
Completed 200 OK in 60ms (Views: 51.7ms | ActiveRecord: 1.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:18:15 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:18:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:18:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started POST "/create_chat" for 127.0.0.1 at 2018-06-20 21:18:18 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:18:18.695796"], ["updated_at", "2018-06-20 19:18:18.695796"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (8.0ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"create_chat"}
Completed 200 OK in 18ms (Views: 0.4ms | ActiveRecord: 9.9ms)


MailboxChannel transmitting {"type"=>"create_chat"} (via streamed from mailbox_3)
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-20 21:18:18 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (5.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (11.5ms)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (5.1ms)
  Rendered home/profile.html.erb within layouts/application (40.7ms)
Completed 200 OK in 103ms (Views: 81.2ms | ActiveRecord: 9.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:18:18 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:18:22 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:18:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:18:28 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.4ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (5.4ms)
  Rendered home/profile.html.erb within layouts/application (18.4ms)
Completed 200 OK in 63ms (Views: 52.5ms | ActiveRecord: 3.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:18:29 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:18:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:18:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started POST "/create_chat" for 127.0.0.1 at 2018-06-20 21:18:33 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:18:33.590182"], ["updated_at", "2018-06-20 19:18:33.590182"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_4: {:type=>"create_chat"}
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 11.1ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:18:37 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  Rendered home/_chat.html.erb (7.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (13.4ms)
  Rendered home/profile.html.erb within layouts/application (34.9ms)
Completed 200 OK in 112ms (Views: 94.9ms | ActiveRecord: 7.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:18:37 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:18:38 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:18:38 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:18:45 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"ciao gio"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-20 19:18:45.154713"], ["updated_at", "2018-06-20 19:18:45.154713"], ["text", "ciao gio"], ["from", 1], ["chat_id", 3]]
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_2: {:type=>"message", :chat_id=>3, :text=>"ciao gio"}
Completed 200 OK in 31ms (Views: 0.4ms | ActiveRecord: 12.0ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"ciao gio"} (via streamed from mailbox_2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:18:51 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"o"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:18:51.234378"], ["updated_at", "2018-06-20 19:18:51.234378"], ["text", "o"], ["chat_id", 3]]
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"o"}
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 11.2ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"o"} (via streamed from mailbox_3)
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:18:51 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"o"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:18:51.810989"], ["updated_at", "2018-06-20 19:18:51.810989"], ["text", "o"], ["chat_id", 3]]
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"o"}
Completed 200 OK in 30ms (Views: 0.2ms | ActiveRecord: 12.6ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"o"} (via streamed from mailbox_3)
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:18:52 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"o"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:18:52.174164"], ["updated_at", "2018-06-20 19:18:52.174164"], ["text", "o"], ["chat_id", 3]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"o"}
Completed 200 OK in 38ms (Views: 0.3ms | ActiveRecord: 13.5ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"o"} (via streamed from mailbox_3)
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:18:52 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"o"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:18:52.509029"], ["updated_at", "2018-06-20 19:18:52.509029"], ["text", "o"], ["chat_id", 3]]
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"o"}
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 11.9ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"o"} (via streamed from mailbox_3)
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:18:52 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"o"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:18:52.968721"], ["updated_at", "2018-06-20 19:18:52.968721"], ["text", "o"], ["chat_id", 3]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"o"}
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 5.0ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"o"} (via streamed from mailbox_3)
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:18:53 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"o"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:18:53.520276"], ["updated_at", "2018-06-20 19:18:53.520276"], ["text", "o"], ["chat_id", 3]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"o"}
Completed 200 OK in 19ms (Views: 0.4ms | ActiveRecord: 4.9ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"o"} (via streamed from mailbox_3)
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:18:53 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"o"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:18:53.990177"], ["updated_at", "2018-06-20 19:18:53.990177"], ["text", "o"], ["chat_id", 3]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"o"}
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 4.4ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"o"} (via streamed from mailbox_3)
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:18:54 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"o"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:18:54.395250"], ["updated_at", "2018-06-20 19:18:54.395250"], ["text", "o"], ["chat_id", 3]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"o"}
MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"o"} (via streamed from mailbox_3)
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 10.5ms)


Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:18:54 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"o"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:18:54.893024"], ["updated_at", "2018-06-20 19:18:54.893024"], ["text", "o"], ["chat_id", 3]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"o"}
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 4.1ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"o"} (via streamed from mailbox_3)
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:18:55 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"o"}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (1.2ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:18:55.683703"], ["updated_at", "2018-06-20 19:18:55.683703"], ["text", "o"], ["chat_id", 3]]
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"message", :chat_id=>3, :text=>"o"}
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 12.9ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"o"} (via streamed from mailbox_3)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-20 21:19:04 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox_2: {:type=>"delete_chat", :chat_id=>3}
[ActionCable] Broadcasting to mailbox_3: {:type=>"delete_chat", :chat_id=>3}
MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>3} (via streamed from mailbox_2)
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>3} (via streamed from mailbox_3)
  [1m[36mMessage Load (2.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 10]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 14]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 15]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 16]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 17]]
  [1m[35mSQL (1.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 3]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 51ms (Views: 0.3ms | ActiveRecord: 20.8ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:34:31 +0200
  [1m[35m (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:34:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:34:31 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:34:31 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:34:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-20 21:34:34 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  Rendered home/_chat.html.erb (7.4ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.1ms)
  Rendered home/profile.html.erb within layouts/application (956.5ms)
Completed 200 OK in 1146ms (Views: 1051.1ms | ActiveRecord: 17.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:34:35 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:34:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:34:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (201.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (197.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (26.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "notifications_counter" integer DEFAULT 0)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (6.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (11.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (26.7ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.7ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (21.7ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (11.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (11.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-20 19:37:16.242739"], ["updated_at", "2018-06-20 19:37:16.242739"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$nsyPU.cHU.T85WJrwlnf7O2ssJZ/jkFrwSkWJ8xlQm5MW0zDPmENu"], ["created_at", "2018-06-20 19:37:21.633712"], ["updated_at", "2018-06-20 19:37:21.633712"], ["role", "superadmin"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$Kq2tRCiAj7dE1D5UcgE9m.4t5yZG4bCZHH6xtKWhPEiQawtFz/k92"], ["created_at", "2018-06-20 19:37:21.818144"], ["updated_at", "2018-06-20 19:37:21.818144"], ["role", "admin"]]
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$yB1VHKphXghWAM6QRKaqke6GgvRN2Al18u51tV9NxZ9aRTymkje0q"], ["created_at", "2018-06-20 19:37:21.990852"], ["updated_at", "2018-06-20 19:37:21.990852"], ["role", "admin"]]
  [1m[35m (9.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$8oCBc4T0P0TaPqSzASpZEedw8CO./qMxGLblahbehfF5eQmPAHFOq"], ["created_at", "2018-06-20 19:37:22.192151"], ["updated_at", "2018-06-20 19:37:22.192151"], ["role", "admin"]]
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:37:22.255602"], ["updated_at", "2018-06-20 19:37:22.255602"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-20 19:37:22.285132"], ["updated_at", "2018-06-20 19:37:22.285132"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-20 19:37:22.293439"], ["updated_at", "2018-06-20 19:37:22.293439"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:37:22.296340"], ["updated_at", "2018-06-20 19:37:22.296340"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-20 19:37:22.299225"], ["updated_at", "2018-06-20 19:37:22.299225"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-20 19:37:22.302362"], ["updated_at", "2018-06-20 19:37:22.302362"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:37:44 +0200
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:37:44 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:37:46 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 401 Unauthorized in 60ms (ActiveRecord: 6.8ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 21:37:46 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (22.4ms)
Completed 200 OK in 1530ms (Views: 1525.3ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:37:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:37:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 21:37:50 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"xy/jdcZaxLhYRAG8TdOAtvc5b0KOp/Sf8vfppBMI5zP9IMQOaP4mIOdp4lPTMrxdnF6EDQjVOtJNnopiDbe/lA==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (12.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-20 19:37:50.346840"], ["last_sign_in_at", "2018-06-20 19:37:50.346840"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-20 19:37:50.348731"], ["id", 2]]
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 264ms (ActiveRecord: 21.5ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:37:50 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (78.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.0ms)
  Rendered home/profile.html.erb within layouts/application (92.8ms)
Completed 200 OK in 160ms (Views: 124.8ms | ActiveRecord: 12.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:37:50 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:37:50 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:37:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:48:11 +0200
  [1m[35m (7.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:48:11 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 21:48:13 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (80.8ms)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.7ms)
  Rendered home/profile.html.erb within layouts/application (1033.2ms)
Completed 200 OK in 1230ms (Views: 1128.4ms | ActiveRecord: 23.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:48:15 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:48:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:48:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-20 21:48:23 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"1"}
  [1m[36mUser Load (14.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox_2: {:type=>"delete_chat", :chat_id=>1}
[ActionCable] Broadcasting to mailbox_3: {:type=>"delete_chat", :chat_id=>1}
MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>1} (via streamed from mailbox_2)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (3.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (3.0ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (1.5ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 57ms (Views: 0.5ms | ActiveRecord: 28.3ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:48:50 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:48:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_3
Started POST "/create_chat" for 127.0.0.1 at 2018-06-20 21:50:44 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 401 Unauthorized in 10ms (ActiveRecord: 0.8ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-20 21:50:50 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/profile/" for 127.0.0.1 at 2018-06-20 21:51:04 +0200
  
ActionController::RoutingError (No route matches [GET] "/users/profile"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:51:06 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 21:51:11 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (10.3ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (26.3ms)
Completed 200 OK in 687ms (Views: 668.9ms | ActiveRecord: 4.7ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:51:11 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:51:11 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-20 21:51:16 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox_2: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] Broadcasting to mailbox_4: {:type=>"delete_chat", :chat_id=>2}
MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox_2)
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (1.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (1.8ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 2]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 37ms (Views: 0.7ms | ActiveRecord: 16.8ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-20 21:51:20 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (10.4ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:51:20.089312"], ["updated_at", "2018-06-20 19:51:20.089312"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_4: {:type=>"create_chat"}
Completed 200 OK in 22ms (Views: 0.3ms | ActiveRecord: 12.2ms)


Started GET "/" for 127.0.0.1 at 2018-06-20 21:51:26 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.5ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.9ms)
  Rendered home/profile.html.erb within layouts/application (19.3ms)
Completed 200 OK in 73ms (Views: 63.9ms | ActiveRecord: 3.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:51:26 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:51:26 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:51:26 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-20 21:51:31 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 21:51:31 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (13.7ms)
Completed 200 OK in 70ms (Views: 66.0ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:51:31 +0200
MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:51:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:51:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_
Started POST "/create_chat" for 127.0.0.1 at 2018-06-20 21:52:32 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:52:32.580723"], ["updated_at", "2018-06-20 19:52:32.580723"], ["owner_id", 2], ["guest_id", 1]]
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_1: {:type=>"create_chat"}
Completed 200 OK in 22ms (Views: 0.5ms | ActiveRecord: 10.7ms)


Started GET "/" for 127.0.0.1 at 2018-06-20 21:52:37 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  Rendered home/_chat.html.erb (6.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (16.5ms)
  Rendered home/profile.html.erb within layouts/application (34.6ms)
Completed 200 OK in 465ms (Views: 452.1ms | ActiveRecord: 4.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:52:37 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:52:37 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:52:37 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started POST "/create_chat" for 127.0.0.1 at 2018-06-20 21:52:52 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:52:52.337766"], ["updated_at", "2018-06-20 19:52:52.337766"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"create_chat"}
Completed 200 OK in 15ms (Views: 0.4ms | ActiveRecord: 8.2ms)


Started GET "/" for 127.0.0.1 at 2018-06-20 21:52:54 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 5]]
  Rendered home/_chat.html.erb (7.5ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (15.7ms)
  Rendered home/profile.html.erb within layouts/application (40.1ms)
Completed 200 OK in 529ms (Views: 513.4ms | ActiveRecord: 9.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:52:54 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:52:54 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:52:54 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-20 21:52:57 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"5"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox_2: {:type=>"delete_chat", :chat_id=>5}
[ActionCable] Broadcasting to mailbox_3: {:type=>"delete_chat", :chat_id=>5}
MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>5} (via streamed from mailbox_2)
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (7.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 5]]
  [1m[35mSQL (1.2ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 5]]
  [1m[35m (10.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 44ms (Views: 0.3ms | ActiveRecord: 26.0ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-20 21:52:59 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:52:59.074200"], ["updated_at", "2018-06-20 19:52:59.074200"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_3: {:type=>"create_chat"}
Completed 200 OK in 12ms (Views: 1.1ms | ActiveRecord: 2.5ms)


Started GET "/" for 127.0.0.1 at 2018-06-20 21:52:59 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mMessage Load (1.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 6]]
  Rendered home/_chat.html.erb (12.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (22.7ms)
  Rendered home/profile.html.erb within layouts/application (50.0ms)
Completed 200 OK in 125ms (Views: 109.0ms | ActiveRecord: 7.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:52:59 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:52:59 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:52:59 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 21:54:40 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"u31hQhlI3iMA9tExcaiFymLJbPNWL9hiVuyTyaKsyKhS2QEHnPO59uiB3bW7Y9B+BDq1lHLmQJ9PzpIAlLB+pA==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-20 19:54:40.960865"], ["last_sign_in_at", "2018-06-20 19:54:40.960865"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-20 19:54:40.962409"], ["id", 4]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 312ms (ActiveRecord: 11.5ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-20 21:54:41 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (5.1ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (3.2ms)
  Rendered home/profile.html.erb within layouts/application (19.8ms)
Completed 200 OK in 81ms (Views: 72.7ms | ActiveRecord: 3.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:54:41 +0200
MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 21:54:41 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 21:54:41 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_4
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:54:49 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"ciao fla"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (7.0ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 19:54:49.558678"], ["updated_at", "2018-06-20 19:54:49.558678"], ["text", "ciao fla"], ["chat_id", 3]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_4: {:type=>"message", :chat_id=>3, :text=>"ciao fla"}
Completed 200 OK in 37ms (Views: 0.2ms | ActiveRecord: 16.6ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"ciao fla"} (via streamed from mailbox_4)
Started POST "/send_message" for 127.0.0.1 at 2018-06-20 21:54:56 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"come stai gio?"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-20 19:54:56.994518"], ["updated_at", "2018-06-20 19:54:56.994518"], ["text", "come stai gio?"], ["from", 1], ["chat_id", 3]]
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox_2: {:type=>"message", :chat_id=>3, :text=>"come stai gio?"}
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 11.2ms)


MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"come stai gio?"} (via streamed from mailbox_2)
Started GET "/cable" for 127.0.0.1 at 2018-06-20 22:53:28 +0200
  [1m[35m (7.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 22:53:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\",\"userid\":\"2\"}"}) [NameError - undefined local variable or method `current_user' for #<MailboxChannel:0x00007fa961446d00>]: /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:5:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:66:in `block (3 levels) in <class:Engine>'
MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 22:53:31 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 6]]
  Rendered home/_chat.html.erb (85.7ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (8.7ms)
  Rendered home/profile.html.erb within layouts/application (1412.6ms)
Completed 200 OK in 1608ms (Views: 1522.5ms | ActiveRecord: 22.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 22:53:33 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-20 22:53:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 22:53:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is streaming from mailbox_2
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\",\"userid\":\"2\"}"}) [NameError - undefined local variable or method `current_user' for #<MailboxChannel:0x00007fa9634d9c70>]: /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:5:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:66:in `block (3 levels) in <class:Engine>'
There was an exception - NameError(undefined local variable or method `current_user' for #<MailboxChannel:0x00007fa961446d00>)
/Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:10:in `unsubscribed'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:188:in `block in unsubscribe_from_channel'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:66:in `block (3 levels) in <class:Engine>'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `instance_exec'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:135:in `run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:187:in `unsubscribe_from_channel'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/subscriptions.rb:48:in `remove_subscription'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/subscriptions.rb:61:in `block in unsubscribe_from_all'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/subscriptions.rb:61:in `each'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/subscriptions.rb:61:in `unsubscribe_from_all'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/base.rb:182:in `handle_close'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:58:in `block in invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:39:in `block in work'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker/active_record_connection_management.rb:14:in `block in with_database_connections'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/tagged_logger_proxy.rb:22:in `block in tag'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:26:in `tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/tagged_logger_proxy.rb:22:in `tag'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker/active_record_connection_management.rb:14:in `with_database_connections'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:60:in `block (4 levels) in <class:Engine>'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:85:in `wrap'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:55:in `block (3 levels) in <class:Engine>'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `instance_exec'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:135:in `run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:38:in `work'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:56:in `invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:51:in `block in async_invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:348:in `run_task'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:337:in `block (3 levels) in create_worker'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `loop'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `block (2 levels) in create_worker'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `catch'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `block in create_worker'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 22:55:26 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 22:55:26 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is streaming from mailbox_4
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\",\"userid\":\"4\"}"}) [NameError - undefined local variable or method `current_user' for #<MailboxChannel:0x00007fa95eb70e30>]: /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:5:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:66:in `block (3 levels) in <class:Engine>'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 22:58:09 +0200
  [1m[35m (14.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 22:58:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\",\"userid\":\"2\"}"}) [NoMethodError - undefined method `username' for nil:NilClass]: /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:5:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:66:in `block (3 levels) in <class:Engine>'
MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 22:58:11 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (97.4ms)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.2ms)
  Rendered home/profile.html.erb within layouts/application (506.2ms)
Completed 200 OK in 764ms (Views: 644.5ms | ActiveRecord: 19.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 22:58:12 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 22:58:12 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\",\"userid\":\"4\"}"}) [NoMethodError - undefined method `username' for nil:NilClass]: /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:5:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:66:in `block (3 levels) in <class:Engine>'
MailboxChannel is streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-20 22:59:07 +0200
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 22:59:07 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 22:59:07 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 6]]
  Rendered home/_chat.html.erb (87.6ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (8.8ms)
  Rendered home/profile.html.erb within layouts/application (422.6ms)
Completed 200 OK in 642ms (Views: 545.2ms | ActiveRecord: 21.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 22:59:08 +0200
MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 22:59:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 22:59:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
MailboxChannel is transmitting the subscription confirmation
MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 23:00:16 +0200
  [1m[35m (7.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 6]]
  Rendered home/_chat.html.erb (77.2ms)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (8.9ms)
  Rendered home/profile.html.erb within layouts/application (372.8ms)
Completed 200 OK in 544ms (Views: 464.8ms | ActiveRecord: 21.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:00:16 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:00:16 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
There was an exception - NoMethodError(undefined method `username' for nil:NilClass)
/Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/application_cable/connection.rb:7:in `connect'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/base.rb:167:in `handle_open'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:58:in `block in invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:39:in `block in work'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker/active_record_connection_management.rb:14:in `block in with_database_connections'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/tagged_logger_proxy.rb:22:in `block in tag'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:26:in `tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/tagged_logger_proxy.rb:22:in `tag'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker/active_record_connection_management.rb:14:in `with_database_connections'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:60:in `block (4 levels) in <class:Engine>'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:85:in `wrap'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:55:in `block (3 levels) in <class:Engine>'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `instance_exec'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:135:in `run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:38:in `work'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:56:in `invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:51:in `block in async_invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:348:in `run_task'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:337:in `block (3 levels) in create_worker'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `loop'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `block (2 levels) in create_worker'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `catch'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `block in create_worker'
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:00:23 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:00:23 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:00:23 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
There was an exception - NoMethodError(undefined method `username' for nil:NilClass)
/Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/application_cable/connection.rb:7:in `connect'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/base.rb:167:in `handle_open'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:58:in `block in invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:39:in `block in work'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker/active_record_connection_management.rb:14:in `block in with_database_connections'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/tagged_logger_proxy.rb:22:in `block in tag'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:26:in `tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/tagged_logger_proxy.rb:22:in `tag'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker/active_record_connection_management.rb:14:in `with_database_connections'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:60:in `block (4 levels) in <class:Engine>'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:85:in `wrap'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:55:in `block (3 levels) in <class:Engine>'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `instance_exec'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:135:in `run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:38:in `work'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:56:in `invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:51:in `block in async_invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:348:in `run_task'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:337:in `block (3 levels) in create_worker'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `loop'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `block (2 levels) in create_worker'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `catch'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `block in create_worker'
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:00:32 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:00:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:00:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
There was an exception - NoMethodError(undefined method `username' for nil:NilClass)
/Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/application_cable/connection.rb:7:in `connect'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/base.rb:167:in `handle_open'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:58:in `block in invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:39:in `block in work'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker/active_record_connection_management.rb:14:in `block in with_database_connections'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/tagged_logger_proxy.rb:22:in `block in tag'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:26:in `tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/tagged_logger_proxy.rb:22:in `tag'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker/active_record_connection_management.rb:14:in `with_database_connections'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:60:in `block (4 levels) in <class:Engine>'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:85:in `wrap'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:55:in `block (3 levels) in <class:Engine>'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `instance_exec'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:135:in `run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:38:in `work'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:56:in `invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:51:in `block in async_invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:348:in `run_task'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:337:in `block (3 levels) in create_worker'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `loop'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `block (2 levels) in create_worker'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `catch'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `block in create_worker'
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:00:40 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:00:41 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:00:41 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
There was an exception - NoMethodError(undefined method `username' for nil:NilClass)
/Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/application_cable/connection.rb:7:in `connect'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/base.rb:167:in `handle_open'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:58:in `block in invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:39:in `block in work'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker/active_record_connection_management.rb:14:in `block in with_database_connections'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/tagged_logger_proxy.rb:22:in `block in tag'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:26:in `tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/tagged_logger_proxy.rb:22:in `tag'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker/active_record_connection_management.rb:14:in `with_database_connections'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:60:in `block (4 levels) in <class:Engine>'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:85:in `wrap'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:55:in `block (3 levels) in <class:Engine>'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `instance_exec'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:135:in `run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:38:in `work'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:56:in `invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:51:in `block in async_invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:348:in `run_task'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:337:in `block (3 levels) in create_worker'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `loop'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `block (2 levels) in create_worker'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `catch'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `block in create_worker'
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:00:52 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:00:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:00:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
There was an exception - NoMethodError(undefined method `username' for nil:NilClass)
/Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/application_cable/connection.rb:7:in `connect'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/base.rb:167:in `handle_open'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:58:in `block in invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:39:in `block in work'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker/active_record_connection_management.rb:14:in `block in with_database_connections'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/tagged_logger_proxy.rb:22:in `block in tag'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:26:in `tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/tagged_logging.rb:69:in `tagged'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/connection/tagged_logger_proxy.rb:22:in `tag'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker/active_record_connection_management.rb:14:in `with_database_connections'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:60:in `block (4 levels) in <class:Engine>'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:85:in `wrap'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:55:in `block (3 levels) in <class:Engine>'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `instance_exec'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:117:in `block in run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:135:in `run_callbacks'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:38:in `work'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:56:in `invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/server/worker.rb:51:in `block in async_invoke'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:348:in `run_task'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:337:in `block (3 levels) in create_worker'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `loop'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `block (2 levels) in create_worker'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `catch'
/Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2@global/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `block in create_worker'
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:01:01 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:01:01 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:01:01 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [2] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [2] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [2] MailboxChannel is streaming from mailbox_2
[ActionCable] [2] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:01:10 +0200
[ActionCable] [2] MailboxChannel stopped streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 23:04:50 +0200
  [1m[35m (8.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 6]]
  Rendered home/_chat.html.erb (68.4ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (7.4ms)
  Rendered home/profile.html.erb within layouts/application (381.7ms)
Completed 200 OK in 549ms (Views: 455.7ms | ActiveRecord: 21.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:04:52 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:04:52 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:07:00 +0200
  [1m[35m (7.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:07:00 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:07:02 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 6]]
  Rendered home/_chat.html.erb (71.6ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (7.5ms)
  Rendered home/profile.html.erb within layouts/application (358.2ms)
Completed 200 OK in 514ms (Views: 456.9ms | ActiveRecord: 16.2ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:07:03 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:07:03 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:07:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:07:34 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 23:07:53 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mMessage Load (1.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 6]]
  Rendered home/_chat.html.erb (16.9ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (14.4ms)
  Rendered home/profile.html.erb within layouts/application (46.2ms)
Completed 200 OK in 111ms (Views: 91.0ms | ActiveRecord: 12.2ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:07:54 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:07:54 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 11]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 11]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[36mChat Load (1.2ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2) LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2) ORDER BY "chats"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2) ORDER BY "chats"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-06-20 23:31:53 +0200
  [1m[35m (7.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 6]]
  Rendered home/_chat.html.erb (84.2ms)
Started GET "/" for 127.0.0.1 at 2018-06-20 23:31:55 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (3.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mMessage Load (10.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (19.5ms)
  Rendered home/profile.html.erb within layouts/application (1846.2ms)
  [1m[36mMessage Load (6.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 6]]
  Rendered home/_chat.html.erb (43.4ms)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (17.1ms)
  Rendered home/profile.html.erb within layouts/application (109.6ms)
Completed 200 OK in 2081ms (Views: 1972.4ms | ActiveRecord: 35.0ms)


Completed 200 OK in 287ms (Views: 213.3ms | ActiveRecord: 50.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:31:56 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:31:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com] Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\",\"userid\":\"2\"}"}) [NoMethodError - undefined method `status=' for #<User:0x00007fc9c03e09e0>]: /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activemodel-5.1.6/lib/active_model/attribute_methods.rb:432:in `method_missing' | /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:7:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:32:07 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:32:07 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\",\"userid\":\"2\"}"}) [NoMethodError - undefined method `status=' for #<User:0x00007fc9bb4782e0>]: /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activemodel-5.1.6/lib/active_model/attribute_methods.rb:432:in `method_missing' | /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:7:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap'
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-20 23:32:27 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (9.4ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.2ms)
  Rendered home/profile.html.erb within layouts/application (21.5ms)
Completed 200 OK in 75ms (Views: 64.3ms | ActiveRecord: 4.7ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:32:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:32:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com] Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\",\"userid\":\"4\"}"}) [NoMethodError - undefined method `status=' for #<User:0x00007fc9bb4a9778>]: /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activemodel-5.1.6/lib/active_model/attribute_methods.rb:432:in `method_missing' | /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:7:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap'
  [1m[35m (6.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (8327.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (205.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (202.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (21.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (25.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying DEFAULT 'offline')[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (6.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (25.9ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (17.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-20 21:34:49.174280"], ["updated_at", "2018-06-20 21:34:49.174280"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$IbpcDRnHoj5i5bVAIzHsNO6BwjzeydIVCnmDPlUhhXWorBLOeevV6"], ["created_at", "2018-06-20 21:34:54.212124"], ["updated_at", "2018-06-20 21:34:54.212124"], ["role", "superadmin"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$PDGydSMi5bw8pmVMaQP0SuQUIRoKXoXiXYAAURBS79vRiO1OFXW0K"], ["created_at", "2018-06-20 21:34:54.416149"], ["updated_at", "2018-06-20 21:34:54.416149"], ["role", "admin"]]
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$8hHWD4ckvWvSjTvdUgF7U.0Z4GNy7iCD0.Qj0hIz.UMejkzs3psOS"], ["created_at", "2018-06-20 21:34:54.607782"], ["updated_at", "2018-06-20 21:34:54.607782"], ["role", "admin"]]
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$/6r7kNu5MeGyc3rib7j7K.7n5iMQHE99dZue.KQd6KLjlQQDA7qKm"], ["created_at", "2018-06-20 21:34:54.817800"], ["updated_at", "2018-06-20 21:34:54.817800"], ["role", "admin"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 21:34:54.866569"], ["updated_at", "2018-06-20 21:34:54.866569"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-20 21:34:54.893904"], ["updated_at", "2018-06-20 21:34:54.893904"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-20 21:34:54.903820"], ["updated_at", "2018-06-20 21:34:54.903820"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-20 21:34:54.908030"], ["updated_at", "2018-06-20 21:34:54.908030"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-20 21:34:54.912011"], ["updated_at", "2018-06-20 21:34:54.912011"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-20 21:34:54.916337"], ["updated_at", "2018-06-20 21:34:54.916337"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:35:03 +0200
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:35:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com] Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\",\"userid\":\"2\"}"}) [NoMethodError - undefined method `current_users' for #<MailboxChannel:0x00007feae8098578>
Did you mean?  current_user]: /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:9:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:66:in `block (3 levels) in <class:Engine>'
Started GET "/" for 127.0.0.1 at 2018-06-20 23:35:13 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 401 Unauthorized in 64ms (ActiveRecord: 3.4ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 23:35:13 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (29.6ms)
Completed 200 OK in 523ms (Views: 516.0ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:35:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:35:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_
[ActionCable] [giorgio@gmail.com] Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\"}"}) [NoMethodError - undefined method `current_users' for #<MailboxChannel:0x00007feae761c798>
Did you mean?  current_user]: /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:9:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:66:in `block (3 levels) in <class:Engine>'
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 23:35:16 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"kAD3XRD42B3TrK6bzchC9NmCpuzyYr5tqzuByUBHZJ8gP5Y9q9yBwug62EY1S8vnZqTys5mToBlc5CI6Tu/AQg==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (6.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-20 21:35:16.841987"], ["last_sign_in_at", "2018-06-20 21:35:16.841987"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-20 21:35:16.843558"], ["id", 2]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 229ms (ActiveRecord: 8.8ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-20 23:35:16 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (63.7ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.4ms)
  Rendered home/profile.html.erb within layouts/application (77.2ms)
Completed 200 OK in 128ms (Views: 92.5ms | ActiveRecord: 15.8ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:35:17 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:35:17 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:35:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com] Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\",\"userid\":\"2\"}"}) [NoMethodError - undefined method `current_users' for #<MailboxChannel:0x00007feae81b1018>
Did you mean?  current_user]: /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:9:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:66:in `block (3 levels) in <class:Engine>'
Started GET "/" for 127.0.0.1 at 2018-06-20 23:35:26 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.6ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 23:35:26 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (4.1ms)
Completed 200 OK in 40ms (Views: 38.3ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:35:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:35:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_
[ActionCable] [flavia@gmail.com] Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\"}"}) [NoMethodError - undefined method `current_users' for #<MailboxChannel:0x00007feae64cd370>
Did you mean?  current_user]: /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:9:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:66:in `block (3 levels) in <class:Engine>'
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 23:35:38 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"uo1BxEIPe0ubxs484BlQ1fHyKWzEMFCzVY5EJQTksA6tcdipLb459K+m5zQjnt+6dnwqJugbEYWz5/MXpcP6YA==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-20 21:35:38.965619"], ["last_sign_in_at", "2018-06-20 21:35:38.965619"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-20 21:35:38.967134"], ["id", 4]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 225ms (ActiveRecord: 11.2ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-20 23:35:39 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (10.4ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.5ms)
  Rendered home/profile.html.erb within layouts/application (22.6ms)
Completed 200 OK in 62ms (Views: 52.2ms | ActiveRecord: 4.9ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:35:39 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:35:39 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:35:39 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com] Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\",\"userid\":\"4\"}"}) [NoMethodError - undefined method `current_users' for #<MailboxChannel:0x00007feae871df38>
Did you mean?  current_user]: /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:9:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:108:in `block in run_callbacks' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activesupport-5.1.6/lib/active_support/execution_wrapper.rb:81:in `wrap' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/engine.rb:66:in `block (3 levels) in <class:Engine>'
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:37:00 +0200
  [1m[35m (11.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:37:00 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:37:03 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:37:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:37:13 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (75.9ms)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.8ms)
  Rendered home/profile.html.erb within layouts/application (421.7ms)
Completed 200 OK in 577ms (Views: 540.8ms | ActiveRecord: 13.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:37:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:37:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:38:55 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-20 23:39:01 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (39.9ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.2ms)
  Rendered home/profile.html.erb within layouts/application (50.7ms)
Completed 200 OK in 150ms (Views: 90.3ms | ActiveRecord: 20.2ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:39:02 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:39:02 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:39:09 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:39:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:39:12 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:39:12 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:39:28 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.4ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.7ms)
  Rendered home/profile.html.erb within layouts/application (17.8ms)
Completed 200 OK in 52ms (Views: 43.5ms | ActiveRecord: 3.3ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:39:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:39:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:39:30 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.2ms)
  Rendered home/profile.html.erb within layouts/application (22.7ms)
Completed 200 OK in 68ms (Views: 57.6ms | ActiveRecord: 4.6ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:39:30 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_4
[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:39:30 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:39:30 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:39:30 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-20 23:39:32 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"Y5BEoiH+rxDXgAbWcK8hpiwa5mrGPa6ut6HKQz7dwWPnxl5jTKnicVkswxCn/H/FQ84n6KIRhSGgz7krGKvE2g=="}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 24ms (ActiveRecord: 1.1ms)


Started GET "/" for 127.0.0.1 at 2018-06-20 23:39:32 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 23:39:32 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (19.2ms)
Completed 200 OK in 80ms (Views: 76.9ms | ActiveRecord: 0.0ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:39:32 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:39:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:39:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:39:32 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:39:32 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 23:39:36 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"NO5fMV1N1CpWg1ZA+b82HMctBi0iMZ547Xues0EdygIt8r/uqSVGu5nq1RaG9aH989dITryRaSvG0zvtq5CRxA==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-20 21:39:36.420888"], ["last_sign_in_at", "2018-06-20 21:39:36.420888"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-20 21:39:36.422090"], ["id", 3]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/3
Completed 302 Found in 240ms (ActiveRecord: 4.1ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-20 23:39:36 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (8.9ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.0ms)
  Rendered home/profile.html.erb within layouts/application (23.4ms)
Completed 200 OK in 65ms (Views: 55.2ms | ActiveRecord: 3.6ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:39:36 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:39:36 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox_3
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:40:32 +0200
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (81.3ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (343.4ms)
Completed 200 OK in 537ms (Views: 443.5ms | ActiveRecord: 20.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:40:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:40:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:40:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:40:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:40:41 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (9.0ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.2ms)
  Rendered home/profile.html.erb within layouts/application (21.8ms)
Completed 200 OK in 60ms (Views: 51.3ms | ActiveRecord: 3.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:40:41 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:40:41 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox_3
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :user=>3, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "user"=>3, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "user"=>3, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/" for 127.0.0.1 at 2018-06-20 23:43:31 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (18.4ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (3.4ms)
  Rendered home/profile.html.erb within layouts/application (36.8ms)
Completed 200 OK in 107ms (Views: 95.2ms | ActiveRecord: 5.4ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:43:31 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:43:31 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:43:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (10.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "user"=>2, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:44:46 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (15.4ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.9ms)
  Rendered home/profile.html.erb within layouts/application (34.2ms)
Completed 200 OK in 148ms (Views: 134.1ms | ActiveRecord: 4.5ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:44:47 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:44:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:44:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (4.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "user"=>2, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:45:08 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (12.5ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.1ms)
  Rendered home/profile.html.erb within layouts/application (23.8ms)
Completed 200 OK in 429ms (Views: 417.2ms | ActiveRecord: 4.4ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:45:09 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:45:09 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:45:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (3.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "user"=>2, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:45:42 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.6ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (24.1ms)
Completed 200 OK in 118ms (Views: 106.8ms | ActiveRecord: 4.5ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:45:43 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:45:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:45:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (6.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "user"=>2, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:45:46 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.2ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.7ms)
  Rendered home/profile.html.erb within layouts/application (22.2ms)
Completed 200 OK in 59ms (Views: 47.2ms | ActiveRecord: 4.2ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:45:46 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:45:46 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:45:46 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "user"=>2, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:46:19 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (14.7ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (26.2ms)
Completed 200 OK in 65ms (Views: 55.2ms | ActiveRecord: 4.7ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:46:19 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:46:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:46:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "user"=>2, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:46:39 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (13.1ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.5ms)
  Rendered home/profile.html.erb within layouts/application (24.7ms)
Completed 200 OK in 110ms (Views: 99.4ms | ActiveRecord: 4.1ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:46:40 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:46:40 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:46:40 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "user"=>2, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:46:56 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.6ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.5ms)
  Rendered home/profile.html.erb within layouts/application (23.1ms)
Completed 200 OK in 113ms (Views: 102.1ms | ActiveRecord: 4.2ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:46:56 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:46:56 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:46:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (9.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "user"=>2, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:47:19 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (15.3ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (31.3ms)
Completed 200 OK in 115ms (Views: 102.8ms | ActiveRecord: 4.9ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:47:19 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:47:19 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:47:19 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "user"=>2, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:48:20 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.6ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.0ms)
  Rendered home/profile.html.erb within layouts/application (23.5ms)
Completed 200 OK in 111ms (Views: 99.7ms | ActiveRecord: 4.0ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:48:20 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:48:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:48:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "user"=>2, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:48:42 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (12.2ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.8ms)
  Rendered home/profile.html.erb within layouts/application (23.8ms)
Completed 200 OK in 117ms (Views: 106.9ms | ActiveRecord: 4.1ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:48:42 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:48:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:48:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "user"=>2, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :user=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-20 23:54:19 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"5HndK4h87zrUQdcnI3kv/2bW8iIlBp9yoM4Kl8s4NVUCkJn8E26J9JTAicKaPLERBmg3T4al0cdhcgPKgYDUvQ=="}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 108ms (ActiveRecord: 10.3ms)


Started GET "/" for 127.0.0.1 at 2018-06-20 23:54:19 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 2ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 23:54:19 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (23.7ms)
Completed 200 OK in 789ms (Views: 763.7ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:54:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:54:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:54:20 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:54:20 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 23:54:23 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Pido0ySzx0e91RUZGTbMuSjFW+FsmE+iMI5LCsQysWqfR9ibkMKaGsQWFEYhRgxs1ls6qb95PpNukBANNnC0Ew==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2018-06-20 21:54:23.602939"], ["sign_in_count", 2], ["updated_at", "2018-06-20 21:54:23.604499"], ["id", 3]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/3
Completed 302 Found in 262ms (ActiveRecord: 12.4ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-20 23:54:23 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (42.0ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.4ms)
  Rendered home/profile.html.erb within layouts/application (55.4ms)
Completed 200 OK in 110ms (Views: 86.7ms | ActiveRecord: 11.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:54:23 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:54:23 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox_3
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:54:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:54:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:54:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:54:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:54:49 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-06-20 23:54:49 +0200
Processing by HomeController#profile as HTML
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (3.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (13.0ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.4ms)
  Rendered home/profile.html.erb within layouts/application (26.9ms)
Completed 200 OK in 102ms (Views: 74.5ms | ActiveRecord: 6.6ms)


[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:54:49 +0200
[ActionCable] [vincenzo@gmail.com] MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:54:49 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:54:49 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox_3
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
  Rendering home/profile.html.erb within layouts/application
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
  [1m[36mChat Load (4.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (12.5ms)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.9ms)
  Rendered home/profile.html.erb within layouts/application (29.8ms)
Completed 200 OK in 249ms (Views: 60.1ms | ActiveRecord: 40.2ms)


Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-20 23:54:52 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"Z5WVhrvJAurG5d/BvJ/yyykZm7zRDYHm6Z4/HPjGqDOjlMi4hPJ9rSEjzqLsBO0rgqLmQREdTT5SnFuCRirb8g=="}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-20 23:54:52 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 23:54:52 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (4.2ms)
Completed 200 OK in 49ms (Views: 47.3ms | ActiveRecord: 0.0ms)


[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:54:52 +0200
[ActionCable] [vincenzo@gmail.com] MailboxChannel stopped streaming from mailbox_3
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:54:52 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:54:52 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:54:52 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:54:52 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 23:54:54 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"VEFIZU6Mq1FR1W/BrNVcUhYNUglaUs7DraNR5xwihKdGkRDF9D6+0o1seXbKknEi79YmXdiP7dvuoc4UVnlLFQ==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2018-06-20 21:54:55.031073"], ["sign_in_count", 2], ["updated_at", "2018-06-20 21:54:55.032371"], ["id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 212ms (ActiveRecord: 2.0ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-20 23:54:55 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (9.3ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.3ms)
  Rendered home/profile.html.erb within layouts/application (20.7ms)
Completed 200 OK in 76ms (Views: 66.8ms | ActiveRecord: 3.6ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:54:55 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:54:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:57:28 +0200
  [1m[35m (7.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:57:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:57:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:57:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_4)
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:57:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:57:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_4)
[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:57:32 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_4
Started GET "/" for 127.0.0.1 at 2018-06-20 23:57:37 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (46.8ms)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (33.0ms)
  Rendered home/profile.html.erb within layouts/application (462.5ms)
Completed 200 OK in 542ms (Views: 510.3ms | ActiveRecord: 9.6ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:57:37 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:57:37 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:57:37 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-20 23:57:45 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.7ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (21.1ms)
Completed 200 OK in 86ms (Views: 76.8ms | ActiveRecord: 4.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:57:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:57:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-20 23:59:17 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"x37cs2LTBaBUZZMGTFF7sJuqrRVtoyMJawpzIyalwtdqb905qkCa6YQaNVHi125FN+URn4Q/3n8UpMImRlI2kw=="}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 27ms (ActiveRecord: 1.3ms)


Started GET "/" for 127.0.0.1 at 2018-06-20 23:59:17 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-20 23:59:17 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (20.0ms)
Completed 200 OK in 1217ms (Views: 1213.6ms | ActiveRecord: 0.0ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:59:18 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:59:18 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:59:18 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:59:18 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:59:18 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-20 23:59:21 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"afs7Vk3dO7WqjeWlknX24K297kZaC63m+yTW2K6zDnK0yV2jbIfDhXyZH45EIA1pEl//EhVQT95BCA2/6vVBhA==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-20 21:59:22.007297"], ["last_sign_in_at", "2018-06-20 21:54:55.031073"], ["sign_in_count", 3], ["updated_at", "2018-06-20 21:59:22.009022"], ["id", 4]]
  [1m[35m (9.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 254ms (ActiveRecord: 12.3ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-20 23:59:22 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.0ms)
  Rendered home/profile.html.erb within layouts/application (26.1ms)
Completed 200 OK in 82ms (Views: 72.3ms | ActiveRecord: 3.7ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:59:22 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:59:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:59:49 +0200
  [1m[35m (7.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:59:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:59:50 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:59:50 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:59:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:59:50 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:59:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_4)
Started GET "/" for 127.0.0.1 at 2018-06-20 23:59:56 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (36.8ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.8ms)
  Rendered home/profile.html.erb within layouts/application (421.5ms)
Completed 200 OK in 545ms (Views: 517.6ms | ActiveRecord: 7.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-20 23:59:57 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-20 23:59:57 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_4)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-21 00:00:01 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (10.1ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.9ms)
  Rendered home/profile.html.erb within layouts/application (31.0ms)
Completed 200 OK in 87ms (Views: 75.3ms | ActiveRecord: 4.1ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:00:01 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:00:01 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:00:01 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/" for 127.0.0.1 at 2018-06-21 00:00:27 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (13.4ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.4ms)
  Rendered home/profile.html.erb within layouts/application (25.3ms)
Completed 200 OK in 872ms (Views: 861.0ms | ActiveRecord: 4.9ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:00:28 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:00:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:00:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_4)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-21 00:00:32 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (8.2ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.1ms)
  Rendered home/profile.html.erb within layouts/application (20.1ms)
Completed 200 OK in 60ms (Views: 50.9ms | ActiveRecord: 3.4ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:00:32 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:00:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:00:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/" for 127.0.0.1 at 2018-06-21 00:00:44 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (14.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.7ms)
  Rendered home/profile.html.erb within layouts/application (26.9ms)
Completed 200 OK in 63ms (Views: 52.5ms | ActiveRecord: 4.5ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:00:44 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:00:44 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:00:44 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_4)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-21 00:00:47 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.7ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.0ms)
  Rendered home/profile.html.erb within layouts/application (19.1ms)
Completed 200 OK in 66ms (Views: 55.4ms | ActiveRecord: 3.2ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:00:47 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:00:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:00:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/" for 127.0.0.1 at 2018-06-21 00:01:08 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.7ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (24.8ms)
Completed 200 OK in 645ms (Views: 634.3ms | ActiveRecord: 4.6ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:01:09 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:01:09 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:01:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_4)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-21 00:01:12 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.3ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (20.8ms)
Completed 200 OK in 64ms (Views: 55.7ms | ActiveRecord: 3.1ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:01:12 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:01:12 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:01:12 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/" for 127.0.0.1 at 2018-06-21 00:02:25 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (16.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (29.2ms)
Completed 200 OK in 439ms (Views: 425.7ms | ActiveRecord: 5.2ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:02:25 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:02:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:02:26 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_4)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-21 00:02:30 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (8.2ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.9ms)
  Rendered home/profile.html.erb within layouts/application (21.1ms)
Completed 200 OK in 63ms (Views: 52.8ms | ActiveRecord: 3.2ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:02:30 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:02:30 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:02:30 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/" for 127.0.0.1 at 2018-06-21 00:03:20 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (17.1ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.5ms)
  Rendered home/profile.html.erb within layouts/application (32.4ms)
Completed 200 OK in 718ms (Views: 705.4ms | ActiveRecord: 4.7ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:21 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:03:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_4)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-21 00:03:28 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.2ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.2ms)
  Rendered home/profile.html.erb within layouts/application (24.7ms)
Completed 200 OK in 67ms (Views: 56.5ms | ActiveRecord: 3.6ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:28 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:03:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox_4
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox_2)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-21 00:03:37 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"SJBLJZ1RFSfZdA0eFhHneCtW7LMrLI/FXUnN0Ejb90or6iyAXEGQqKsUhXRWGNVz+3pff6ml9I4VKya4Cof70w=="}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 34ms (ActiveRecord: 1.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-21 00:03:37 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-21 00:03:37 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (23.2ms)
Completed 200 OK in 71ms (Views: 67.2ms | ActiveRecord: 0.0ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:37 +0200
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox_4
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:03:37 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:37 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:37 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:37 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:03:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:47 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:47 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:03:58 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:58 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:58 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:03:58 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:04:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:04:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:04:08 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:04:08 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:04:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:04:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:04:21 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:04:21 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:05:03 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:05:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:05:03 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:05:03 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:05:13 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:05:13 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:05:13 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:05:13 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mUser Load (203.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\",\"userid\":\"2\"}"}) [NameError - undefined local variable or method `contact' for #<MailboxChannel:0x00007ff46a4ceff8>]: /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:16:in `block in subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activerecord-5.1.6/lib/active_record/relation/delegation.rb:39:in `each' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activerecord-5.1.6/lib/active_record/relation/delegation.rb:39:in `each' | /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:9:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel'
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com] Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MailboxChannel\",\"userid\":\"2\"}"}) [NameError - undefined local variable or method `contact' for #<MailboxChannel:0x00007ff465d4b578>]: /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:16:in `block in subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activerecord-5.1.6/lib/active_record/relation/delegation.rb:39:in `each' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/activerecord-5.1.6/lib/active_record/relation/delegation.rb:39:in `each' | /Users/giorgiodemagistris/Desktop/Examples-of-Asynchronous-Web-Applications/WebSocketChat/app/channels/mailbox_channel.rb:9:in `subscribed' | /Users/giorgiodemagistris/.rvm/gems/ruby-2.4.2/gems/actioncable-5.1.6/lib/action_cable/channel/base.rb:177:in `block in subscribe_to_channel'
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:05:48 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:05:48 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:05:48 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:05:48 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:05:55 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:05:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:05:55 +0200
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:05:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:06:05 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:06:05 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:06:05 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:06:05 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:07:31 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:07:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:07:31 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:07:31 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:08:09 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:09 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:09 +0200
Started GET "/" for 127.0.0.1 at 2018-06-21 00:08:09 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (58.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (3.1ms)
  Rendered home/profile.html.erb within layouts/application (83.5ms)
Completed 200 OK in 783ms (Views: 747.9ms | ActiveRecord: 13.3ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:10 +0200
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (47.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (35.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (30.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:08:10 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:10 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:08:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:35 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:35 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:08:36 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:36 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:36 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:36 +0200
Started GET "/" for 127.0.0.1 at 2018-06-21 00:08:38 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (17.6ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.8ms)
  Rendered home/profile.html.erb within layouts/application (39.1ms)
Completed 200 OK in 156ms (Views: 134.0ms | ActiveRecord: 5.2ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:38 +0200
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (28.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:08:38 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:38 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:08:56 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:56 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:08:56 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:09:10 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:10 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:10 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:10 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:09:24 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:24 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:24 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:24 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:09:41 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:41 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:41 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:41 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:09:41 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:41 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:41 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:41 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:09:42 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:42 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:42 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:42 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:09:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:43 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:43 +0200
Started GET "/" for 127.0.0.1 at 2018-06-21 00:09:45 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (1.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (21.9ms)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (3.2ms)
  Rendered home/profile.html.erb within layouts/application (51.5ms)
Completed 200 OK in 221ms (Views: 187.5ms | ActiveRecord: 7.8ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:45 +0200
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (34.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:09:46 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:46 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (3.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (7.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:09:55 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:55 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:09:55 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:11:09 +0200
  [1m[35m (7.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:11:09 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-21 00:11:18 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (11.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (2.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (81.4ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (3.1ms)
  Rendered home/profile.html.erb within layouts/application (1271.9ms)
Completed 200 OK in 1409ms (Views: 1339.1ms | ActiveRecord: 32.2ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:11:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:11:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-21 00:11:31 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-21 00:11:31 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (33.3ms)
Completed 200 OK in 109ms (Views: 104.4ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:11:31 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:11:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:11:31 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:11:31 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:11:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:11:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:11:32 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:11:32 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:11:40 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:11:40 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:11:40 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:11:40 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-21 00:11:41 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"p+4jEzQcOuq0ijLii7EQ8vyxv1qTy1AU4T2d5fS9SWdq9NAmYiMTpDZiah01CEbgbksl5pYbbTPSjaQmxA6ExA==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-20 22:11:41.593538"], ["last_sign_in_at", "2018-06-20 21:54:23.602939"], ["sign_in_count", 3], ["updated_at", "2018-06-20 22:11:41.596431"], ["id", 3]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/3
Completed 302 Found in 256ms (ActiveRecord: 3.8ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-21 00:11:41 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (1.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (14.5ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (3.8ms)
  Rendered home/profile.html.erb within layouts/application (35.9ms)
Completed 200 OK in 92ms (Views: 78.5ms | ActiveRecord: 5.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:11:41 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:11:41 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox_3
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 11]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-21 00:13:24 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"WUXwUdPL3MIV42c3JDej92vRzEH7K9h/7gWzs3aG8gQN5kSRkx8mpFxhrr2zWoXtYLQ0lblI7lpiyM5wE8YwDQ=="}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 38ms (ActiveRecord: 6.3ms)


Started GET "/" for 127.0.0.1 at 2018-06-21 00:13:24 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-21 00:13:24 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.6ms)
Completed 200 OK in 67ms (Views: 65.7ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:13:24 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:24 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:24 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:24 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:13:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-20 22:13:25.808318"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-21 00:13:27 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"O3QjWmeHu75ROXuBA2mVsng8hZ3AttTqpH83PZZcFEGBdIjr0NObykORQtsMjJixa4HnCBIEpb69se5r/x9S8g=="}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 10ms (ActiveRecord: 1.3ms)


Started GET "/" for 127.0.0.1 at 2018-06-21 00:13:27 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-21 00:13:27 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.4ms)
Completed 200 OK in 38ms (Views: 36.8ms | ActiveRecord: 0.0ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:27 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (2.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:13:27.114317"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (11.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (2.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:13:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:27 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:27 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-21 00:13:28 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"GTF8aRFkgjeGbcrmEg8sfre9pMluKTyQDgs78xQDbigx0f4YfnBPnmnxMIx5CN5/WtsgkEebn6EP+fD2stznsw==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2018-06-20 22:13:28.808688"], ["sign_in_count", 2], ["updated_at", "2018-06-20 22:13:28.809783"], ["id", 2]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 214ms (ActiveRecord: 11.0ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-21 00:13:28 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (1.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (33.0ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.4ms)
  Rendered home/profile.html.erb within layouts/application (46.6ms)
Completed 200 OK in 90ms (Views: 75.9ms | ActiveRecord: 8.8ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:13:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-20 22:13:29.011449"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:13:31 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:31 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:31 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:13:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-21 00:13:33 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Bl6c5jExf5OlmFnBCMUxbFa9b/SMFFd7CbZy6pgC1UIgAo+iXQGKJASm4D3nmvmplwyw3qRMfm1AigW2a59aag==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-20 22:13:33.404008"], ["last_sign_in_at", "2018-06-20 22:11:41.593538"], ["sign_in_count", 4], ["updated_at", "2018-06-20 22:13:33.405010"], ["id", 3]]
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/3
Completed 302 Found in 226ms (ActiveRecord: 9.5ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-21 00:13:33 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (8.9ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.1ms)
  Rendered home/profile.html.erb within layouts/application (18.3ms)
Completed 200 OK in 65ms (Views: 56.8ms | ActiveRecord: 3.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:13:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:13:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox_3
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-20 22:13:33.591456"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (4.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 11]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 11]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:18:22 +0200
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (1.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:18:22.573943"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (7.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel stopped streaming from mailbox_3
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:18:25 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:18:25.970200"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (11.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-21 00:18:26 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (1.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (26.1ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (4.4ms)
  Rendered home/profile.html.erb within layouts/application (59.1ms)
Completed 200 OK in 201ms (Views: 177.9ms | ActiveRecord: 9.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:18:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:18:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-20 22:18:28.394450"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:22:40 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (5.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:22:40.428824"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-21 00:22:44 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (23.7ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (4.9ms)
  Rendered home/profile.html.erb within layouts/application (67.0ms)
Completed 200 OK in 204ms (Views: 161.8ms | ActiveRecord: 8.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:22:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:22:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-20 22:22:45.717290"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-21 00:22:51 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (16.5ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.6ms)
  Rendered home/profile.html.erb within layouts/application (35.0ms)
Completed 200 OK in 154ms (Views: 140.3ms | ActiveRecord: 5.3ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:22:51 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:22:51 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox_3
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (7.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-20 22:22:51.522724"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (21.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/" for 127.0.0.1 at 2018-06-21 00:24:15 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (9.6ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.5ms)
  Rendered home/profile.html.erb within layouts/application (23.7ms)
Completed 200 OK in 141ms (Views: 130.6ms | ActiveRecord: 3.3ms)


[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:24:15 +0200
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:24:15.778017"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel stopped streaming from mailbox_3
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_2)
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:24:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:24:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox_3
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-20 22:24:15.867253"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/" for 127.0.0.1 at 2018-06-21 00:24:53 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (10.6ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (10.3ms)
  Rendered home/profile.html.erb within layouts/application (35.4ms)
Completed 200 OK in 123ms (Views: 112.7ms | ActiveRecord: 3.8ms)


[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:24:53 +0200
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:24:53.770277"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel stopped streaming from mailbox_3
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_2)
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:24:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:24:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox_3
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-20 22:24:53.858475"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/" for 127.0.0.1 at 2018-06-21 00:25:00 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.1ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.8ms)
  Rendered home/profile.html.erb within layouts/application (23.7ms)
Completed 200 OK in 71ms (Views: 60.4ms | ActiveRecord: 4.2ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:25:00 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (23.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:25:00.955980"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:25:01 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:25:01 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (8.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-20 22:25:01.110168"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (17.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-21 00:25:38 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (1.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (16.8ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.9ms)
  Rendered home/profile.html.erb within layouts/application (89.5ms)
Completed 200 OK in 207ms (Views: 187.3ms | ActiveRecord: 5.3ms)


[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:25:38 +0200
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:25:38.871427"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel stopped streaming from mailbox_3
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_2)
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:25:38 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:25:38 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox_3
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-20 22:25:38.999995"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/" for 127.0.0.1 at 2018-06-21 00:25:41 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (1.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (20.2ms)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (4.0ms)
  Rendered home/profile.html.erb within layouts/application (51.0ms)
Completed 200 OK in 168ms (Views: 144.8ms | ActiveRecord: 8.9ms)


[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:25:41 +0200
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:25:41.422806"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (39.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (7.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel stopped streaming from mailbox_3
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_2)
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:25:41 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:25:41 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox_3
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (1.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-20 22:25:41.653351"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/" for 127.0.0.1 at 2018-06-21 00:25:58 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (1.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (19.5ms)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (20.9ms)
  Rendered home/profile.html.erb within layouts/application (69.1ms)
Completed 200 OK in 302ms (Views: 281.7ms | ActiveRecord: 7.5ms)


[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:25:58 +0200
[ActionCable] [vincenzo@gmail.com]   [1m[35m (5.5ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (9.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:25:58.845576"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (10.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (13.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel stopped streaming from mailbox_3
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_2)
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:25:59 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:25:59 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox_3
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-20 22:25:59.036392"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_2)
Started GET "/" for 127.0.0.1 at 2018-06-21 00:26:02 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (1.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (1.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (34.9ms)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (4.9ms)
  Rendered home/profile.html.erb within layouts/application (68.1ms)
Completed 200 OK in 201ms (Views: 172.4ms | ActiveRecord: 11.4ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:02 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (29.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:26:02.755768"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (41.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (16.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:26:03 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (17.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-20 22:26:03.411318"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-21 00:26:41 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"VHSWxIwpsyk8jPlCR+HEh6XLXKYy7ytNsMKRhz7E4H62+yH1ynyxo7OVfI03KipAsFIGaOQXjC2bh4KUqFM/IQ=="}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 27ms (ActiveRecord: 2.5ms)


Started GET "/" for 127.0.0.1 at 2018-06-21 00:26:41 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-21 00:26:41 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (12.2ms)
Completed 200 OK in 157ms (Views: 152.4ms | ActiveRecord: 0.0ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:41 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (106.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (2.3ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:26:41.566944"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (2.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_3)
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:26:42 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:42 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:42 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:42 +0200
[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:48 +0200
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (8.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:26:48.953786"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (29.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (2.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox_2: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel stopped streaming from mailbox_3
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox_2)
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:26:50 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (8.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:50 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:50 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-21 00:26:58 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:58 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (16.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:58 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:58 +0200
[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-21 00:26:59 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (4.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-20 22:26:59.743809"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (15.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (29.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
Started GET "/" for 127.0.0.1 at 2018-06-25 16:23:41 +0200
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 24ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-25 16:23:41 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (23.4ms)
Completed 200 OK in 1716ms (Views: 1638.3ms | ActiveRecord: 43.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-25 16:23:58 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-25 16:23:58 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (22.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-25 16:23:58 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-25 16:23:58 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-25 16:24:01 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ycY+k1ZnvgCkNB01yadA+usPkNlaPOOeJYaN9L+JwonD9h6OwmwT3U5ZR+DxZ+n/hDRVTxgtpB3yaZElXWn5yQ==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (62.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (32.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-25 14:24:02.262901"], ["last_sign_in_at", "2018-06-24 15:14:01.324011"], ["sign_in_count", 4], ["updated_at", "2018-06-25 14:24:02.265843"], ["id", 2]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 417ms (ActiveRecord: 98.0ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-25 16:24:02 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (26.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (18.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 16]]
  Rendered home/_chat.html.erb (111.4ms)
  [1m[36mUser Load (18.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (29.2ms)
  Rendered home/profile.html.erb within layouts/application (177.3ms)
Completed 500 Internal Server Error in 219ms (ActiveRecord: 81.2ms)


  
ActionView::Template::Error (undefined method `status' for #<User:0x00007fa26625a2c8>):
    14:         <p>
    15:             <%= @aux.username %>
    16:         </p>
    17:         <% if @aux.status=="online"%>
    18:         <p class="status_online" style="display:block;"> online </p>
    19:         <p class="status_offline" style="display:none;"> offline </p>
    20:         <%else%>
  
app/views/home/_chats_index.html.erb:17:in `block in _app_views_home__chats_index_html_erb__4018668778048826337_70167763444560'
app/views/home/_chats_index.html.erb:9:in `_app_views_home__chats_index_html_erb__4018668778048826337_70167763444560'
app/views/home/profile.html.erb:55:in `_app_views_home_profile_html_erb__979159494372837966_70167733834780'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (17.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (206.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (201.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (22.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (21.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying DEFAULT 'offline')[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (5.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (17.4ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (36.2ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.5ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (6.6ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (17.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-25 14:24:46.305627"], ["updated_at", "2018-06-25 14:24:46.305627"]]
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$PivnOBvuXXsOKb9MRdefq.417jI7QKAWUNKDMNxA05GqyJfBwHSZO"], ["created_at", "2018-06-25 14:24:50.845613"], ["updated_at", "2018-06-25 14:24:50.845613"], ["role", "superadmin"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$tEX31JHPh.Ll6rAiWF17puEpmy.s/dK5fTL1zno0WO7ErbvGAEn96"], ["created_at", "2018-06-25 14:24:51.046581"], ["updated_at", "2018-06-25 14:24:51.046581"], ["role", "admin"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$ZUiox8mZTzCrhZHU0PH2DeTNKsxtuqSrCA5Idz5sXzCaQuVkH1VAG"], ["created_at", "2018-06-25 14:24:51.234287"], ["updated_at", "2018-06-25 14:24:51.234287"], ["role", "admin"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$SMsAaWGbJePZ/ZRGuKTM2.RAtL4ZlfXdrTOarECz6BfFDBW.ThFm6"], ["created_at", "2018-06-25 14:24:51.408074"], ["updated_at", "2018-06-25 14:24:51.408074"], ["role", "admin"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (20.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-25 14:24:51.447353"], ["updated_at", "2018-06-25 14:24:51.447353"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-25 14:24:51.490403"], ["updated_at", "2018-06-25 14:24:51.490403"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-25 14:24:51.500443"], ["updated_at", "2018-06-25 14:24:51.500443"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-25 14:24:51.504694"], ["updated_at", "2018-06-25 14:24:51.504694"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-25 14:24:51.508795"], ["updated_at", "2018-06-25 14:24:51.508795"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-25 14:24:51.512338"], ["updated_at", "2018-06-25 14:24:51.512338"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-25 16:25:02 +0200
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 401 Unauthorized in 75ms (ActiveRecord: 6.7ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-25 16:25:03 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (23.9ms)
Completed 200 OK in 402ms (Views: 396.5ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-25 16:25:03 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-25 16:25:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (5.1ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-25 14:25:04.036205"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (6.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-25 16:25:05 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Qwt4/ok+JXnZT7/C3YfCo+RL8J1oXRpANXEVX+OElTAf7uPeQgCJLjXxdUYTtncZjKG7r1V+p54KGYmNceIcMg==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (9.0ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-25 14:25:05.730413"], ["last_sign_in_at", "2018-06-25 14:25:05.730413"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-25 14:25:05.731973"], ["id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 272ms (ActiveRecord: 10.8ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-25 16:25:05 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (57.7ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (4.3ms)
  Rendered home/profile.html.erb within layouts/application (80.8ms)
Completed 200 OK in 148ms (Views: 130.7ms | ActiveRecord: 8.8ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-25 16:25:05 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (13.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (10.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-25 14:25:06.005033"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (29.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_
Started GET "/cable" for 127.0.0.1 at 2018-06-25 16:25:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-25 16:25:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox_2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (9.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-25 14:25:06.227283"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (4.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (2.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (8.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-25 16:28:47 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 13ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-25 16:28:47 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (20.2ms)
Completed 200 OK in 240ms (Views: 229.9ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-25 16:28:48 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 9ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-25 16:28:48 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (4.5ms)
Completed 200 OK in 95ms (Views: 92.9ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-25 17:31:05 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 5ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-25 17:31:05 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (15.3ms)
Completed 200 OK in 199ms (Views: 188.9ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-25 17:31:06 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-25 17:31:06 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (5.4ms)
Completed 200 OK in 53ms (Views: 52.0ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-25 17:40:48 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 5ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-25 17:40:48 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (13.7ms)
Completed 200 OK in 111ms (Views: 104.7ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-25 17:40:48 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-25 17:40:48 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.5ms)
Completed 200 OK in 82ms (Views: 79.9ms | ActiveRecord: 0.0ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-25 17:42:00 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (12.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (123.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (39.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-25 15:42:00.330114"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (3.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox_4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox_2
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (18.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (175.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (184.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (27.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (22.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.8ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying DEFAULT 'offline')[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (4.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (6.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (17.7ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (111.6ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (6.9ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (12.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (17.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-26 13:19:55.796049"], ["updated_at", "2018-06-26 13:19:55.796049"]]
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$GZdisR6Q.w5GIRYsqHL9HO3fOtErl/53TbGqQJW8EjN6FOXbf1CIe"], ["created_at", "2018-06-26 13:20:00.235076"], ["updated_at", "2018-06-26 13:20:00.235076"], ["role", "superadmin"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$tBsYPrnxLVfLW8RUlE4B9u2YgBZ4lsJWIwrS.WyPNvSqRcd.fa.d."], ["created_at", "2018-06-26 13:20:00.423835"], ["updated_at", "2018-06-26 13:20:00.423835"], ["role", "admin"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$B9AltRn051UfDi/c4KehruxjULJ4Npq4BWv4lN7UZ7CPRlj4v9ifi"], ["created_at", "2018-06-26 13:20:00.607721"], ["updated_at", "2018-06-26 13:20:00.607721"], ["role", "admin"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$sgFxhhSY20TEcIJV5UlTzuFx0XPr9X3apPqlYt3/R5.LVQAE9A8nq"], ["created_at", "2018-06-26 13:20:00.781184"], ["updated_at", "2018-06-26 13:20:00.781184"], ["role", "admin"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (19.5ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-26 13:20:00.818866"], ["updated_at", "2018-06-26 13:20:00.818866"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-26 13:20:00.858986"], ["updated_at", "2018-06-26 13:20:00.858986"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-26 13:20:00.869099"], ["updated_at", "2018-06-26 13:20:00.869099"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-26 13:20:00.873281"], ["updated_at", "2018-06-26 13:20:00.873281"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-26 13:20:00.877319"], ["updated_at", "2018-06-26 13:20:00.877319"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-26 13:20:00.880300"], ["updated_at", "2018-06-26 13:20:00.880300"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2018-06-26 15:20:12 +0200
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 20ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-26 15:20:12 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (20.7ms)
Completed 200 OK in 2107ms (Views: 2068.5ms | ActiveRecord: 5.3ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:20:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:15 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:15 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:20:17 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:17 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:17 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-26 15:20:18 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ujWsWqfl4RZC1RvjVK6gzp3InpMKXktnlTt3FRb4t3R0EfcxJdCIiZNNlBVZuBgkwhdS8QN5WyeT+RLFJIOZYg==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (13.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (35.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-26 13:20:18.542901"], ["last_sign_in_at", "2018-06-26 13:20:18.542901"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-26 13:20:18.548023"], ["id", 2]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 401ms (ActiveRecord: 53.1ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-26 15:20:18 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (106.6ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.9ms)
  Rendered home/profile.html.erb within layouts/application (123.0ms)
Completed 200 OK in 187ms (Views: 145.8ms | ActiveRecord: 13.7ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:20:18 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:18 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-26 13:20:18.961108"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-26 15:20:36 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-26 15:20:36 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (6.8ms)
Completed 200 OK in 69ms (Views: 67.5ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-26 15:20:37 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-26 15:20:37 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (4.9ms)
Completed 200 OK in 84ms (Views: 81.9ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-26 15:20:37 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-26 15:20:37 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 62ms (Views: 60.3ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:20:37 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:37 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:37 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:37 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:20:37 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:37 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:37 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:37 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-26 15:20:42 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RHcKn6GJgqj1hAjsqV+aQplPip7aT0wNjOe1ebY5vXAJj0y0tqzfyfZJn+Xzcv46g25b2n4Gs3VvN0HHWB0z0Q==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-26 13:20:42.710927"], ["last_sign_in_at", "2018-06-26 13:20:42.710927"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-26 13:20:42.712277"], ["id", 3]]
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/3
Completed 302 Found in 238ms (ActiveRecord: 14.0ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-26 15:20:42 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (9.9ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (3.6ms)
  Rendered home/profile.html.erb within layouts/application (26.2ms)
Completed 200 OK in 71ms (Views: 59.6ms | ActiveRecord: 4.2ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:20:42 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:20:42 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-26 13:20:42.938936"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/send_message" for 127.0.0.1 at 2018-06-26 15:21:03 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"ciao giorgione"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-26 13:21:03.341186"], ["updated_at", "2018-06-26 13:21:03.341186"], ["text", "ciao giorgione"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>1, :text=>"ciao giorgione"}
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 17.0ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-26 15:26:23 +0200
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (104.9ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.7ms)
  Rendered home/profile.html.erb within layouts/application (412.0ms)
Completed 200 OK in 594ms (Views: 494.0ms | ActiveRecord: 23.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:26:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:26:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:26:31 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:26:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-26 15:26:33 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.8ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.0ms)
  Rendered home/profile.html.erb within layouts/application (22.9ms)
Completed 200 OK in 67ms (Views: 57.6ms | ActiveRecord: 3.3ms)


[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:26:33 +0200
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (3.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-26 13:26:33.193951"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel stopped streaming from mailbox
Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:26:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:26:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-26 13:26:33.283823"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/send_message" for 127.0.0.1 at 2018-06-26 15:26:43 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"come stai?"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-26 13:26:43.627585"], ["updated_at", "2018-06-26 13:26:43.627585"], ["text", "come stai?"], ["chat_id", 1]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>1, :text=>"come stai?"}
Completed 200 OK in 40ms (Views: 0.3ms | ActiveRecord: 10.6ms)


Started POST "/send_message" for 127.0.0.1 at 2018-06-26 15:26:52 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"bene te?"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-26 13:26:53.006148"], ["updated_at", "2018-06-26 13:26:53.006148"], ["text", "bene te?"], ["from", 1], ["chat_id", 1]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>1, :text=>"bene te?"}
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 12.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-26 15:31:00 +0200
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (91.3ms)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (8.8ms)
  Rendered home/profile.html.erb within layouts/application (1550.3ms)
Completed 200 OK in 1731ms (Views: 1616.3ms | ActiveRecord: 26.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:31:02 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:31:02 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-26 15:31:19 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (9.2ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.1ms)
  Rendered home/profile.html.erb within layouts/application (24.4ms)
Completed 200 OK in 79ms (Views: 68.4ms | ActiveRecord: 3.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:31:19 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:31:19 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (26.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/send_message" for 127.0.0.1 at 2018-06-26 15:31:28 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"bene"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-26 13:31:28.520211"], ["updated_at", "2018-06-26 13:31:28.520211"], ["text", "bene"], ["from", 1], ["chat_id", 1]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>1, :text=>"bene"}
Completed 200 OK in 43ms (Views: 0.2ms | ActiveRecord: 10.9ms)


Started GET "/" for 127.0.0.1 at 2018-06-26 15:40:07 +0200
  [1m[35m (8.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (96.5ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.8ms)
  Rendered home/profile.html.erb within layouts/application (430.7ms)
Completed 200 OK in 598ms (Views: 506.6ms | ActiveRecord: 18.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:40:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:40:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (2.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-26 15:40:17 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (12.8ms)
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.2ms)
  Rendered home/profile.html.erb within layouts/application (36.9ms)
Completed 200 OK in 99ms (Views: 84.6ms | ActiveRecord: 8.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:40:17 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:40:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox:Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z
[ActionCable] [vincenzo@gmail.com]   [1m[35m (51.4ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (19.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (15.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/send_message" for 127.0.0.1 at 2018-06-26 15:40:30 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"giorgioneee"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-26 13:40:30.775989"], ["updated_at", "2018-06-26 13:40:30.775989"], ["text", "giorgioneee"], ["from", 1], ["chat_id", 1]]
  [1m[35m (12.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>1, :text=>"giorgioneee"}
Completed 200 OK in 48ms (Views: 0.3ms | ActiveRecord: 16.3ms)


Started GET "/" for 127.0.0.1 at 2018-06-26 15:41:29 +0200
  [1m[35m (7.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (72.5ms)
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (3.2ms)
  Rendered home/profile.html.erb within layouts/application (1959.2ms)
Completed 200 OK in 2159ms (Views: 2038.5ms | ActiveRecord: 29.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:41:31 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:41:31 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:41:31 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:41:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox:Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (1.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-26 15:41:39 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (1.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (22.3ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (3.4ms)
  Rendered home/profile.html.erb within layouts/application (40.9ms)
Completed 200 OK in 112ms (Views: 96.9ms | ActiveRecord: 7.4ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:41:39 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (34.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-26 13:41:39.157388"], ["id", 2]]
Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:41:39 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:41:39 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
[ActionCable] [giorgio@gmail.com]   [1m[35m (19.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-26 13:41:39.242577"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (9.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/send_message" for 127.0.0.1 at 2018-06-26 15:41:46 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"vincenzoneee"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-26 13:41:46.354365"], ["updated_at", "2018-06-26 13:41:46.354365"], ["text", "vincenzoneee"], ["chat_id", 1]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>1, :text=>"vincenzoneee"}
Completed 200 OK in 45ms (Views: 0.3ms | ActiveRecord: 10.8ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:45:42 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (20.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-26 13:45:42.616493"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y
[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:45:46 +0200
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (3.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-26 13:45:46.922290"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (4.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel stopped streaming from mailbox:Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z
Started GET "/" for 127.0.0.1 at 2018-06-26 15:46:15 +0200
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (2.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (74.3ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (4.0ms)
  Rendered home/profile.html.erb within layouts/application (1282.8ms)
Completed 200 OK in 1466ms (Views: 1361.8ms | ActiveRecord: 22.7ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:46:17 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:46:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-26 13:46:17.483416"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-26 15:46:34 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (10.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.5ms)
  Rendered home/profile.html.erb within layouts/application (26.5ms)
Completed 200 OK in 90ms (Views: 76.9ms | ActiveRecord: 3.8ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:46:34 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:46:34 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox:Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z
[ActionCable] [vincenzo@gmail.com]   [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-26 13:46:34.912941"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (18.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (1.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/send_message" for 127.0.0.1 at 2018-06-26 15:46:48 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"giorgioneee"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-26 13:46:48.886852"], ["updated_at", "2018-06-26 13:46:48.886852"], ["text", "giorgioneee"], ["from", 1], ["chat_id", 1]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>1, :text=>"giorgioneee"}
Completed 200 OK in 40ms (Views: 0.3ms | ActiveRecord: 10.4ms)


Started GET "/" for 127.0.0.1 at 2018-06-26 15:48:34 +0200
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (110.3ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.9ms)
  Rendered home/profile.html.erb within layouts/application (376.7ms)
Completed 200 OK in 544ms (Views: 440.2ms | ActiveRecord: 19.8ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:48:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:48:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (10.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-26 15:49:03 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (15.0ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (3.1ms)
  Rendered home/profile.html.erb within layouts/application (33.3ms)
Completed 200 OK in 79ms (Views: 68.0ms | ActiveRecord: 5.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:49:04 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:49:04 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox:3
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (22.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (4.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-26 15:49:08 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"gio"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-26 13:49:08.583066"], ["updated_at", "2018-06-26 13:49:08.583066"], ["text", "gio"], ["from", 1], ["chat_id", 1]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>1, :text=>"gio"}
Completed 200 OK in 44ms (Views: 0.4ms | ActiveRecord: 10.9ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>1, "text"=>"gio"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-26 15:49:14 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"ok ci siamo"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-26 13:49:14.845090"], ["updated_at", "2018-06-26 13:49:14.845090"], ["text", "ok ci siamo"], ["chat_id", 1]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>1, :text=>"ok ci siamo"}
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 8.9ms)


[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>1, "text"=>"ok ci siamo"} (via streamed from mailbox:3)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-26 15:49:20 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"j0Yk69JE1gTRGkEhgDAGAg9t5oAzOu/4aMZvcRyWy8jtiuTE31W3mFFy4t68oEPa+y/IbqVj/nBw8DAcz88vkQ=="}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 11ms (ActiveRecord: 1.3ms)


Started GET "/" for 127.0.0.1 at 2018-06-26 15:49:20 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-26 15:49:20 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (18.2ms)
Completed 200 OK in 62ms (Views: 59.8ms | ActiveRecord: 0.0ms)


[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:49:20 +0200
[ActionCable] [vincenzo@gmail.com]   [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (3.3ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-26 13:49:20.697222"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel stopped streaming from mailbox:3
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:49:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:49:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:49:20 +0200
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:49:20 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:49:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:49:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:49:25 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:49:25 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 15:49:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:49:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:49:27 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 15:49:27 +0200
  [1m[35m (7.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (184.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (210.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (26.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying DEFAULT 'offline')[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (6.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (12.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (30.0ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.6ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (17.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-26 15:07:09.592290"], ["updated_at", "2018-06-26 15:07:09.592290"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$LPT9PldM5BT41xArPfb2I.u6SfBI.bQTWnWT6segj2i70ZPixQNn6"], ["created_at", "2018-06-26 15:07:14.248117"], ["updated_at", "2018-06-26 15:07:14.248117"], ["role", "superadmin"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$7EMQ/L/7YX1xZ9nbzRfqQeZxwTOHsvGg4LMMAwdKFg6AGjcjFTX12"], ["created_at", "2018-06-26 15:07:14.420509"], ["updated_at", "2018-06-26 15:07:14.420509"], ["role", "admin"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$Iqyn8ujCEcjhqZpamaxxxekb8lzfYzL2VoYBWNussomkkIWAnmSlm"], ["created_at", "2018-06-26 15:07:14.599348"], ["updated_at", "2018-06-26 15:07:14.599348"], ["role", "admin"]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$Fic9mSxaAPJVeWnpT7YPmuCUocEdNpmYiA7XgZAizmIukfppmnnAm"], ["created_at", "2018-06-26 15:07:14.788496"], ["updated_at", "2018-06-26 15:07:14.788496"], ["role", "admin"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-26 15:07:14.837504"], ["updated_at", "2018-06-26 15:07:14.837504"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-26 15:07:14.867185"], ["updated_at", "2018-06-26 15:07:14.867185"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-26 15:07:14.876159"], ["updated_at", "2018-06-26 15:07:14.876159"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-26 15:07:14.880805"], ["updated_at", "2018-06-26 15:07:14.880805"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-26 15:07:14.884761"], ["updated_at", "2018-06-26 15:07:14.884761"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-26 15:07:14.887652"], ["updated_at", "2018-06-26 15:07:14.887652"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2018-06-26 17:11:52 +0200
  [1m[35m (7.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 401 Unauthorized in 96ms (ActiveRecord: 8.6ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-26 17:11:52 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (24.8ms)
Completed 200 OK in 483ms (Views: 479.1ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:11:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:11:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (4.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-26 15:11:53.648658"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (18.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (3.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-26 17:13:06 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"39x1PlwAxDED5VgrXneG6M/Eb9Jof6OvMJWZtKba45547y+ogdV195uufdEP10p7g5sU8XmlAk8gQvcfJmTl1g==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-26 15:13:06.513819"], ["last_sign_in_at", "2018-06-26 15:13:06.513819"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-26 15:13:06.515003"], ["id", 2]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 241ms (ActiveRecord: 10.2ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-26 17:13:06 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (42.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.0ms)
  Rendered home/profile.html.erb within layouts/application (58.1ms)
Completed 200 OK in 101ms (Views: 86.3ms | ActiveRecord: 8.0ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:13:06 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (18.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (11.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-26 15:13:06.691431"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (12.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (9.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (10.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:13:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:13:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (14.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-26 15:13:06.825168"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-26 17:14:34 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"EUINUYGg1hsEJK8Hy7tet1G5xnS/4851CxXNL0O8SdXADkP6rr8UfQ38o/zekLomqZmBiR+VhcQTgm6Q9tuU+w=="}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 21ms (ActiveRecord: 1.8ms)


Started GET "/" for 127.0.0.1 at 2018-06-26 17:14:34 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-26 17:14:34 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.5ms)
Completed 200 OK in 55ms (Views: 53.0ms | ActiveRecord: 0.0ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:14:35 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (7.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (12.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-26 15:14:35.015493"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (11.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (3.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (15.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:14:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:14:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:14:35 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:14:35 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:14:44 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:14:44 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:14:44 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:14:44 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:14:57 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:14:57 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:14:57 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:14:57 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:15:05 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:05 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:05 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:05 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:15:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:14 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:14 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:15:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:21 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:21 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:15:36 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:36 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:36 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:36 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:15:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:47 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:15:47 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:16:01 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:01 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:01 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:01 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:16:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:14 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:14 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:16:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:27 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:27 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:16:46 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:46 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:46 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:46 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:16:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:47 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:16:47 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:17:01 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:17:01 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:17:01 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:17:01 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:17:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:17:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:17:14 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:17:14 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:17:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:17:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:17:28 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:17:28 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:17:44 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:17:44 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:17:44 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:17:44 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:18:00 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:18:00 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:18:00 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:18:00 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:18:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:18:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:18:20 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:18:20 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:18:36 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:18:36 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:18:36 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:18:36 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:18:51 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:18:51 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:18:51 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:18:51 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:19:07 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:19:07 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:19:07 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:19:07 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:19:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:19:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:19:21 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:19:21 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:19:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:19:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:19:45 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:19:45 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:20:04 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:20:04 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:20:04 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:20:04 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:20:22 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:20:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:20:22 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:20:22 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:20:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:20:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:20:45 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:20:45 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:21:02 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:21:02 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:21:02 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:21:02 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:21:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:21:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:21:25 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:21:25 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:21:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:21:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:21:43 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:21:43 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:22:01 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:01 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:01 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:01 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:22:18 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:18 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:18 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:18 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:22:23 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:23 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:23 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:23 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:22:36 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:36 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:36 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:36 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:22:50 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:50 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:22:50 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:23:07 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:23:07 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:23:07 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:23:07 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:23:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:23:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:23:28 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:23:28 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:23:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:23:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:23:33 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:23:33 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:23:50 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:23:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:23:50 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:23:50 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:24:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:24:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:24:08 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:24:08 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:24:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:24:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:24:28 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:24:28 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:24:48 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:24:48 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:24:48 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:24:48 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:25:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:25:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:25:06 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:25:06 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:25:24 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:25:24 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:25:24 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:25:24 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:25:44 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:25:44 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:25:44 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:25:44 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:26:05 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:26:05 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:26:05 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:26:05 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:26:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:26:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:26:15 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:26:15 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:26:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:26:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:26:20 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:26:20 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:26:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:26:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:26:47 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:26:47 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:27:12 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:27:12 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:27:12 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:27:12 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:27:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:27:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:27:35 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:27:35 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:27:56 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:27:56 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:27:56 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:27:56 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:28:01 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:28:01 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:28:01 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:28:01 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:28:16 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:28:16 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:28:16 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:28:16 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:28:16 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:28:16 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:28:16 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:28:16 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:28:36 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:28:36 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:28:36 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:28:36 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:29:00 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:00 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:00 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:00 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:29:16 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:16 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:16 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:16 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:29:26 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:26 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:26 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:26 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:29:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:29 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:29 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:29:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:45 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:29:45 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:30:05 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:30:05 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:30:05 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:30:05 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:30:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:30:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:30:27 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:30:27 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:30:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:30:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:30:47 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:30:47 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:31:00 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:00 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:00 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:00 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:31:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:08 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:08 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:31:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:27 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:27 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:31:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:32 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:32 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:31:50 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:50 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:31:50 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:32:13 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:13 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:13 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:13 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:32:16 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:16 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:16 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:16 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:32:19 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:19 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:19 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:19 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:32:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:32 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:32 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:32:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:45 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:45 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:32:48 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:48 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:48 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:48 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-26 17:32:55 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:55 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-26 17:32:55 +0200
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (19.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (144.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (198.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (23.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (26.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.9ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (35.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying DEFAULT 'offline')[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (18.0ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (27.6ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.5ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (5.3ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (7.7ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (12.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (12.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-27 08:33:12.805149"], ["updated_at", "2018-06-27 08:33:12.805149"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$yBjl1rlZwN/P1OeyiJe5Vew95SfbjkgtaPie9O98jDtW396b3n1o6"], ["created_at", "2018-06-27 08:33:17.442141"], ["updated_at", "2018-06-27 08:33:17.442141"], ["role", "superadmin"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$kjmVmhqfh8wnlFa5bNF0UeIPf6//nZwEzBD9gqXlop6T.FU7Lpjfe"], ["created_at", "2018-06-27 08:33:17.623931"], ["updated_at", "2018-06-27 08:33:17.623931"], ["role", "admin"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$X0sGok95HDOvIYPpBpcVaOyvIOBjeN3Np3Z2Cpw0/phlaBqtpzJ4C"], ["created_at", "2018-06-27 08:33:17.800334"], ["updated_at", "2018-06-27 08:33:17.800334"], ["role", "admin"]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$/15.q0wpmaOmjrc6H8R59.yeB/fhP.9Vluwo5VvQLDW0b5EA9pgLC"], ["created_at", "2018-06-27 08:33:17.986459"], ["updated_at", "2018-06-27 08:33:17.986459"], ["role", "admin"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (19.7ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:33:18.033448"], ["updated_at", "2018-06-27 08:33:18.033448"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:33:18.072552"], ["updated_at", "2018-06-27 08:33:18.072552"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:33:18.082760"], ["updated_at", "2018-06-27 08:33:18.082760"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:33:18.086927"], ["updated_at", "2018-06-27 08:33:18.086927"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:33:18.090575"], ["updated_at", "2018-06-27 08:33:18.090575"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:33:18.093195"], ["updated_at", "2018-06-27 08:33:18.093195"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2018-06-27 10:33:40 +0200
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 22ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:33:41 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (20.3ms)
Completed 200 OK in 2290ms (Views: 2252.4ms | ActiveRecord: 5.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:33:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:33:44 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:33:44 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:33:44 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:33:46 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"AsqSlgHPTrzDX0f47iNDIBJbYC0k/KsOXYAQDaNiwZx+iIPAnXEeWcWGiWSfsH/LgYMXoouYnj9Jmi567clQNg==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (7.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (36.4ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-27 08:33:46.332728"], ["last_sign_in_at", "2018-06-27 08:33:46.332728"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-27 08:33:46.335319"], ["id", 2]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 395ms (ActiveRecord: 45.6ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-27 10:33:46 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (6.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (112.6ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.5ms)
  Rendered home/profile.html.erb within layouts/application (132.0ms)
Completed 200 OK in 209ms (Views: 148.2ms | ActiveRecord: 24.2ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:33:46 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:33:46 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (6.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:33:46.763830"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-27 10:34:02 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:34:02 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (5.5ms)
Completed 200 OK in 66ms (Views: 64.3ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:34:02 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:34:02 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:34:02 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:34:02 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:34:03 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:34:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:34:03 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:34:03 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:34:12 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:34:12 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:34:12 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:34:12 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:34:21 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"p12LqPszemQ7UC8Yl+CECGdEo7yEMMCvN/upUtHdMkX+7MFqzdDKFEgesTPq/7rL4m/fyijG5Xj7aBqo/d845A==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-27 08:34:22.026825"], ["last_sign_in_at", "2018-06-27 08:34:22.026825"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-27 08:34:22.027973"], ["id", 4]]
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 261ms (ActiveRecord: 10.4ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:34:22 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (12.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.5ms)
  Rendered home/profile.html.erb within layouts/application (27.7ms)
Completed 200 OK in 83ms (Views: 72.7ms | ActiveRecord: 3.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:34:22 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:34:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:34:22.269612"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:34:34 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"2", "text"=>"si te"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:34:34.943478"], ["updated_at", "2018-06-27 08:34:34.943478"], ["text", "si te"], ["chat_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"message", :chat_id=>2, :text=>"si te"}
Completed 200 OK in 38ms (Views: 0.2ms | ActiveRecord: 16.8ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>2, "text"=>"si te"} (via streamed from mailbox:4)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:34:48 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"2", "text"=>"anche io :("}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:34:48.969905"], ["updated_at", "2018-06-27 08:34:48.969905"], ["text", "anche io :("], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>2, :text=>"anche io :("}
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 3.5ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>2, "text"=>"anche io :("} (via streamed from mailbox:2)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:34:58 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:4)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:2)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (11.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[35mSQL (2.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (1.6ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (2.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (2.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 2]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 50ms (Views: 0.4ms | ActiveRecord: 29.9ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:35:06 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  Rendered home/_chat.html.erb (1.9ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.3ms)
  Rendered home/profile.html.erb within layouts/application (14.6ms)
Completed 200 OK in 72ms (Views: 65.4ms | ActiveRecord: 1.5ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:35:06 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:35:06.655989"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:35:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:35:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (3.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:35:06.721263"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 10:35:14 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:35:14.596801"], ["updated_at", "2018-06-27 08:35:14.596801"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>3, :username=>#<User id: 4, name: "flavia", surname: "mon", username: "flavia", email: "flavia@gmail.com", created_at: "2018-06-27 08:33:17", updated_at: "2018-06-27 08:35:06", status: "online", role: "admin", image: nil>}
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 9.6ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>3, "username"=>{"id"=>4, "name"=>"flavia", "surname"=>"mon", "username"=>"flavia", "email"=>"flavia@gmail.com", "created_at"=>"2018-06-27T08:33:17.986Z", "updated_at"=>"2018-06-27T08:35:06.721Z", "status"=>"online", "role"=>"admin", "image"=>{"url"=>"/assets/fal... (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:35:14 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.4ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (6.2ms)
  Rendered home/profile.html.erb within layouts/application (18.9ms)
Completed 200 OK in 58ms (Views: 49.1ms | ActiveRecord: 3.3ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:35:14 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (11.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:35:14.703255"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (12.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (15.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (29.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:35:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:35:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:35:15.017104"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:35:21 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"oi gio"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:35:21.730132"], ["updated_at", "2018-06-27 08:35:21.730132"], ["text", "oi gio"], ["chat_id", 3]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>3, :text=>"oi gio"}
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 13.2ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"oi gio"} (via streamed from mailbox:2)
  [1m[35m (7.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (208.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (220.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (14.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (28.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying DEFAULT 'offline')[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (11.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (30.9ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (3.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.3ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (18.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (11.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-27 08:36:04.058916"], ["updated_at", "2018-06-27 08:36:04.058916"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$K29H2vtYEDiDM5IvurqPK.nCh6sjaS0sy587Q7U9wLyliIkdVN1z6"], ["created_at", "2018-06-27 08:36:08.625886"], ["updated_at", "2018-06-27 08:36:08.625886"], ["role", "superadmin"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$6ax8sCFUNzP2JdicddxfrOMeu/rPWPu5lxVoVgRR8OaE4y1.EKh0G"], ["created_at", "2018-06-27 08:36:08.816093"], ["updated_at", "2018-06-27 08:36:08.816093"], ["role", "admin"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$iPBvtDKo4qktnHw4cUn47OgnbZ8YSE5ILvveP0H/vWDEMSfTiekQ2"], ["created_at", "2018-06-27 08:36:08.984922"], ["updated_at", "2018-06-27 08:36:08.984922"], ["role", "admin"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$KtJQwHLdkj/r5J0BFjl8ROyNnGUmvtmNrvJIeDV.U/L/aTO7yyG1i"], ["created_at", "2018-06-27 08:36:09.161117"], ["updated_at", "2018-06-27 08:36:09.161117"], ["role", "admin"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:36:09.193617"], ["updated_at", "2018-06-27 08:36:09.193617"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:36:09.220590"], ["updated_at", "2018-06-27 08:36:09.220590"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:36:09.230959"], ["updated_at", "2018-06-27 08:36:09.230959"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:36:09.235196"], ["updated_at", "2018-06-27 08:36:09.235196"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:36:09.239031"], ["updated_at", "2018-06-27 08:36:09.239031"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:36:09.241796"], ["updated_at", "2018-06-27 08:36:09.241796"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2018-06-27 10:36:58 +0200
  [1m[35m (7.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 401 Unauthorized in 56ms (ActiveRecord: 7.7ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:36:58 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (20.3ms)
Completed 200 OK in 1444ms (Views: 1439.9ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:37:00 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:37:00 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:37:00.342311"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (15.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:37:01 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"X8nmu0nrfdyssYW/z/FmjdmY+ml4P/44/9UwfCWVb/F6gKfROMHup8vXnHGUcVvvyhJbgpujsWLXbSabdTl9dw==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-27 08:37:02.050212"], ["last_sign_in_at", "2018-06-27 08:37:02.050212"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-27 08:37:02.051412"], ["id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 258ms (ActiveRecord: 2.9ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-27 10:37:02 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (43.7ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.4ms)
  Rendered home/profile.html.erb within layouts/application (60.8ms)
Completed 200 OK in 109ms (Views: 94.2ms | ActiveRecord: 7.5ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:37:02 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (29.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:37:02.243159"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (9.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (8.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:37:02 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:37:02 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (10.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:37:02.349151"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-27 10:37:08 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.9ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:37:08 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (5.2ms)
Completed 200 OK in 53ms (Views: 51.2ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:37:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:37:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (16.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (7.1ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:37:09.066826"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:37:20 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"AkjZ5079u9cZYgQVenvaOuzAM1tdtiK7GEui9dR2xd5OyGXm8Btbm2NdGKO1PIw3+ORpTGr9Q0ajgLJDDgAsEQ==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-27 08:37:20.866708"], ["last_sign_in_at", "2018-06-27 08:37:20.866708"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-27 08:37:20.867660"], ["id", 4]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 219ms (ActiveRecord: 9.9ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:37:20 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.7ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.4ms)
  Rendered home/profile.html.erb within layouts/application (19.6ms)
Completed 200 OK in 57ms (Views: 49.6ms | ActiveRecord: 3.3ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:37:20 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:37:20.979739"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:37:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:37:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:37:21.079208"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:37:25 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:2)
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:4)
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.9ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.9ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 24ms (Views: 0.3ms | ActiveRecord: 6.9ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 10:37:29 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:37:29.878681"], ["updated_at", "2018-06-27 08:37:29.878681"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>3, :username=>#<User id: 4, name: "flavia", surname: "mon", username: "flavia", email: "flavia@gmail.com", created_at: "2018-06-27 08:36:09", updated_at: "2018-06-27 08:37:21", status: "online", role: "admin", image: nil>}
Completed 200 OK in 18ms (Views: 0.3ms | ActiveRecord: 8.2ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>3, "username"=>{"id"=>4, "name"=>"flavia", "surname"=>"mon", "username"=>"flavia", "email"=>"flavia@gmail.com", "created_at"=>"2018-06-27T08:36:09.161Z", "updated_at"=>"2018-06-27T08:37:21.079Z", "status"=>"online", "role"=>"admin", "image"=>{"url"=>"/assets/fal... (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:37:29 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (4.0ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.8ms)
  Rendered home/profile.html.erb within layouts/application (18.1ms)
Completed 200 OK in 54ms (Views: 43.8ms | ActiveRecord: 3.6ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:37:29 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:37:29.968352"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:37:30 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:37:30 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:37:30.291175"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:37:41 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"oi gio"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:37:41.217525"], ["updated_at", "2018-06-27 08:37:41.217525"], ["text", "oi gio"], ["chat_id", 3]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>3, :text=>"oi gio"}
Completed 200 OK in 28ms (Views: 0.5ms | ActiveRecord: 10.8ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"oi gio"} (via streamed from mailbox:2)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:37:59 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>3}
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>3}
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>3} (via streamed from mailbox:4)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>3} (via streamed from mailbox:2)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (1.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[35mSQL (1.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (1.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 3]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 11.1ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 10:38:05 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:38:05.592920"], ["updated_at", "2018-06-27 08:38:05.592920"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>4, :username=>#<User id: 4, name: "flavia", surname: "mon", username: "flavia", email: "flavia@gmail.com", created_at: "2018-06-27 08:36:09", updated_at: "2018-06-27 08:37:30", status: "online", role: "admin", image: nil>}
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 10.5ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>4, "username"=>{"id"=>4, "name"=>"flavia", "surname"=>"mon", "username"=>"flavia", "email"=>"flavia@gmail.com", "created_at"=>"2018-06-27T08:36:09.161Z", "updated_at"=>"2018-06-27T08:37:30.291Z", "status"=>"online", "role"=>"admin", "image"=>{"url"=>"/assets/fal... (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:38:05 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  Rendered home/_chat.html.erb (5.0ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (5.0ms)
  Rendered home/profile.html.erb within layouts/application (20.5ms)
Completed 200 OK in 78ms (Views: 68.0ms | ActiveRecord: 3.4ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:38:05 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (12.5ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:38:05.719402"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (11.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>4, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>4, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:38:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:38:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:38:06.027056"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>4, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>4, "status"=>"online"} (via streamed from mailbox:2)
  [1m[35m (6.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (196.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (187.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying DEFAULT 'offline')[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (5.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (11.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (29.0ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.4ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (17.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-27 08:39:18.916155"], ["updated_at", "2018-06-27 08:39:18.916155"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (12.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$KVr5OsDuT/UNN1vPGa63NOJJNIzZjyWB28mrVgIL4cJ9fTdYmvUFm"], ["created_at", "2018-06-27 08:39:24.927365"], ["updated_at", "2018-06-27 08:39:24.927365"], ["role", "superadmin"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$Aek62cfDZdag/l4PczuPzukl6ECZYZkycEUZp1Y5MWWiqZxwedF66"], ["created_at", "2018-06-27 08:39:25.121638"], ["updated_at", "2018-06-27 08:39:25.121638"], ["role", "admin"]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$kR0Nav/3TmeOL9HAgR.pkuhEhkg9smWGr9K09/L9/ufzzPU873HjK"], ["created_at", "2018-06-27 08:39:25.318783"], ["updated_at", "2018-06-27 08:39:25.318783"], ["role", "admin"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$OozYchQD7Yz0whCqXYZvNe3xxFXymRlFDNBkydduNXJBGJ/y5O4jm"], ["created_at", "2018-06-27 08:39:25.521534"], ["updated_at", "2018-06-27 08:39:25.521534"], ["role", "admin"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:39:25.574165"], ["updated_at", "2018-06-27 08:39:25.574165"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:39:25.608480"], ["updated_at", "2018-06-27 08:39:25.608480"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:39:25.613233"], ["updated_at", "2018-06-27 08:39:25.613233"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:39:25.618741"], ["updated_at", "2018-06-27 08:39:25.618741"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:39:25.623067"], ["updated_at", "2018-06-27 08:39:25.623067"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:39:25.627184"], ["updated_at", "2018-06-27 08:39:25.627184"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (185.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (205.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying DEFAULT 'offline')[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (28.6ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (11.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-27 08:39:45.257969"], ["updated_at", "2018-06-27 08:39:45.257969"]]
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$GobYt/o6qbhDQv/TW2VPJOm7a.MZxPTC1jPY14fgySb232Z4aM7YG"], ["created_at", "2018-06-27 08:39:49.980589"], ["updated_at", "2018-06-27 08:39:49.980589"], ["role", "superadmin"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$frSPsBcPJxpcuT2Z8fxiW.29B./TAI.z0w2RXmhK6jwzkop2xwzuC"], ["created_at", "2018-06-27 08:39:50.156279"], ["updated_at", "2018-06-27 08:39:50.156279"], ["role", "admin"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$qjQrf21RBaiH220/H1Bt5eGuzcQBcjWgMigL6LoD9UqpQdMj30PeK"], ["created_at", "2018-06-27 08:39:50.348121"], ["updated_at", "2018-06-27 08:39:50.348121"], ["role", "admin"]]
  [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$igMLeOXEL/oN.TMYV2dnEu/skAE3MvHDEQuTZLB.Tbte.OfwZ.YRC"], ["created_at", "2018-06-27 08:39:50.524469"], ["updated_at", "2018-06-27 08:39:50.524469"], ["role", "admin"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:39:50.563054"], ["updated_at", "2018-06-27 08:39:50.563054"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:39:50.591023"], ["updated_at", "2018-06-27 08:39:50.591023"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:39:50.600706"], ["updated_at", "2018-06-27 08:39:50.600706"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:39:50.603978"], ["updated_at", "2018-06-27 08:39:50.603978"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:39:50.606630"], ["updated_at", "2018-06-27 08:39:50.606630"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:39:50.609352"], ["updated_at", "2018-06-27 08:39:50.609352"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2018-06-27 10:40:01 +0200
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 401 Unauthorized in 79ms (ActiveRecord: 7.2ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:40:01 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (19.4ms)
Completed 200 OK in 1517ms (Views: 1513.3ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:40:02 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:40:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (5.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (2.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:40:03.181316"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (3.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:40:03 +0200
Processing by Users::SessionsController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (6.2ms)
Completed 200 OK in 71ms (Views: 65.9ms | ActiveRecord: 0.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:40:03 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:40:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:40:03.756629"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:4)
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:40:05 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Xk7K0vdTSdo2zYd3T7QLzTOqRqHBYceF1OSARHiNa9iy0cCC4PhlU/hkyEazLvnjP0qzMlHVLa9t2WojSfF+5Q==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-27 08:40:05.947264"], ["last_sign_in_at", "2018-06-27 08:40:05.947264"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-27 08:40:05.949607"], ["id", 2]]
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 280ms (ActiveRecord: 9.9ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-27 10:40:05 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (43.3ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.7ms)
  Rendered home/profile.html.erb within layouts/application (59.7ms)
Completed 200 OK in 105ms (Views: 88.0ms | ActiveRecord: 9.4ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:40:06 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (25.3ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:40:06.123675"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (11.0ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:40:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:40:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (20.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:4)
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:40:06.266064"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:4)
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:40:20 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"l1H5ixZT0GzW+F8q6/aUc64C0m4PKQPUPq6VnL6Yv4P7Y4Mk7EhNWpSpaz/YKFCACI4r6UA1yqxj306ojT8EPg==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-27 08:40:20.946439"], ["last_sign_in_at", "2018-06-27 08:40:20.946439"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-27 08:40:20.947493"], ["id", 4]]
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 235ms (ActiveRecord: 10.4ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:40:20 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (8.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.4ms)
  Rendered home/profile.html.erb within layouts/application (19.6ms)
Completed 200 OK in 63ms (Views: 53.8ms | ActiveRecord: 3.0ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:40:21 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:40:21.066467"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (9.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:40:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:40:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:40:21.153630"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:40:32 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"2", "text"=>"si te"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:40:32.242879"], ["updated_at", "2018-06-27 08:40:32.242879"], ["text", "si te"], ["chat_id", 2]]
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"message", :chat_id=>2, :text=>"si te"}
Completed 200 OK in 24ms (Views: 0.3ms | ActiveRecord: 6.4ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>2, "text"=>"si te"} (via streamed from mailbox:4)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:40:35 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"2", "text"=>"si"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:40:35.527385"], ["updated_at", "2018-06-27 08:40:35.527385"], ["text", "si"], ["from", 1], ["chat_id", 2]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>2, :text=>"si"}
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 11.6ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>2, "text"=>"si"} (via streamed from mailbox:2)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:40:40 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"2"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:2)
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:4)
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 2]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 44ms (Views: 0.3ms | ActiveRecord: 16.1ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-27 10:40:44 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.4ms)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.3ms)
  Rendered home/profile.html.erb within layouts/application (19.8ms)
Completed 200 OK in 69ms (Views: 59.3ms | ActiveRecord: 4.4ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:40:44 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:40:44.097511"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (22.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (2.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:40:44 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:40:44 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:40:44.171383"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 10:40:46 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:40:46.784135"], ["updated_at", "2018-06-27 08:40:46.784135"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (10.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>3, :username=>#<User id: 4, name: "flavia", surname: "mon", username: "flavia", email: "flavia@gmail.com", created_at: "2018-06-27 08:39:50", updated_at: "2018-06-27 08:40:21", status: "online", role: "admin", image: nil>}
Completed 200 OK in 24ms (Views: 0.4ms | ActiveRecord: 13.5ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>3, "username"=>{"id"=>4, "name"=>"flavia", "surname"=>"mon", "username"=>"flavia", "email"=>"flavia@gmail.com", "created_at"=>"2018-06-27T08:39:50.524Z", "updated_at"=>"2018-06-27T08:40:21.153Z", "status"=>"online", "role"=>"admin", "image"=>{"url"=>"/assets/fal... (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:40:46 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (4.6ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (6.4ms)
  Rendered home/profile.html.erb within layouts/application (21.3ms)
Completed 200 OK in 68ms (Views: 54.2ms | ActiveRecord: 4.8ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:40:46 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (4.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:40:46.904449"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:40:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:40:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:40:47.220943"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:41:07 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>3}
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>3}
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>3} (via streamed from mailbox:4)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>3} (via streamed from mailbox:2)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (1.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[35mSQL (1.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 3]]
  [1m[35m (5.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 10.6ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 10:41:11 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:41:11.173434"], ["updated_at", "2018-06-27 08:41:11.173434"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>4, :username=>#<User id: 4, name: "flavia", surname: "mon", username: "flavia", email: "flavia@gmail.com", created_at: "2018-06-27 08:39:50", updated_at: "2018-06-27 08:40:47", status: "online", role: "admin", image: nil>}
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 2.4ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>4, "username"=>{"id"=>4, "name"=>"flavia", "surname"=>"mon", "username"=>"flavia", "email"=>"flavia@gmail.com", "created_at"=>"2018-06-27T08:39:50.524Z", "updated_at"=>"2018-06-27T08:40:47.220Z", "status"=>"online", "role"=>"admin", "image"=>{"url"=>"/assets/fal... (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:41:11 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  Rendered home/_chat.html.erb (3.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (6.6ms)
  Rendered home/profile.html.erb within layouts/application (20.8ms)
Completed 200 OK in 671ms (Views: 651.3ms | ActiveRecord: 3.2ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:41:11 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (3.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:41:11.893722"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (20.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (21.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>4, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>4, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:41:12 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:41:12 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:41:12.207249"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>4, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>4, "status"=>"online"} (via streamed from mailbox:2)
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-27 10:41:17 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  Rendered home/_chat.html.erb (10.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.5ms)
  Rendered home/profile.html.erb within layouts/application (24.5ms)
Completed 200 OK in 63ms (Views: 52.5ms | ActiveRecord: 4.4ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:41:18 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (2.4ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:41:18.021962"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (15.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (4.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>4, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>4, "status"=>"offline"} (via streamed from mailbox:4)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:41:18 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:41:18 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:41:18.195519"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (2.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>4, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>4, "status"=>"online"} (via streamed from mailbox:4)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:41:21 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"4"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>4}
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>4}
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>4} (via streamed from mailbox:4)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>4} (via streamed from mailbox:2)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (7.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 4]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 38ms (Views: 1.1ms | ActiveRecord: 20.9ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 10:41:24 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:41:24.214430"], ["updated_at", "2018-06-27 08:41:24.214430"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>5, :username=>#<User id: 4, name: "flavia", surname: "mon", username: "flavia", email: "flavia@gmail.com", created_at: "2018-06-27 08:39:50", updated_at: "2018-06-27 08:41:12", status: "online", role: "admin", image: nil>}
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 2.4ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>5, "username"=>{"id"=>4, "name"=>"flavia", "surname"=>"mon", "username"=>"flavia", "email"=>"flavia@gmail.com", "created_at"=>"2018-06-27T08:39:50.524Z", "updated_at"=>"2018-06-27T08:41:12.207Z", "status"=>"online", "role"=>"admin", "image"=>{"url"=>"/assets/fal... (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:41:24 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 5]]
  Rendered home/_chat.html.erb (3.5ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.8ms)
  Rendered home/profile.html.erb within layouts/application (18.0ms)
Completed 200 OK in 57ms (Views: 48.8ms | ActiveRecord: 2.8ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:41:24 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:41:24.310662"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (11.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>5, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>5, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:41:24 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:41:24 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:41:24.629570"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>5, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>5, "status"=>"online"} (via streamed from mailbox:2)
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (244.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (151.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (17.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying DEFAULT 'offline')[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (28.5ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.8ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (17.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-27 08:43:44.182858"], ["updated_at", "2018-06-27 08:43:44.182858"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$libX8q/ELRYgq.mj.P3wBeTqkyUYVNBPIV98uAM28MT.KGzNCTrL2"], ["created_at", "2018-06-27 08:43:48.935163"], ["updated_at", "2018-06-27 08:43:48.935163"], ["role", "superadmin"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$2yNd9lyhxjSm0GZM7WOO2uByXyccjGa47eNSvLIk7DomNXUK3nsIm"], ["created_at", "2018-06-27 08:43:49.115861"], ["updated_at", "2018-06-27 08:43:49.115861"], ["role", "admin"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$H0EE.Yvc66HArvHmL5aNauVzAc2h3v54ZBI2Yna1Vq42hWWXOwsGu"], ["created_at", "2018-06-27 08:43:49.289696"], ["updated_at", "2018-06-27 08:43:49.289696"], ["role", "admin"]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$02483CQgoJ0qSgDbTBWNx.y1GbVRgaXpdfO4WsK1aSCvXcvKwU2ua"], ["created_at", "2018-06-27 08:43:49.481974"], ["updated_at", "2018-06-27 08:43:49.481974"], ["role", "admin"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:43:49.526788"], ["updated_at", "2018-06-27 08:43:49.526788"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:43:49.554591"], ["updated_at", "2018-06-27 08:43:49.554591"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:43:49.564780"], ["updated_at", "2018-06-27 08:43:49.564780"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:43:49.569034"], ["updated_at", "2018-06-27 08:43:49.569034"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:43:49.573159"], ["updated_at", "2018-06-27 08:43:49.573159"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:43:49.576224"], ["updated_at", "2018-06-27 08:43:49.576224"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2018-06-27 10:44:04 +0200
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 401 Unauthorized in 61ms (ActiveRecord: 6.4ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:44:04 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (35.0ms)
Completed 200 OK in 1832ms (Views: 1827.5ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:44:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:44:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:44:06.724222"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:44:08 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"awRwsr0HOd7uC1H+MEv9TfakHvNzk6pomG9/pnrBGrg/ym3rwu3KFPtyI+TaB4Lg0kE2+dz4+u86xM4PClL/LQ==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-27 08:44:08.356797"], ["last_sign_in_at", "2018-06-27 08:44:08.356797"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-27 08:44:08.359599"], ["id", 2]]
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 268ms (ActiveRecord: 9.3ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-27 10:44:08 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (49.7ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (66.2ms)
Completed 200 OK in 110ms (Views: 91.1ms | ActiveRecord: 9.5ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:44:08 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (22.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:44:08.559528"], ["id", 2]]
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:44:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:44:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
[ActionCable] [giorgio@gmail.com]   [1m[35m (30.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (2.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (15.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (8.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:44:08.680123"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-27 10:44:15 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 401 Unauthorized in 5ms (ActiveRecord: 1.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:44:15 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.4ms)
Completed 200 OK in 46ms (Views: 44.9ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:44:15 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:44:15 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (17.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (8.1ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:44:15.385000"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (13.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:44:16 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:44:16.174653"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/" for 127.0.0.1 at 2018-06-27 10:44:18 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:44:18 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (4.6ms)
Completed 200 OK in 48ms (Views: 47.0ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:44:18 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:44:18 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (2.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:44:18.886195"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (12.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:44:31 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Vcua9vCJ8i0Dp2uPaz9hqXMcQM5SjBS5yjwG1dPwU5/GKufX6uWqxH0prfj5LrwrAi1epJSeyaSwTSp0SgoO0Q==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-27 08:44:31.911086"], ["last_sign_in_at", "2018-06-27 08:44:31.911086"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-27 08:44:31.912473"], ["id", 4]]
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 226ms (ActiveRecord: 9.4ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:44:31 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.9ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.5ms)
  Rendered home/profile.html.erb within layouts/application (18.8ms)
Completed 200 OK in 62ms (Views: 53.5ms | ActiveRecord: 3.1ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:44:32 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:44:32.021261"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:44:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:44:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:44:32.129438"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:44:41 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"2"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:2)
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:4)
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (3.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (1.2ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 10.2ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 10:44:45 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:44:45.313956"], ["updated_at", "2018-06-27 08:44:45.313956"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>3, :username=>#<User id: 4, name: "flavia", surname: "mon", username: "flavia", email: "flavia@gmail.com", created_at: "2018-06-27 08:43:49", updated_at: "2018-06-27 08:44:32", status: "online", role: "admin", image: nil>}
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 2.9ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>3, "username"=>{"id"=>4, "name"=>"flavia", "surname"=>"mon", "username"=>"flavia", "email"=>"flavia@gmail.com", "created_at"=>"2018-06-27T08:43:49.481Z", "updated_at"=>"2018-06-27T08:44:32.129Z", "status"=>"online", "role"=>"admin", "image"=>{"url"=>"/assets/fal... (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:44:45 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (4.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (6.6ms)
  Rendered home/profile.html.erb within layouts/application (29.4ms)
Completed 200 OK in 66ms (Views: 58.0ms | ActiveRecord: 3.4ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:44:45 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:44:45.418493"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (13.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:44:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:44:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:44:45.729187"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:44:57 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"ciao object"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:44:57.590989"], ["updated_at", "2018-06-27 08:44:57.590989"], ["text", "ciao object"], ["from", 1], ["chat_id", 3]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"message", :chat_id=>3, :text=>"ciao object"}
Completed 200 OK in 27ms (Views: 0.3ms | ActiveRecord: 10.3ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"ciao object"} (via streamed from mailbox:4)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:45:04 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"ciao gio"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:45:04.392133"], ["updated_at", "2018-06-27 08:45:04.392133"], ["text", "ciao gio"], ["chat_id", 3]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>3, :text=>"ciao gio"}
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 10.0ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"ciao gio"} (via streamed from mailbox:2)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:45:24 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>3}
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>3}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 3]]
  [1m[35m (5.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 99ms (Views: 0.5ms | ActiveRecord: 20.6ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:45:24 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:45:24 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:45:26 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 404 Not Found in 6ms (ActiveRecord: 1.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Chat with 'id'=3):
  
app/controllers/chats_controller.rb:68:in `delete_chat'
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:45:30 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:45:30 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-27 10:45:31 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (20.0ms)
Completed 200 OK in 59ms (Views: 49.6ms | ActiveRecord: 3.1ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:45:31 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (2.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:45:31.530024"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (8.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:45:31 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:45:31 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:45:31.704190"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 10:45:34 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:45:34.691864"], ["updated_at", "2018-06-27 08:45:34.691864"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>4, :username=>"flavia"}
Completed 200 OK in 18ms (Views: 0.3ms | ActiveRecord: 10.4ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>4, "username"=>"flavia"} (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:45:34 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  Rendered home/_chat.html.erb (3.9ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.9ms)
  Rendered home/profile.html.erb within layouts/application (18.3ms)
Completed 200 OK in 55ms (Views: 47.3ms | ActiveRecord: 3.3ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:45:34 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:45:34.791895"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (17.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (19.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>4, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>4, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:45:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:45:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:45:35.096507"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>4, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>4, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:45:41 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"4", "text"=>"flaaa"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:45:41.587898"], ["updated_at", "2018-06-27 08:45:41.587898"], ["text", "flaaa"], ["from", 1], ["chat_id", 4]]
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"message", :chat_id=>4, :text=>"flaaa"}
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 11.8ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>4, "text"=>"flaaa"} (via streamed from mailbox:4)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:45:54 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"4", "text"=>"ciao gioo"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:45:54.662877"], ["updated_at", "2018-06-27 08:45:54.662877"], ["text", "ciao gioo"], ["chat_id", 4]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>4, :text=>"ciao gioo"}
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 4.5ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>4, "text"=>"ciao gioo"} (via streamed from mailbox:2)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-27 10:45:59 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"GnrF3JJO64SBfOO3Zm7Qaekm5HXmUIawtW9SUXuu6YMx8ll1ULC+gqFPWi1Wc1bA8BtdCe2RVt5hNVyufsX/yQ=="}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-27 10:45:59 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:45:59 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.3ms)
Completed 200 OK in 47ms (Views: 46.1ms | ActiveRecord: 0.0ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:45:59 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (2.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:45:59.127204"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>4, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>4, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:45:59 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:45:59 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:45:59 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:45:59 +0200
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:46:04 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"4", "text"=>"ciao flaaaa"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:46:04.594721"], ["updated_at", "2018-06-27 08:46:04.594721"], ["text", "ciao flaaaa"], ["from", 1], ["chat_id", 4]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"message", :chat_id=>4, :text=>"ciao flaaaa"}
Completed 200 OK in 31ms (Views: 0.3ms | ActiveRecord: 10.5ms)


Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:46:06 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"4", "text"=>"oo"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:46:06.907162"], ["updated_at", "2018-06-27 08:46:06.907162"], ["text", "oo"], ["from", 1], ["chat_id", 4]]
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"message", :chat_id=>4, :text=>"oo"}
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 11.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:46:08 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:08 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:08 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:08 +0200
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:46:11 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"bella vnceeee"}}
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:46:11 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"bella vnceeee"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (1.6ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:46:11.691572"], ["updated_at", "2018-06-27 08:46:11.691572"], ["text", "bella vnceeee"], ["chat_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>1, :text=>"bella vnceeee"}
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 15.3ms)


  [1m[35mSQL (13.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:46:11.695340"], ["updated_at", "2018-06-27 08:46:11.695340"], ["text", "bella vnceeee"], ["chat_id", 1]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>1, :text=>"bella vnceeee"}
Completed 200 OK in 46ms (Views: 0.3ms | ActiveRecord: 26.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:46:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:20 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:20 +0200
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-27 10:46:30 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (13.0ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.8ms)
  Rendered home/profile.html.erb within layouts/application (34.0ms)
Completed 200 OK in 83ms (Views: 73.1ms | ActiveRecord: 4.1ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:30 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (2.4ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:46:30.385220"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (21.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>4, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:46:30 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:30 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:46:30.511530"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>4, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:46:30 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:30 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:30 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:30 +0200
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:46:34 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"ciao"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:46:34.145411"], ["updated_at", "2018-06-27 08:46:34.145411"], ["text", "ciao"], ["chat_id", 1]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>1, :text=>"ciao"}
Completed 200 OK in 27ms (Views: 0.3ms | ActiveRecord: 12.3ms)


Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:46:41 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"ooo"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:46:41.811110"], ["updated_at", "2018-06-27 08:46:41.811110"], ["text", "ooo"], ["chat_id", 1]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>1, :text=>"ooo"}
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 9.9ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:46:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:43 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:43 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:46:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:43 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:43 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:46:52 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:52 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:52 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:46:52 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:47:04 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:47:04 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:47:04 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:47:04 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:47:38 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:47:38 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:47:38 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:47:38 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:47:58 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:47:58 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:47:58 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:47:58 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:48:20 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:20 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:20 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:20 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:48:21 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:21 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:21 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:21 +0200
Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-27 10:48:24 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (13.6ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.0ms)
  Rendered home/profile.html.erb within layouts/application (25.9ms)
Completed 200 OK in 665ms (Views: 647.9ms | ActiveRecord: 4.3ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:25 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (48.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (7.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:48:25.319586"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (16.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>4, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:48:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:48:25.438940"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>4, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:48:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:27 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:27 +0200
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:48:29 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (4.3ms)
Completed 200 OK in 62ms (Views: 60.4ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:48:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:29 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:29 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:48:32 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"rxad7xjW7ySd3F6IiSp+jaZeNhr00MpVC8o7rBVWRScZaRRdX9xQ7szHT3+2xoNu3qdokroeoTh8Je+yYdhG+w==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2018-06-27 08:48:32.436473"], ["sign_in_count", 2], ["updated_at", "2018-06-27 08:48:32.438202"], ["id", 4]]
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 222ms (ActiveRecord: 9.2ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:48:32 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (8.3ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.4ms)
  Rendered home/profile.html.erb within layouts/application (19.1ms)
Completed 200 OK in 77ms (Views: 69.5ms | ActiveRecord: 3.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:48:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (10.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:48:32.628212"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>4, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>4, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:48:39 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"a"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:48:39.034136"], ["updated_at", "2018-06-27 08:48:39.034136"], ["text", "a"], ["chat_id", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>1, :text=>"a"}
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 5.0ms)


Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:48:43 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"4"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>4}
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>4}
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>4} (via streamed from mailbox:4)
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>4} (via streamed from mailbox:2)
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (2.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 10]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 4]]
  [1m[35m (8.0ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 36ms (Views: 0.5ms | ActiveRecord: 17.0ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 10:48:44 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:48:44.716341"], ["updated_at", "2018-06-27 08:48:44.716341"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>5, :username=>"flavia"}
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 10.4ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>5, "username"=>"flavia"} (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:48:44 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 5]]
  Rendered home/_chat.html.erb (4.6ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (5.0ms)
  Rendered home/profile.html.erb within layouts/application (19.4ms)
Completed 200 OK in 60ms (Views: 51.5ms | ActiveRecord: 3.0ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:44 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (6.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:48:44.820590"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>5, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>5, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:48:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:48:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:48:45.119245"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>5, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>5, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:48:49 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"5", "text"=>"a"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:48:49.778270"], ["updated_at", "2018-06-27 08:48:49.778270"], ["text", "a"], ["from", 1], ["chat_id", 5]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"message", :chat_id=>5, :text=>"a"}
Completed 200 OK in 35ms (Views: 0.8ms | ActiveRecord: 13.6ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>5, "text"=>"a"} (via streamed from mailbox:4)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:49:03 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"b"}}
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:49:03 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"b"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (2.6ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mChat Load (2.7ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:49:03.712652"], ["updated_at", "2018-06-27 08:49:03.712652"], ["text", "b"], ["chat_id", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:49:03.714131"], ["updated_at", "2018-06-27 08:49:03.714131"], ["text", "b"], ["chat_id", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>1, :text=>"b"}
Completed 200 OK in 43ms (Views: 0.3ms | ActiveRecord: 14.6ms)


  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>1, :text=>"b"}
Completed 200 OK in 38ms (Views: 0.2ms | ActiveRecord: 11.0ms)


  [1m[35m (7.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (207.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (202.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying DEFAULT 'offline')[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (6.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (38.6ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (3.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (9.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (11.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-27 08:53:07.769268"], ["updated_at", "2018-06-27 08:53:07.769268"]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$C2YMGaP0g6FuCtyvn8Faz.vPeN8TiaS1BMHV.MkoAoFEE6B5WsnqC"], ["created_at", "2018-06-27 08:53:12.611336"], ["updated_at", "2018-06-27 08:53:12.611336"], ["role", "superadmin"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$OzTCKplqQzm0wwEwWoEtR.2Xpt1hC8zn13JxHev6IgtZHXlb/k6wy"], ["created_at", "2018-06-27 08:53:12.791949"], ["updated_at", "2018-06-27 08:53:12.791949"], ["role", "admin"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$FXj4apIhlJzh65gC6K1/nOuqSvdfWOlbJ1foV2XpYaSw0usHD6Vui"], ["created_at", "2018-06-27 08:53:12.973920"], ["updated_at", "2018-06-27 08:53:12.973920"], ["role", "admin"]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$H3kn.ELCRbPf1DaMGIdrbO12ryeu5fNNukl9ffOZEDOSqOo7C7zqW"], ["created_at", "2018-06-27 08:53:13.162363"], ["updated_at", "2018-06-27 08:53:13.162363"], ["role", "admin"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:53:13.211265"], ["updated_at", "2018-06-27 08:53:13.211265"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:53:13.239255"], ["updated_at", "2018-06-27 08:53:13.239255"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:53:13.249383"], ["updated_at", "2018-06-27 08:53:13.249383"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:53:13.253647"], ["updated_at", "2018-06-27 08:53:13.253647"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:53:13.257896"], ["updated_at", "2018-06-27 08:53:13.257896"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:53:13.261574"], ["updated_at", "2018-06-27 08:53:13.261574"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:53:22 +0200
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:53:22 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:53:22.916131"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (5.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:53:26 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:53:26 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:53:26.525739"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:4)
Started GET "/" for 127.0.0.1 at 2018-06-27 10:53:27 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 401 Unauthorized in 26ms (ActiveRecord: 0.9ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:53:28 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (31.1ms)
Completed 200 OK in 1263ms (Views: 1258.6ms | ActiveRecord: 0.0ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:53:29 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (4.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:53:29.423887"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (29.0ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (12.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (12.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:4)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:53:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:53:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:53:29.569144"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:4)
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:53:31 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"etG81U5K+zp9IxN7O5TP+SCajQQGfazqlEWKeARXmfXNH+mEHAr8ADi0PdvYMMoaYHhjb0v091sfm2wx1YHKtg==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-27 08:53:31.789474"], ["last_sign_in_at", "2018-06-27 08:53:31.789474"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-27 08:53:31.792110"], ["id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 252ms (ActiveRecord: 4.5ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-27 10:53:31 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (83.6ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (3.3ms)
  Rendered home/profile.html.erb within layouts/application (103.8ms)
Completed 200 OK in 151ms (Views: 131.5ms | ActiveRecord: 13.3ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:53:31 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (38.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (7.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:53:32.033900"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (11.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (20.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:4)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:53:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:53:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:53:32.167041"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:4)
Started GET "/" for 127.0.0.1 at 2018-06-27 10:53:39 +0200
Processing by HomeController#profile as HTML
Started GET "/" for 127.0.0.1 at 2018-06-27 10:53:39 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 401 Unauthorized in 12ms (ActiveRecord: 1.6ms)


  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 401 Unauthorized in 11ms (ActiveRecord: 2.1ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:53:39 +0200
Processing by Users::SessionsController#new as HTML
Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:53:39 +0200
  Rendering users/sessions/new.html.erb within layouts/application
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (7.3ms)
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (4.0ms)
Completed 200 OK in 149ms (Views: 146.8ms | ActiveRecord: 0.0ms)


Completed 200 OK in 129ms (Views: 127.2ms | ActiveRecord: 0.0ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:53:39 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:53:39.831489"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:53:39 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:53:39 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:53:39.955713"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:53:42 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"SVECG1BQIaMC+Qh71+Jn1vqy7voTa3NmwW9nrfzMeAeqkECfrHJodWXRVWgUhPI8PzDlOVRM11MUy9581Nt0aQ==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-27 08:53:42.371625"], ["last_sign_in_at", "2018-06-27 08:53:42.371625"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-27 08:53:42.373499"], ["id", 4]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 233ms (ActiveRecord: 10.1ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:53:42 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (9.6ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.1ms)
  Rendered home/profile.html.erb within layouts/application (22.6ms)
Completed 200 OK in 73ms (Views: 62.5ms | ActiveRecord: 3.6ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:53:42 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (3.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:53:42.504388"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:53:42 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:53:42 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:53:42.587991"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:53:44 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"2"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:2)
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:4)
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (1.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[35mSQL (1.3ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.9ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 32ms (Views: 0.4ms | ActiveRecord: 7.9ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 10:53:48 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:53:48.389716"], ["updated_at", "2018-06-27 08:53:48.389716"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>3, :username=>"flavia"}
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 8.8ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>3, "username"=>"flavia"} (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:53:48 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.4ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (5.7ms)
  Rendered home/profile.html.erb within layouts/application (18.4ms)
Completed 200 OK in 54ms (Views: 46.3ms | ActiveRecord: 3.2ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:53:48 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (15.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:53:48.492252"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:53:49 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:53:49 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (5.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:53:49.262643"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (10.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"online"} (via streamed from mailbox:2)
  [1m[35m (7.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (204.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (194.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying DEFAULT 'offline')[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (24.7ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (4.9ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (12.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-27 08:56:33.979038"], ["updated_at", "2018-06-27 08:56:33.979038"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$MPTxW9xy6NYUKBRZQgVZb.XLx1Db/f.mdC0hUiQS5Ir/Agc1DrLZm"], ["created_at", "2018-06-27 08:56:38.729919"], ["updated_at", "2018-06-27 08:56:38.729919"], ["role", "superadmin"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$lJnsmyzl574doFW6wXUFUOewBVGUz90qYjchVv7VtOInxESxaHHm2"], ["created_at", "2018-06-27 08:56:38.903760"], ["updated_at", "2018-06-27 08:56:38.903760"], ["role", "admin"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$S59oqybalWnh3kl7x.L7OePTGJmUyEp.XzH5CENr/LHTGo/Do93hS"], ["created_at", "2018-06-27 08:56:39.103779"], ["updated_at", "2018-06-27 08:56:39.103779"], ["role", "admin"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$bEwL2MHaD/JwvXsBhVvD0ukcUC9Fdv/1C47ZX.F7JjHCTue2FMhbO"], ["created_at", "2018-06-27 08:56:39.284314"], ["updated_at", "2018-06-27 08:56:39.284314"], ["role", "admin"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:56:39.323524"], ["updated_at", "2018-06-27 08:56:39.323524"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:56:39.355192"], ["updated_at", "2018-06-27 08:56:39.355192"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:56:39.367755"], ["updated_at", "2018-06-27 08:56:39.367755"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:56:39.381077"], ["updated_at", "2018-06-27 08:56:39.381077"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:56:39.392135"], ["updated_at", "2018-06-27 08:56:39.392135"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (14.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-27 08:56:39.410071"], ["updated_at", "2018-06-27 08:56:39.410071"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:56:48 +0200
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:56:48 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:56:48.407731"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-27 10:56:49 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 401 Unauthorized in 24ms (ActiveRecord: 0.9ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:56:49 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (21.8ms)
Completed 200 OK in 1975ms (Views: 1969.2ms | ActiveRecord: 0.0ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:56:51 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (7.5ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (5.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:56:51.892113"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (3.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:56:51 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:56:51 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (9.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (9.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:56:52.106398"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (9.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:56:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:56:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:56:53.568912"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
Started GET "/" for 127.0.0.1 at 2018-06-27 10:56:56 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 401 Unauthorized in 23ms (ActiveRecord: 5.4ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:56:56 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (11.1ms)
Completed 200 OK in 87ms (Views: 84.0ms | ActiveRecord: 0.0ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:56:56 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:56:56.903269"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (27.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (19.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:56:57 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:56:57 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:56:57.086185"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (10.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:56:59 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"3xHpiTH67TUsMiJtiirisk8QUh1oUmeB+1S39b+z490KMyRZQfpbhPdqMr0TgE9ihxpiOcBWVA37LVgQUN4s8Q==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-27 08:56:59.541696"], ["last_sign_in_at", "2018-06-27 08:56:59.541696"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-27 08:56:59.543046"], ["id", 4]]
  [1m[35m (9.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 242ms (ActiveRecord: 12.5ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:56:59 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (40.9ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.3ms)
  Rendered home/profile.html.erb within layouts/application (56.4ms)
Completed 200 OK in 98ms (Views: 82.9ms | ActiveRecord: 9.9ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:56:59 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (11.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (7.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:56:59.708752"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (21.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (13.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:56:59 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:56:59 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:56:59.798681"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:57:04 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"NC6J1huA/4KFAYV2a384mdIVrMlvwJgRwl5vCZLES/d2w6eA4Mrirfx5W+BDrJzFIdaE53LD8LO49G/a+alafg==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-27 08:57:04.494114"], ["last_sign_in_at", "2018-06-27 08:57:04.494114"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-27 08:57:04.495250"], ["id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 212ms (ActiveRecord: 2.6ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-27 10:57:04 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (15.6ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.7ms)
  Rendered home/profile.html.erb within layouts/application (27.3ms)
Completed 200 OK in 62ms (Views: 51.0ms | ActiveRecord: 5.3ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:57:04 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (27.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:57:04.605060"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (12.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:4)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:57:04 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:57:04 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:57:04.751381"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:4)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:57:08 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:2)
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:4)
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (1.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 27ms (Views: 0.3ms | ActiveRecord: 6.8ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 10:57:10 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:57:10.585036"], ["updated_at", "2018-06-27 08:57:10.585036"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>3, :username=>"flavia"}
Completed 200 OK in 19ms (Views: 0.3ms | ActiveRecord: 10.8ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>3, "username"=>"flavia"} (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:57:10 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  Rendered home/_chat.html.erb (3.9ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (5.1ms)
  Rendered home/profile.html.erb within layouts/application (18.6ms)
Completed 200 OK in 57ms (Views: 48.4ms | ActiveRecord: 3.1ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:57:10 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (3.1ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:57:10.685741"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:57:10 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:57:10 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:57:10.990364"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:57:19 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"ciao fla"}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 08:57:19.989827"], ["updated_at", "2018-06-27 08:57:19.989827"], ["text", "ciao fla"], ["from", 1], ["chat_id", 3]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"message", :chat_id=>3, :text=>"ciao fla"}
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 10.5ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"ciao fla"} (via streamed from mailbox:4)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:57:30 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"si te?"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:57:30.691332"], ["updated_at", "2018-06-27 08:57:30.691332"], ["text", "si te?"], ["chat_id", 1]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>1, :text=>"si te?"}
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 10.8ms)


Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:58:47 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>3}
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>3}
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>3} (via streamed from mailbox:4)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>3} (via streamed from mailbox:2)
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[35mSQL (9.0ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (1.8ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 14.8ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:58:54 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  Rendered home/_chat.html.erb (2.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (0.8ms)
  Rendered home/profile.html.erb within layouts/application (16.8ms)
Completed 200 OK in 763ms (Views: 754.0ms | ActiveRecord: 1.8ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:58:54 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (7.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (6.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:58:54.998457"], ["id", 4]]
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:58:55 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:58:55 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com]   [1m[35m (19.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 10:59:00 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:59:00.263768"], ["updated_at", "2018-06-27 08:59:00.263768"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>4, :username=>"flavia"}
Completed 200 OK in 21ms (Views: 0.6ms | ActiveRecord: 10.6ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>4, "username"=>"flavia"} (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:59:00 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  Rendered home/_chat.html.erb (4.2ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.8ms)
  Rendered home/profile.html.erb within layouts/application (37.0ms)
Completed 200 OK in 73ms (Views: 64.2ms | ActiveRecord: 3.2ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:00 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:59:00.378571"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>4, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>4, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:59:00 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:00 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:59:00.695584"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>4, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>4, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 10:59:08 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>4}
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>4}
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>4} (via streamed from mailbox:4)
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>4} (via streamed from mailbox:2)
  [1m[36mMessage Load (5.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 4]]
  [1m[35mSQL (5.9ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 4]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 31ms (Views: 0.3ms | ActiveRecord: 16.5ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-27 10:59:09 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (8.5ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.5ms)
  Rendered home/profile.html.erb within layouts/application (19.2ms)
Completed 200 OK in 58ms (Views: 49.0ms | ActiveRecord: 3.1ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:09 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (2.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:59:09.954860"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (37.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:59:10 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:10 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (7.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:59:10.142663"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (26.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (13.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (34.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 10:59:14 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:59:14.562865"], ["updated_at", "2018-06-27 08:59:14.562865"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>5, :username=>"flavia"}
Completed 200 OK in 17ms (Views: 0.3ms | ActiveRecord: 10.1ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>5, "username"=>"flavia"} (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 10:59:14 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 5]]
  Rendered home/_chat.html.erb (4.6ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (6.5ms)
  Rendered home/profile.html.erb within layouts/application (24.0ms)
Completed 200 OK in 71ms (Views: 61.8ms | ActiveRecord: 3.3ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:14 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:59:14.681358"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (7.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (17.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>5, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>5, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:59:14 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:14 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 08:59:14.976058"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>5, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>5, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 10:59:24 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"oo"}}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 08:59:24.680652"], ["updated_at", "2018-06-27 08:59:24.680652"], ["text", "oo"], ["chat_id", 1]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>1, :text=>"oo"}
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 12.5ms)


Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-27 10:59:43 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"j1mLUCjd4Qpmsm5cslbw3P2Y9irPBtx9ZZW5P3Tk20Y7Y7ZeVyzVH31GlhKWC3WW5jGaU82ejlZahuxaO/+krQ=="}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 12ms (ActiveRecord: 1.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-27 10:59:43 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 10:59:43 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (4.7ms)
Completed 200 OK in 49ms (Views: 47.5ms | ActiveRecord: 0.0ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:43 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 08:59:43.307392"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (3.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>5, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>5, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:59:43 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:43 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:43 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:43 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:59:44 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:44 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:44 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:44 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 10:59:52 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:52 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:52 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 10:59:52 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:01:50 +0200
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:01:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:01:50 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:01:50 +0200
Started GET "/" for 127.0.0.1 at 2018-06-27 11:01:50 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 5]]
  Rendered home/_chat.html.erb (120.3ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (5.5ms)
  Rendered home/profile.html.erb within layouts/application (445.3ms)
Completed 200 OK in 638ms (Views: 494.7ms | ActiveRecord: 25.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:01:51 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:01:51 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>5, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 11:01:54 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>1}
[ActionCable] Broadcasting to mailbox:3: {:type=>"delete_chat", :chat_id=>1}
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>1} (via streamed from mailbox:2)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (1.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[35mSQL (3.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (3.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (1.3ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (1.3ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 47ms (Views: 0.4ms | ActiveRecord: 16.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:02:03 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:02:03 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:02:03 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:02:03 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:02:04 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:02:04 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:02:04 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:02:04 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 11:02:06 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"hbfFLUoI0N3TwPfajbRoZtnK1414hezh6K2cWYXKRyxa4rqMVqJKc/1BzUe6+uO97/95h3MSr+dgbeTXISG8Uw==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2018-06-27 09:02:06.669196"], ["sign_in_count", 2], ["updated_at", "2018-06-27 09:02:06.670474"], ["id", 4]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 267ms (ActiveRecord: 10.6ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 11:02:06 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 5]]
  Rendered home/_chat.html.erb (4.9ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (7.4ms)
  Rendered home/profile.html.erb within layouts/application (25.4ms)
Completed 200 OK in 67ms (Views: 56.7ms | ActiveRecord: 4.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:02:06 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:02:06 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 09:02:06.905242"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>5, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>5, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 11:02:08 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"5"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>5}
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>5}
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>5} (via streamed from mailbox:4)
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>5} (via streamed from mailbox:2)
  [1m[36mMessage Load (10.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 5]]
  [1m[35mSQL (1.3ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 16.0ms)


Started GET "/" for 127.0.0.1 at 2018-06-27 11:03:56 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  Rendered home/_chat.html.erb (2.2ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.3ms)
  Rendered home/profile.html.erb within layouts/application (22.7ms)
Completed 200 OK in 1257ms (Views: 1245.6ms | ActiveRecord: 2.6ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:03:58 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (37.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:03:58 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:03:58 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (68.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 09:03:58.051129"], ["id", 2]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com]   [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (2.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 11:04:00 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 09:04:00.937568"], ["updated_at", "2018-06-27 09:04:00.937568"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"create_chat", :chat_id=>6, :username=>"giorgio"}
Completed 200 OK in 25ms (Views: 1.1ms | ActiveRecord: 12.0ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>6, "username"=>"giorgio"} (via streamed from mailbox:4)
Started GET "/" for 127.0.0.1 at 2018-06-27 11:04:00 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 6]]
  Rendered home/_chat.html.erb (7.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (7.4ms)
  Rendered home/profile.html.erb within layouts/application (30.7ms)
Completed 200 OK in 94ms (Views: 78.3ms | ActiveRecord: 5.9ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:04:01 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (19.4ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 09:04:01.080163"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (10.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>6, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>6, "status"=>"offline"} (via streamed from mailbox:4)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:04:01 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:04:01 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 09:04:01.214349"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>6, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>6, "status"=>"online"} (via streamed from mailbox:4)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 11:04:15 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"6"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>6}
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>6}
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>6} (via streamed from mailbox:2)
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>6} (via streamed from mailbox:4)
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (2.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 6]]
  [1m[35mSQL (2.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 6]]
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 12.6ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 11:04:24 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"4"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 09:04:24.506831"], ["updated_at", "2018-06-27 09:04:24.506831"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"create_chat", :chat_id=>7, :username=>"giorgio"}
Completed 200 OK in 23ms (Views: 0.3ms | ActiveRecord: 10.5ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>7, "username"=>"giorgio"} (via streamed from mailbox:4)
Started GET "/" for 127.0.0.1 at 2018-06-27 11:04:24 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 7]]
  Rendered home/_chat.html.erb (3.6ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (5.8ms)
  Rendered home/profile.html.erb within layouts/application (21.4ms)
Completed 200 OK in 77ms (Views: 67.0ms | ActiveRecord: 3.4ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:04:24 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (13.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 09:04:24.631382"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (23.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (16.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>7, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>7, "status"=>"offline"} (via streamed from mailbox:4)
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:04:24 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:04:24 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (18.1ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 09:04:24.796538"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>7, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>7, "status"=>"online"} (via streamed from mailbox:4)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 11:04:29 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"7", "text"=>"oioioi fla"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 09:04:29.497283"], ["updated_at", "2018-06-27 09:04:29.497283"], ["text", "oioioi fla"], ["chat_id", 7]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"message", :chat_id=>7, :text=>"oioioi fla"}
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 11.9ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>7, "text"=>"oioioi fla"} (via streamed from mailbox:4)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 11:04:34 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"7"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>7}
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>7}
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>7} (via streamed from mailbox:2)
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>7} (via streamed from mailbox:4)
  [1m[36mMessage Load (3.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 7]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (1.5ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 8.3ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:29:50 +0200
  [1m[35m (7.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:29:50 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (12.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:30:51 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:30:51 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/" for 127.0.0.1 at 2018-06-27 11:31:31 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  Rendered home/_chat.html.erb (3.8ms)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.4ms)
  Rendered home/profile.html.erb within layouts/application (1282.5ms)
Completed 200 OK in 1395ms (Views: 1367.1ms | ActiveRecord: 4.3ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:31:32 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (53.3ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 09:31:32.875254"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (19.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (2.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:31:33 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:31:33 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 09:31:33.101478"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 11:31:38 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (2.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  Rendered home/_chat.html.erb (4.3ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.3ms)
  Rendered home/profile.html.erb within layouts/application (18.8ms)
Completed 200 OK in 74ms (Views: 61.1ms | ActiveRecord: 3.9ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:31:38 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 09:31:38.522759"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:31:38 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:31:38 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 09:31:38.704929"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 11:31:44 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (7.2ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 09:31:44.366389"], ["updated_at", "2018-06-27 09:31:44.366389"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"create_chat", :chat_id=>8, :username=>"giorgio"}
Completed 200 OK in 48ms (Views: 0.4ms | ActiveRecord: 17.5ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>8, "username"=>"giorgio"} (via streamed from mailbox:4)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-27 11:32:25 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"fcKjCoSDH6j+F7Gef22dv963H6G6rKMnnVErt4SxtcVXYesNr3wnfXGiVwgciDUIKmZpydBiW6KPcJrMohrbrw=="}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 24ms (ActiveRecord: 1.3ms)


Started GET "/" for 127.0.0.1 at 2018-06-27 11:32:25 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 11:32:25 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (23.7ms)
Completed 200 OK in 76ms (Views: 72.7ms | ActiveRecord: 0.0ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:32:25 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 09:32:25.661288"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (2.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>8, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>8, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:32:25 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:32:25 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:32:25 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:32:25 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:32:35 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:32:35 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:32:35 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:32:35 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:32:46 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:32:46 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:32:46 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:32:46 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:32:53 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:32:53 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:32:53 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:32:53 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:33:16 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:33:16 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:33:16 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:33:16 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:34:11 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:34:11 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:34:11 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:34:11 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:34:34 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:34:34 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:34:34 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:34:34 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:36:16 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:36:16 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:36:16 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:36:16 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:36:42 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:36:42 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:36:42 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:36:42 +0200
Started GET "/" for 127.0.0.1 at 2018-06-27 11:36:51 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 8]]
  Rendered home/_chat.html.erb (33.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (6.2ms)
  Rendered home/profile.html.erb within layouts/application (50.6ms)
Completed 500 Internal Server Error in 1238ms (ActiveRecord: 6.8ms)


  
ActionView::Template::Error (SyntaxError: [stdin]:13:1: unexpected indentation):
     5:     <%= csrf_meta_tags %>
     6:     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
     7:     <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
     8:     <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
     9:     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    10:     <%= stylesheet_link_tag "https://bootswatch.com/4/sketchy/bootstrap.min.css" %>
    11:   </head>
  
(execjs):7539:8
(execjs):7545:14
app/views/layouts/application.html.erb:8:in `_app_views_layouts_application_html_erb___1378705014035608327_70362539521440'
[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:36:53 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (50.7ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (8.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 09:36:53.622540"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (1.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>8, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
Started GET "/" for 127.0.0.1 at 2018-06-27 11:37:27 +0200
Processing by HomeController#profile as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 8]]
  Rendered home/_chat.html.erb (4.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.8ms)
  Rendered home/profile.html.erb within layouts/application (19.4ms)
Completed 200 OK in 644ms (Views: 634.7ms | ActiveRecord: 3.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:37:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:37:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 09:37:28.272858"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>8, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:37:37 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:37:37 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:37:37 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:37:37 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:37:37 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:37:37 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:37:37 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:37:37 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 11:37:41 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"BvV67nQHE7phTaJvIqKHDVqHazgNTrFUND6ICbUN2IcoeVDc+c9miFVY2wyBFQNEsMSk5xh1e2whzc2obTZsww==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2018-06-27 09:37:41.489051"], ["last_sign_in_at", "2018-06-27 09:02:06.669196"], ["sign_in_count", 3], ["updated_at", "2018-06-27 09:37:41.490495"], ["id", 4]]
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 299ms (ActiveRecord: 10.0ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-27 11:37:41 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 8]]
  Rendered home/_chat.html.erb (3.9ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (3.9ms)
  Rendered home/profile.html.erb within layouts/application (19.5ms)
Completed 200 OK in 63ms (Views: 54.8ms | ActiveRecord: 2.7ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:37:41 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:37:41 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 09:37:41.717765"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>8, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>8, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-27 11:37:44 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"8"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>8}
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>8}
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>8} (via streamed from mailbox:2)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>8} (via streamed from mailbox:4)
  [1m[36mMessage Load (1.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 8]]
  [1m[35mSQL (1.5ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 28ms (Views: 0.3ms | ActiveRecord: 7.1ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 11:37:51 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"4"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 09:37:51.335955"], ["updated_at", "2018-06-27 09:37:51.335955"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"create_chat", :chat_id=>9, :username=>"giorgio"}
Completed 200 OK in 21ms (Views: 0.5ms | ActiveRecord: 10.8ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>9, "username"=>"giorgio"} (via streamed from mailbox:4)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 11:38:09 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"9", "text"=>"ciao gio"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (10.3ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 09:38:09.954000"], ["updated_at", "2018-06-27 09:38:09.954000"], ["text", "ciao gio"], ["from", 1], ["chat_id", 9]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>9, :text=>"ciao gio"}
Completed 200 OK in 50ms (Views: 0.3ms | ActiveRecord: 21.6ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>9, "text"=>"ciao gio"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 11:38:28 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"9", "text"=>"ma perchÃ¨ sei offline?"}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 09:38:28.032419"], ["updated_at", "2018-06-27 09:38:28.032419"], ["text", "ma perchÃ¨ sei offline?"], ["chat_id", 9]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"message", :chat_id=>9, :text=>"ma perchÃ¨ sei offline?"}
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 10.6ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>9, "text"=>"ma perchÃ¨ sei offline?"} (via streamed from mailbox:4)
Started POST "/create_chat" for 127.0.0.1 at 2018-06-27 11:39:12 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"3"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 09:39:12.538194"], ["updated_at", "2018-06-27 09:39:12.538194"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"create_chat", :chat_id=>10, :username=>"giorgio"}
Completed 200 OK in 22ms (Views: 0.5ms | ActiveRecord: 8.9ms)


Started POST "/send_message" for 127.0.0.1 at 2018-06-27 11:39:17 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"10", "text"=>"a coioneee"}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-27 09:39:17.749213"], ["updated_at", "2018-06-27 09:39:17.749213"], ["text", "a coioneee"], ["chat_id", 10]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>10, :text=>"a coioneee"}
Completed 200 OK in 61ms (Views: 0.3ms | ActiveRecord: 11.3ms)


Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-27 11:39:26 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"rf0cr0doDA9j6A/WsOSZIYXvSNK5fa8JykQVOAwLqhMKlyOwqvS6lsBE4w7EoQfHgQ1t5OJHv1J1CU1ppSN9rA=="}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 10ms (ActiveRecord: 1.3ms)


Started GET "/" for 127.0.0.1 at 2018-06-27 11:39:26 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-27 11:39:26 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.5ms)
Completed 200 OK in 51ms (Views: 49.7ms | ActiveRecord: 0.0ms)


[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:39:26 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-27 09:39:26.976548"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (7.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>9, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>9, "status"=>"offline"} (via streamed from mailbox:2)
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:39:27 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:39:27 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:39:27 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:39:27 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:39:28 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:39:28 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:39:28 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:39:28 +0200
Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:39:29 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:39:29 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:39:29 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:39:29 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-27 11:39:32 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"CKl/lSXP68o0ZKRw0tQ4PjSg67JIFwgTsRO1NQNFNnv7KZkk6c+OYFSI30sMZarCBuYSo6GioudRG64DT0V52Q==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-27 09:39:32.371008"], ["last_sign_in_at", "2018-06-27 09:39:32.371008"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-27 09:39:32.372628"], ["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/3
Completed 302 Found in 216ms (ActiveRecord: 2.0ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-27 11:39:32 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 10]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (7.4ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.5ms)
  Rendered home/profile.html.erb within layouts/application (19.8ms)
Completed 200 OK in 64ms (Views: 54.8ms | ActiveRecord: 3.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-27 11:39:32 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-27 11:39:32 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox:3
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-27 09:39:32.571715"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.9ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>10, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>10, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-27 11:39:43 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"10", "text"=>"a scemoooo"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-27 09:39:43.503788"], ["updated_at", "2018-06-27 09:39:43.503788"], ["text", "a scemoooo"], ["from", 1], ["chat_id", 10]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"message", :chat_id=>10, :text=>"a scemoooo"}
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 10.3ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>10, "text"=>"a scemoooo"} (via streamed from mailbox:2)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (201.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (187.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying DEFAULT 'offline')[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (12.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (10.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (28.1ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (22.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-30 18:57:22.922540"], ["updated_at", "2018-06-30 18:57:22.922540"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$YdgOvKeidvRD5JEYiIvaqO7rZbGdVhBYfSob3/y5lzAq64D6nMi2C"], ["created_at", "2018-06-30 18:57:27.419736"], ["updated_at", "2018-06-30 18:57:27.419736"], ["role", "superadmin"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$cXhwtWgwZ4nYzoShlYxDqO1y8SG/gqOkUlFHzra0ebNcxzT.8gZJ."], ["created_at", "2018-06-30 18:57:27.596154"], ["updated_at", "2018-06-30 18:57:27.596154"], ["role", "admin"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$9nBr2PTpXp3PK7BTXA2xsONfaRrAooV67D5qG9U/m/IXd82MZaQ3W"], ["created_at", "2018-06-30 18:57:27.782251"], ["updated_at", "2018-06-30 18:57:27.782251"], ["role", "admin"]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$LRuxSK7hkvBsudkr/rYZmO4MBWSUYzuCspJbkI7hKp7dZfFfOzsoq"], ["created_at", "2018-06-30 18:57:27.961401"], ["updated_at", "2018-06-30 18:57:27.961401"], ["role", "admin"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-30 18:57:28.008923"], ["updated_at", "2018-06-30 18:57:28.008923"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-30 18:57:28.038886"], ["updated_at", "2018-06-30 18:57:28.038886"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-30 18:57:28.047738"], ["updated_at", "2018-06-30 18:57:28.047738"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-30 18:57:28.054375"], ["updated_at", "2018-06-30 18:57:28.054375"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-30 18:57:28.060163"], ["updated_at", "2018-06-30 18:57:28.060163"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-30 18:57:28.064210"], ["updated_at", "2018-06-30 18:57:28.064210"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Started GET "/poll" for 127.0.0.1 at 2018-06-30 20:57:34 +0200
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/poll"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/poll" for 127.0.0.1 at 2018-06-30 20:57:36 +0200
  
ActionController::RoutingError (No route matches [GET] "/poll"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2018-06-30 20:57:37 +0200
Processing by HomeController#profile as HTML
Started GET "/poll" for 127.0.0.1 at 2018-06-30 20:57:37 +0200
  
ActionController::RoutingError (No route matches [GET] "/poll"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 401 Unauthorized in 95ms (ActiveRecord: 47.9ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-30 20:57:38 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (19.4ms)
Completed 200 OK in 460ms (Views: 456.7ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-30 20:57:38 +0200
Started GET "/" for 127.0.0.1 at 2018-06-30 20:57:38 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-30 20:57:38 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (6.9ms)
Completed 200 OK in 160ms (Views: 157.2ms | ActiveRecord: 0.0ms)


Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:57:38 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
Started GET "/cable" for 127.0.0.1 at 2018-06-30 20:57:38 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:57:38 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox:3
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-30 18:57:39.015767"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (1.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:57:39 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-30 20:57:42 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"dldeIyKGvtSqVkMm9YysJhPPzushbKHIYfoC24LwWarElIkR3dgcAsWtOFHPZy6hz6NADxkrnk8ABGX/Hv7Hxg==", "user"=>{"email"=>"vincenzo@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/poll" for 127.0.0.1 at 2018-06-30 20:57:42 +0200
  
  [1m[35mSQL (2.4ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-30 18:57:42.495479"], ["last_sign_in_at", "2018-06-30 18:57:42.495479"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-30 18:57:42.497802"], ["id", 3]]
ActionController::RoutingError (No route matches [GET] "/poll"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  [1m[35m (10.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/3
Completed 302 Found in 245ms (ActiveRecord: 14.0ms)


Started GET "/users/profile/3" for 127.0.0.1 at 2018-06-30 20:57:42 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (35.6ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (49.0ms)
Completed 200 OK in 128ms (Views: 78.0ms | ActiveRecord: 10.0ms)


[ActionCable] [vincenzo@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:57:42 +0200
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (1.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-30 18:57:42.693086"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel stopped streaming from mailbox:3
Started GET "/cable" for 127.0.0.1 at 2018-06-30 20:57:42 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:57:42 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8z)
[ActionCable] [vincenzo@gmail.com] MailboxChannel is streaming from mailbox:3
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "vincenzo"], ["id", 3], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-30 18:57:42.774889"], ["id", 3]]
[ActionCable] [vincenzo@gmail.com]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 3 OR guest_id = 3)[0m
[ActionCable] [vincenzo@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/poll" for 127.0.0.1 at 2018-06-30 20:57:42 +0200
  
ActionController::RoutingError (No route matches [GET] "/poll"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2018-06-30 20:57:44 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-30 20:57:44 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (7.4ms)
Completed 200 OK in 74ms (Views: 72.2ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-30 20:57:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:57:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:57:45 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:57:45 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-30 20:57:47 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"yldkzwntN4pl5O+eFeUcOzmwDI0MgBPQub2WwBhrG/O7OJU7lACLCE9NjsPCX5gpJUdcac5hrmdd4srzvSdgUQ==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-30 18:57:47.267274"], ["last_sign_in_at", "2018-06-30 18:57:47.267274"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-30 18:57:47.268360"], ["id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 207ms (ActiveRecord: 6.8ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-30 20:57:47 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (14.4ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.3ms)
  Rendered home/profile.html.erb within layouts/application (25.5ms)
Completed 200 OK in 60ms (Views: 50.7ms | ActiveRecord: 4.6ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-30 20:57:47 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:57:47 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-30 18:57:47.513216"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [giorgio@gmail.com]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox:3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
Started GET "/poll" for 127.0.0.1 at 2018-06-30 20:57:47 +0200
  
ActionController::RoutingError (No route matches [GET] "/poll"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/poll" for 127.0.0.1 at 2018-06-30 20:57:52 +0200
  
ActionController::RoutingError (No route matches [GET] "/poll"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/poll" for 127.0.0.1 at 2018-06-30 20:57:57 +0200
  
ActionController::RoutingError (No route matches [GET] "/poll"):
  
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
web-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'
web-console (3.6.2) lib/web_console/middleware.rb:20:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.5) lib/rack/method_override.rb:22:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.4) lib/puma/configuration.rb:225:in `call'
puma (3.11.4) lib/puma/server.rb:632:in `handle_request'
puma (3.11.4) lib/puma/server.rb:446:in `process_client'
puma (3.11.4) lib/puma/server.rb:306:in `block in run'
puma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2018-06-30 20:57:58 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-30 20:57:58 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.4ms)
Completed 200 OK in 61ms (Views: 59.2ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-30 20:57:58 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:57:58 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:57:58 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:57:58 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-30 20:58:05 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"qpiXLbNIe9dwxpAYO+j1ypRrnjyskuh7tCBWGkLPSz/hnh0Wr6zdDzM1hEZlsJiNMhCXfNmzUac8Ytnx+1lX7w==", "user"=>{"email"=>"flavia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2018-06-30 18:58:05.411775"], ["last_sign_in_at", "2018-06-30 18:58:05.411775"], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2018-06-30 18:58:05.426914"], ["id", 4]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/4
Completed 302 Found in 260ms (ActiveRecord: 8.2ms)


Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-30 20:58:05 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (9.8ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.8ms)
  Rendered home/profile.html.erb within layouts/application (23.0ms)
Completed 200 OK in 74ms (Views: 64.3ms | ActiveRecord: 3.4ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-30 20:58:05 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:58:05 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-30 18:58:05.654268"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:58:19 +0200
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-30 20:58:19 +0200
Processing by HomeController#profile as HTML
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  Parameters: {"id"=>"4"}
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-30 18:58:19.030375"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:2)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (11.2ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (1.6ms)
  Rendered home/profile.html.erb within layouts/application (25.8ms)
Completed 200 OK in 148ms (Views: 66.8ms | ActiveRecord: 17.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-30 20:58:19 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:58:19 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-30 18:58:19.278550"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (3.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:58:40 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-30 18:58:40.332366"], ["id", 4]]
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-30 20:58:40 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35m (10.7ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (6.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  Rendering home/profile.html.erb within layouts/application
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"offline"} (via streamed from mailbox:2)
  [1m[36mChat Load (1.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (12.7ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  Rendered home/_chats_index.html.erb (2.0ms)
  Rendered home/profile.html.erb within layouts/application (25.4ms)
Completed 200 OK in 90ms (Views: 77.1ms | ActiveRecord: 4.5ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-30 20:58:40 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:58:40 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-30 18:58:40.546233"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (1.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>2, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>2, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-30 20:58:55 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"2", "text"=>"si te?"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-30 18:58:55.978886"], ["updated_at", "2018-06-30 18:58:55.978886"], ["text", "si te?"], ["chat_id", 2]]
  [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"message", :chat_id=>2, :text=>"si te?"}
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 9.2ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>2, "text"=>"si te?"} (via streamed from mailbox:4)
Started POST "/delete_chat" for 127.0.0.1 at 2018-06-30 20:59:01 +0200
Processing by ChatsController#delete_chat as JSON
  Parameters: {"chat_id"=>"2"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] Broadcasting to mailbox:2: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] Broadcasting to mailbox:4: {:type=>"delete_chat", :chat_id=>2}
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:2)
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"delete_chat", "chat_id"=>2} (via streamed from mailbox:4)
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMessage Load (2.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 2]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (2.5ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = $1[0m  [["id", 2]]
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 39ms (Views: 0.2ms | ActiveRecord: 18.3ms)


Started POST "/create_chat" for 127.0.0.1 at 2018-06-30 20:59:10 +0200
Processing by ChatsController#create_chat as JSON
  Parameters: {"guest_id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-30 18:59:10.655831"], ["updated_at", "2018-06-30 18:59:10.655831"], ["owner_id", 4], ["guest_id", 2]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:2: {:type=>"create_chat", :chat_id=>3, :username=>"flavia"}
Completed 200 OK in 18ms (Views: 0.3ms | ActiveRecord: 8.7ms)


[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"create_chat", "chat_id"=>3, "username"=>"flavia"} (via streamed from mailbox:2)
Started GET "/users/profile/4" for 127.0.0.1 at 2018-06-30 20:59:14 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"4"}
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-30 20:59:14 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (6.6ms)
Completed 200 OK in 62ms (Views: 60.8ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-30 20:59:17 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:59:17 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: keep-alive, Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci80)
[ActionCable] [flavia@gmail.com] MailboxChannel is streaming from mailbox:4
[ActionCable] [flavia@gmail.com]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"online"}
[ActionCable] [flavia@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [giorgio@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"online"} (via streamed from mailbox:2)
Started POST "/send_message" for 127.0.0.1 at 2018-06-30 20:59:25 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"3", "text"=>"ciao gio"}}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "from", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-30 18:59:25.428180"], ["updated_at", "2018-06-30 18:59:25.428180"], ["text", "ciao gio"], ["from", 1], ["chat_id", 3]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:4: {:type=>"message", :chat_id=>3, :text=>"ciao gio"}
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 13.7ms)


[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"ciao gio"} (via streamed from mailbox:4)
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>3, "text"=>"ciao gio"} (via streamed from mailbox:4)
Started POST "/send_message" for 127.0.0.1 at 2018-06-30 20:59:29 +0200
Processing by ChatsController#receive as JSON
  Parameters: {"msg"=>{"chat_id"=>"1", "text"=>"si te"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mChat Load (2.6ms)[0m  [1m[34mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "chat_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-30 18:59:29.062363"], ["updated_at", "2018-06-30 18:59:29.062363"], ["text", "si te"], ["chat_id", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] Broadcasting to mailbox:3: {:type=>"message", :chat_id=>1, :text=>"si te"}
Completed 200 OK in 34ms (Views: 0.3ms | ActiveRecord: 8.3ms)


[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"message", "chat_id"=>1, "text"=>"si te"} (via streamed from mailbox:3)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2018-06-30 20:59:39 +0200
Processing by Users::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"vw5QMhNSqPoxXtWNsxr2AH2VhOIRV5A1OsgmIq21NlotSFjcN08Cn+L+M3b2A4PmxhikLAtoMqIROwNR+Zb9wg=="}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/
Completed 302 Found in 14ms (ActiveRecord: 1.5ms)


Started GET "/" for 127.0.0.1 at 2018-06-30 20:59:39 +0200
Processing by HomeController#profile as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2018-06-30 20:59:39 +0200
Processing by Users::SessionsController#new as HTML
  Rendering users/sessions/new.html.erb within layouts/application
  Rendered users/sessions/new.html.erb within layouts/application (3.1ms)
Completed 200 OK in 60ms (Views: 58.6ms | ActiveRecord: 0.0ms)


[ActionCable] [giorgio@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:59:39 +0200
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-30 18:59:39.771052"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (15.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (6.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"offline"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"offline"} (via streamed from mailbox:3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>3, :status=>"offline"}
[ActionCable] [giorgio@gmail.com] MailboxChannel stopped streaming from mailbox:2
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"offline"} (via streamed from mailbox:4)
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"offline"} (via streamed from mailbox:4)
Started GET "/cable" for 127.0.0.1 at 2018-06-30 20:59:39 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:59:39 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:59:39 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:59:39 +0200
[ActionCable] [flavia@gmail.com] Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:59:44 +0200
[ActionCable] [flavia@gmail.com]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "flavia"], ["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "offline"], ["updated_at", "2018-06-30 18:59:44.507356"], ["id", 4]]
[ActionCable] [flavia@gmail.com]   [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [flavia@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 4 OR guest_id = 4)[0m
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [flavia@gmail.com] [ActionCable] Broadcasting to mailbox:2: {:type=>"update_status", :chat_id=>3, :status=>"offline"}
[ActionCable] [flavia@gmail.com] MailboxChannel stopped streaming from mailbox:4
Started GET "/cable" for 127.0.0.1 at 2018-06-30 20:59:45 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:59:45 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
An unauthorized connection attempt was rejected
Failed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:59:45 +0200
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:59:45 +0200
Started POST "/users/sign_in" for 127.0.0.1 at 2018-06-30 20:59:48 +0200
Processing by Users::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"XwHZVUYuH4Z+LUgpncg/WnmLOevq1YSr//Tu+ihWMOdVEY7tDAcQHYwxYtkBT0jx3KvsK+UdnNtSs7ZKZ4NgLg==", "user"=>{"email"=>"giorgio@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2018-06-30 18:59:48.558968"], ["sign_in_count", 2], ["updated_at", "2018-06-30 18:59:48.560177"], ["id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/users/profile/2
Completed 302 Found in 205ms (ActiveRecord: 2.2ms)


Started GET "/users/profile/2" for 127.0.0.1 at 2018-06-30 20:59:48 +0200
Processing by HomeController#profile as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering home/profile.html.erb within layouts/application
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mMessage Load (1.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = $1[0m  [["chat_id", 3]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered home/_chat.html.erb (15.1ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY username[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered home/_chats_index.html.erb (4.1ms)
  Rendered home/profile.html.erb within layouts/application (30.9ms)
Completed 200 OK in 76ms (Views: 65.1ms | ActiveRecord: 5.1ms)


Started GET "/cable" for 127.0.0.1 at 2018-06-30 20:59:48 +0200
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-06-30 20:59:48 +0200
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] Registered connection (Z2lkOi8vZmxlYWxpYnJhcnkvVXNlci8y)
[ActionCable] [giorgio@gmail.com] MailboxChannel is streaming from mailbox:2
[ActionCable] [giorgio@gmail.com]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "giorgio"], ["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "status" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["status", "online"], ["updated_at", "2018-06-30 18:59:48.816876"], ["id", 2]]
[ActionCable] [giorgio@gmail.com]   [1m[35m (9.2ms)[0m  [1m[35mCOMMIT[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE (owner_id = 2 OR guest_id = 2)[0m
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:3: {:type=>"update_status", :chat_id=>1, :status=>"online"}
[ActionCable] [vincenzo@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>1, "status"=>"online"} (via streamed from mailbox:3)
[ActionCable] [giorgio@gmail.com]   [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActionCable] [giorgio@gmail.com] [ActionCable] Broadcasting to mailbox:4: {:type=>"update_status", :chat_id=>3, :status=>"online"}
[ActionCable] [giorgio@gmail.com] MailboxChannel is transmitting the subscription confirmation
[ActionCable] [flavia@gmail.com] MailboxChannel transmitting {"type"=>"update_status", "chat_id"=>3, "status"=>"online"} (via streamed from mailbox:4)
  [1m[35m (7.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (205.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_development"[0m
  [1m[35m (190.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "flealibrary_test"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7461772034015038740)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (1)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (17.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "surname" character varying, "username" character varying, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "status" character varying DEFAULT 'offline')[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "1"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeUsernameTypeInUsers (2)
  [1m[35m (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ALTER "username" DROP NOT NULL[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "2"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRoleToUsers (3)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (24.9ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying DEFAULT 'booklover'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "3"]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChatMigration (4)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.2ms)[0m  [1m[35mCREATE TABLE "chats" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "owner_id" bigint, "guest_id" bigint)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_owner_id" ON "chats"  ("owner_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_chats_on_guest_id" ON "chats"  ("guest_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_a229e37047"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "chats" ADD CONSTRAINT "fk_rails_d21eee654c"
FOREIGN KEY ("guest_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "text" character varying, "read" boolean, "from" integer DEFAULT 0, "chat_id" bigint)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_messages_on_chat_id" ON "messages"  ("chat_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "messages" ADD CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "4"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDetailsToUsers (6)
  [1m[35m (11.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" character varying[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_sent_at" timestamp[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "6"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageToUsers (7)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "users" ADD "image" character varying[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "7"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-06-30 19:00:35.668395"], ["updated_at", "2018-06-30 19:00:35.668395"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7461772034015038740)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dante@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "dante"], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "dante"], ["surname", "alighieri"], ["username", "dante"], ["email", "dante@gmail.com"], ["encrypted_password", "$2a$11$ASdTMq4UUmsbrkT5X4jD1.Un.hgnaz6wSJARWlwnYecSrhMveriES"], ["created_at", "2018-06-30 19:00:40.010075"], ["updated_at", "2018-06-30 19:00:40.010075"], ["role", "superadmin"]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "giorgio@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "giorgio"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "giorgio"], ["surname", "dema"], ["username", "giorgio"], ["email", "giorgio@gmail.com"], ["encrypted_password", "$2a$11$zzsLpVANTDnqIISWLDr9guoFZm59qey65afA4BbnyvfsR6gzgiC.i"], ["created_at", "2018-06-30 19:00:40.188461"], ["updated_at", "2018-06-30 19:00:40.188461"], ["role", "admin"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vincenzo@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "vincenzo"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "vincenzo"], ["surname", "cas"], ["username", "vincenzo"], ["email", "vincenzo@gmail.com"], ["encrypted_password", "$2a$11$QlFl5hBwT7di5MndISDPCOJHxknynKxbKxb5bzjiB7I5rmdNX8k2i"], ["created_at", "2018-06-30 19:00:40.364838"], ["updated_at", "2018-06-30 19:00:40.364838"], ["role", "admin"]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "flavia@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "flavia"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "surname", "username", "email", "encrypted_password", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "flavia"], ["surname", "mon"], ["username", "flavia"], ["email", "flavia@gmail.com"], ["encrypted_password", "$2a$11$rrwQbqejYqI17Iv00e7T8eGhfkmIlvPMO0ne4HnFRI3rFPmlVYKeW"], ["created_at", "2018-06-30 19:00:40.552448"], ["updated_at", "2018-06-30 19:00:40.552448"], ["role", "admin"]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-30 19:00:40.597111"], ["updated_at", "2018-06-30 19:00:40.597111"], ["owner_id", 2], ["guest_id", 3]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-30 19:00:40.626942"], ["updated_at", "2018-06-30 19:00:40.626942"], ["text", "Ciao vincenzo"], ["read", "t"], ["chat_id", 1]]
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-30 19:00:40.636090"], ["updated_at", "2018-06-30 19:00:40.636090"], ["text", "Ciao giorgio, tutto bene?"], ["read", "t"], ["from", 1], ["chat_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("created_at", "updated_at", "owner_id", "guest_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2018-06-30 19:00:40.640285"], ["updated_at", "2018-06-30 19:00:40.640285"], ["owner_id", 2], ["guest_id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "chat_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2018-06-30 19:00:40.644377"], ["updated_at", "2018-06-30 19:00:40.644377"], ["text", "Ciao Fla, come stai?"], ["read", "t"], ["chat_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("created_at", "updated_at", "text", "read", "from", "chat_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2018-06-30 19:00:40.647664"], ["updated_at", "2018-06-30 19:00:40.647664"], ["text", "Ciao Gio, bene tu? stai studiando?"], ["read", "t"], ["from", 1], ["chat_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
